{"version":3,"file":"static/js/77.9c540fda239ea2469a52.js","sources":["webpack:///src/pages/farmProductBrand/farmProductBrandList.vue"],"sourcesContent":["<template>\r\n\t<div\r\n\t\tclass=\"farm-product-brand\"\r\n\t\tv-title\r\n\t\tdata-title=\"农产品品牌明细\"\r\n\t\tv-loading=\"excelLoading\"\r\n\t\telement-loading-text=\"数据导出中...\"\r\n\t\telement-loading-spinner=\"el-icon-loading\"\r\n\t\telement-loading-background=\"rgba(0, 0, 0, 0.5)\"\r\n\t>\r\n\t\t<Nav @back=\"back\" title=\"农产品品牌明细\" :hasShadow=\"true\" backColor=\"#B6CFDE\">\r\n\t\t\t<div slot=\"right\" style=\"width: 246px\">\r\n\t\t\t\t<!-- 布局占位 -->\r\n\t\t\t</div>\r\n\t\t</Nav>\r\n\r\n\t\t<div class=\"main\">\r\n\t\t\t<div class=\"search-box\">\r\n\t\t\t\t<div class=\"search-box-left\">\r\n\t\t\t\t\t<CustomSelect margin=\"0 15px 0 0\" v-if=\"getLevel\">\r\n\t\t\t\t\t\t<template slot=\"select-container\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"brandValue\" placeholder=\"全部品牌\" @change=\"brandChange\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in brand\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\">\r\n\t\t\t\t\t\t\t\t\t<!-- <span >{{ item.areaName }}</span> -->\r\n\t\t\t\t\t\t\t\t</el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</CustomSelect>\r\n\t\t\t\t\t<CustomSelect margin=\"0 15px 0 0\">\r\n\t\t\t\t\t\t<template slot=\"select-container\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"industryValue\" placeholder=\"全部行业\" @change=\"industryChange\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in industry\" :key=\"item.id\" :label=\"item.bizCategoryName\" :value=\"item.id\">\r\n\t\t\t\t\t\t\t\t\t<!-- <span >{{ item.areaName }}</span> -->\r\n\t\t\t\t\t\t\t\t</el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</CustomSelect>\r\n\t\t\t\t\t<CustomSelect margin=\"0 15px 0 0\" v-if=\"getLevel\">\r\n\t\t\t\t\t\t<template slot=\"select-container\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"areaItem\" placeholder=\"全部区\" value-key=\"id\" @change=\"areaChange\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in area\" :key=\"item.id\" :label=\"item.areaName\" :value=\"item\">\r\n\t\t\t\t\t\t\t\t\t<!-- <span >{{ item.areaName }}</span> -->\r\n\t\t\t\t\t\t\t\t</el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</CustomSelect>\r\n\r\n\t\t\t\t\t<CustomInput iconfont=\"el-icon-search\" placeholder=\"输入品牌名称搜索\" v-model=\"keyword\" @clickAndEnter=\"clickAndEnter\"></CustomInput>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- <div class=\"excel-box\">\r\n\t\t\t\t\t<div class=\"excel\" @click=\"download\">\r\n\t\t\t\t\t\t<img src=\"../../assets/images/table/bg-excel-icon.png\" />\r\n\t\t\t\t\t\t<span style=\"margin-left: 9px\">导出EXCEL</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div> -->\r\n\t\t\t</div>\r\n\t\t\t<div class=\"list-content\" ref=\"listContent\">\r\n\t\t\t\t<!-- <Loading :show=\"true\" type=\"element\"></Loading> -->\r\n\t\t\t\t<CustomTable>\r\n\t\t\t\t\t<template slot=\"table-container\">\r\n\t\t\t\t\t\t<el-table :data=\"brandList\" style=\"width: 100%\" :fit=\"true\" :height=\"tableHeight\" :lazy=\"true\">\r\n\t\t\t\t\t\t\t<template slot=\"empty\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Loading :show=\"loading\" type=\"element\" theme=\"loader-light\"></Loading>\r\n\t\t\t\t\t\t\t\t\t<div class=\"no-data\" v-if=\"!loading\">\r\n\t\t\t\t\t\t\t\t\t\t<img src=\"../../assets/images/table/bg-table-no-data.png\" />\r\n\t\t\t\t\t\t\t\t\t\t<span>暂无数据</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<el-table-column label=\"品牌\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text-bold\">{{ scope.row.name }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"类型\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ scope.row.shareFlag ? '公用品牌' : '--' }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"行业\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ scope.row.businessCategoryNickname ? scope.row.businessCategoryNickname : '--' }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"区域\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ scope.row.countyName }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"申报单位\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"handle\">\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ scope.row.companyName }}</span>\r\n\t\t\t\t\t\t\t\t\t\t<span @click=\"handleEdit(scope.row)\">详情</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t\t</el-table>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</CustomTable>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div v-if=\"total > pageSize\" class=\"page-box\">\r\n\t\t\t<Page\r\n\t\t\t\t:total=\"total\"\r\n\t\t\t\t:page-size=\"pageSize\"\r\n\t\t\t\t:current=\"currentPage\"\r\n\t\t\t\t@onChange=\"onChange\"\r\n\t\t\t\t@changePageSize=\"changePageSize\"\r\n\t\t\t\t:isPageSizeShow=\"true\"\r\n\t\t\t\t:isJumpShow=\"true\"\r\n\t\t\t\t:isTotalShow=\"true\"\r\n\t\t\t\t:perPage=\"15\"\r\n\t\t\t></Page>\r\n\t\t</div>\r\n\r\n\t\t<brand-dialog v-if=\"showDialog\" :showDialog.sync=\"showDialog\" :data=\"brandDetail\" :loading=\"detailLoading\"></brand-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Nav from '@/components/common/nav.vue';\r\nimport Page from '@/components/common/page.vue';\r\nimport Loading from '@/components/common/loading.vue';\r\nimport CustomInput from '@/components/common/input.vue';\r\nimport CustomSelect from '@/components/common/select.vue';\r\nimport CustomTable from '@/components/common/table.vue';\r\nimport CustomTableSort from '@/components/common/custom-table-sort.vue';\r\nimport BrandDialog from './components/BrandDialog.vue';\r\n\r\nimport {areaLevelCorAreaId} from '@/common/fn/index.js';\r\nimport {SessionStorage, getStorage} from '@/utils/storage.js';\r\n// import {downloadExcel} from '@/utils/utils.js';\r\nimport filterArea from '@/common/config/filterArea.js';\r\n\r\nlet greenCertSessionStorage = '';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tpageSize: 15,\r\n\t\t\ttotal: 1,\r\n\t\t\tkeyword: '',\r\n\t\t\tbrandList: [],\r\n\t\t\tbrandValue: '',\r\n\t\t\tbrand: [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: '全部品牌',\r\n\t\t\t\t\tid: ''\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: '公用品牌',\r\n\t\t\t\t\tid: 1\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tindustryValue: '',\r\n\t\t\tindustry: [\r\n\t\t\t\t{\r\n\t\t\t\t\tbizCategoryName: '全部行业',\r\n\t\t\t\t\tid: ''\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tarea: [\r\n\t\t\t\t{\r\n\t\t\t\t\tareaName: '全部区',\r\n\t\t\t\t\tid: ''\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tareaItem: {\r\n\t\t\t\tareaName: '全部区',\r\n\t\t\t\tid: ''\r\n\t\t\t},\r\n\t\t\t// sortDirection: null,\r\n\t\t\t// defaultSort: 'descending',\r\n\t\t\ttableHeight: 0,\r\n\t\t\tloading: false,\r\n\t\t\tdataTargetFlag: '',\r\n\t\t\texcelLoading: false,\r\n\t\t\tshowDialog: false,\r\n\t\t\tbrandDetail: {},\r\n\t\t\tdetailLoading: false\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\t// this.dataTargetFlag = getStorage('govGovernmentSubjectVO').dataTargetFlag;\r\n\t\tthis.getArea();\r\n\t\tthis.getBusinessCategory();\r\n\t\tif (!this.$route.query.areaId) {\r\n\t\t\tthis.getPpBrandList();\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tgetLevel() {\r\n\t\t\treturn getStorage('govGovernmentSubjectVO').subjectLevel === 2 && getStorage('govGovernmentSubjectVO').cityId === '310100';\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tif (greenCertSessionStorage) {\r\n\t\t\tthis.keyword = greenCertSessionStorage.keyword;\r\n\t\t}\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tthis.tableHeight = this.$refs.listContent.offsetHeight;\r\n\t\t});\r\n\t\twindow.addEventListener('resize', this.resizeHandle, false);\r\n\t},\r\n\tmethods: {\r\n\t\tback() {\r\n\t\t\tthis.$router.push('/home/farmProductBrand');\r\n\t\t},\r\n\t\tareaChange() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getPpBrandList();\r\n\t\t},\r\n\t\tbrandChange() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getPpBrandList();\r\n\t\t},\r\n\t\tindustryChange() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getPpBrandList();\r\n\t\t},\r\n\t\tonChange(page) {\r\n\t\t\tthis.currentPage = page;\r\n\t\t\tthis.getPpBrandList();\r\n\t\t},\r\n\t\tchangePageSize(pageSize) {\r\n\t\t\tthis.pageSize = pageSize;\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getPpBrandList();\r\n\t\t},\r\n\t\tclickAndEnter() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getPpBrandList();\r\n\t\t},\r\n\t\thandleEdit(row) {\r\n\t\t\tthis.showDialog = true;\r\n\t\t\tconsole.log(row);\r\n\t\t\t// this.detailLoading = true;\r\n\t\t\t// this.brandDetail = row;\r\n\t\t\tthis.getBrandDetail(row.id);\r\n\t\t\t// this.detailLoading = false;\r\n\t\t},\r\n\t\tasync getBrandDetail(id) {\r\n\t\t\tthis.detailLoading = true;\r\n\t\t\tconst res = await this.$ajax.post(this.$api.brand.getPpBrand, {\r\n\t\t\t\tid\r\n\t\t\t});\r\n\t\t\tif (res.data.respCode === 0) {\r\n\t\t\t\tthis.brandDetail = res.data.obj;\r\n\t\t\t}\r\n\t\t\tthis.detailLoading = false;\r\n\t\t},\r\n\t\tasync getPpBrandList() {\r\n\t\t\tthis.brandList = [];\r\n\t\t\tthis.loading = true;\r\n\t\t\tconst defaultArea = areaLevelCorAreaId();\r\n\r\n\t\t\tconst options = {\r\n\t\t\t\tfarmAreaId: this.areaItem.id ? [this.areaItem.id] : [defaultArea.farmAreaId],\r\n\t\t\t\tfarmAreaType: this.areaItem.level ? this.areaItem.level : defaultArea.farmAreaType,\r\n\t\t\t\tkeywords: this.keyword ? this.keyword : '',\r\n\t\t\t\tpageNo: this.currentPage,\r\n\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\tbusinessCategoryId: this.industryValue ? this.industryValue : null,\r\n\t\t\t\tshareFlag: this.brandValue ? this.brandValue : null\r\n\t\t\t};\r\n\r\n\t\t\tconst res = await this.$ajax.post(this.$api.brand.getPpBrandList, options);\r\n\r\n\t\t\tif (res.data.respCode === 0) {\r\n\t\t\t\tthis.brandList = res.data.obj.list;\r\n\t\t\t\tthis.total = res.data.obj.totalCount;\r\n\t\t\t\tthis.loading = false;\r\n\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.tableHeight = this.$refs.listContent.offsetHeight;\r\n\t\t\t\t\tthis.backTop();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getBusinessCategory() {\r\n\t\t\tconst res = await this.$ajax.post(this.$api.produce.businessCategory, {});\r\n\r\n\t\t\tif (res.data.respCode === 0) {\r\n\t\t\t\tres.data.obj.list.forEach(ele => {\r\n\t\t\t\t\tthis.industry.push(ele);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getArea() {\r\n\t\t\tconst res = await this.$ajax.post(this.$api.area.listByParentId, {\r\n\t\t\t\tparentId: getStorage('govGovernmentSubjectVO').cityId\r\n\t\t\t});\r\n\t\t\tif (res.data.respCode === 0) {\r\n\t\t\t\t// this.area = res.data.obj.list;\r\n\t\t\t\tres.data.obj.list.forEach(ele => {\r\n\t\t\t\t\tlet temp = [];\r\n\t\t\t\t\t// 当行政区为上海时，过滤没有gis地图的区\r\n\t\t\t\t\tif (getStorage('govGovernmentSubjectVO').cityId === '310100') {\r\n\t\t\t\t\t\ttemp = filterArea.filterArea.filter(element => ele.id === element.id);\r\n\t\t\t\t\t\tif (temp.length) return;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.area.push(ele);\r\n\t\t\t\t});\r\n\t\t\t\tif (this.$route.query.areaId) {\r\n\t\t\t\t\tthis.areaItem = this.area.filter(ele => ele.id === String(this.$route.query.areaId))[0];\r\n\t\t\t\t\tthis.getPpBrandList();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tresizeHandle() {\r\n\t\t\tthis.tableHeight = this.$refs.listContent.offsetHeight;\r\n\t\t},\r\n\t\tbackTop() {\r\n\t\t\tdocument.querySelector('.el-table__body-wrapper').scrollTop = 0;\r\n\t\t}\r\n\t},\r\n\tdestroyed() {\r\n\t\twindow.removeEventListener('resize', this.resizeHandle, false);\r\n\t},\r\n\tcomponents: {\r\n\t\tNav,\r\n\t\tPage,\r\n\t\tLoading,\r\n\t\tCustomInput,\r\n\t\tCustomSelect,\r\n\t\tCustomTable,\r\n\t\tCustomTableSort,\r\n\t\tBrandDialog\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.farm-product-brand {\r\n\toverflow: hidden;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\theight: 100vh;\r\n\tmin-width: 1366px;\r\n\tmin-height: 696px;\r\n\tbox-sizing: border-box;\r\n\tbackground-color: #021220;\r\n\r\n\t.main {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t\toverflow: hidden;\r\n\r\n\t\t.search-box {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tpadding: 28px 50px 21px;\r\n\r\n\t\t\t.search-box-left {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t}\r\n\r\n\t\t\t.excel-box {\r\n\t\t\t\t.excel {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\twidth: 120px;\r\n\t\t\t\t\theight: 36px;\r\n\t\t\t\t\tborder: 1px solid #145763;\r\n\t\t\t\t\tborder-radius: 2px;\r\n\t\t\t\t\tbackground-color: #24969A;\r\n\t\t\t\t\tcolor: #D9E3ED;\r\n\t\t\t\t\tfont-size: 14px;\r\n\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.list-content {\r\n\t\t\tflex: 1;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\toverflow: hidden;\r\n\t\t\theight: 100%;\r\n\t\t}\r\n\t}\r\n\r\n\t.handle {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tfont-size: 14px;\r\n\r\n\t\tspan:nth-child(1) {\r\n\t\t\tdisplay: inline-block;\r\n\t\t\twidth: 220px;\r\n\t\t\twhite-space: nowrap;\r\n\t\t\toverflow: hidden;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\tpadding-right: 15px;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t}\r\n\t\tspan:nth-child(2) {\r\n\t\t\tcolor: #1ea8f7;\r\n\t\t\tcursor: pointer;\r\n\t\t}\r\n\t}\r\n\t.handle.handle-disabled {\r\n\t\tcolor: #aaaaaa;\r\n\t\tcursor: not-allowed;\r\n\t}\r\n\r\n\t.text {\r\n\t\tcolor: #A1ACB7;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\t.text-bold {\r\n\t\tcolor: #A1ACB7;\r\n\t\tfont-weight: bold;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\t.value-text {\r\n\t\tcolor: #A1ACB7;\r\n\t\tfont-weight: bold;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.page-box {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\t\talign-items: center;\r\n\t\theight: 88px;\r\n\t\tpadding: 0 40px;\r\n\t\tbackground: #021220;\r\n\t\tbox-shadow: 0px -3px 21px 0px rgba(4, 52, 82, 0.2);\r\n\t}\r\n\r\n\t.no-data {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t}\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\">\r\n.farm-product-brand > .el-loading-mask {\r\n\ti {\r\n\t\tcolor: #00e5ff;\r\n\t\tfont-size: 40px;\r\n\t}\r\n\tp {\r\n\t\tcolor: #00e5ff;\r\n\t\tline-height: 40px;\r\n\t\tfont-size: 18px;\r\n\t}\r\n}\r\n.farm-product-brand .custom-select {\r\n\t.el-input__inner::-webkit-input-placeholder {\r\n\t\tcolor: #072138;\r\n\t}\r\n\t.el-input__inner::-moz-placeholder {\r\n\t\t/* Mozilla Firefox 19+ */\r\n\t\tcolor: #072138;\r\n\t}\r\n\t.el-input__inner:-moz-placeholder {\r\n\t\t/* Mozilla Firefox 4 to 18 */\r\n\t\tcolor: #072138;\r\n\t}\r\n\t.el-input__inner:-ms-input-placeholder {\r\n\t\t/* Internet Explorer 10-11 */\r\n\t\tcolor: #072138;\r\n\t}\r\n}\r\n.farm-product-brand .el-table {\r\n\tthead {\r\n\t\ttr {\r\n\t\t\theight: 70px;\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/farmProductBrand/farmProductBrandList.vue"],"mappings":"AA6IA","sourceRoot":""}
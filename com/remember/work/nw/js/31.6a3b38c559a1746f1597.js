webpackJsonp([31],{"3WVt":function(t,e){},JvUj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("xk5x"),r=a("VCTt");var i={series:[{center:["50%","50%"],type:"liquidFill",radius:"86%",period:function(t,e){return 2e3*e+2e3},data:[0],animationEasing:"linear",animationEasingUpdate:"linear",animationDuration:2e3,animationDurationUpdate:1e3,backgroundStyle:{borderWidth:0,color:"#033250"},outline:{show:!0,borderDistance:4,itemStyle:{color:"none",borderColor:"#3CC8FF",borderWidth:1}},itemStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#00F6FF"},{offset:1,color:"#01C0FF"}],global:!1},opacity:1},emphasis:{itemStyle:{opacity:1}},label:{insideColor:"#040E22",shadowBlur:1,shadowColor:"#00F6FF",fontSize:14,color:"#A6CCD0",fontWeight:"bold"},chartsInstance:null}]},s={name:"gov-regulatory-1",props:{farmAreaInfo:{type:Object,default:function(){return Object(r.b)()}}},data:function(){return{infoData:[{name:"昨日",totalTimes:0,unqualifiedTimes:0,passRate:0,startTimeStr:"",endTimeStr:""},{name:"本月",totalTimes:0,unqualifiedTimes:0,passRate:0,startTimeStr:"",endTimeStr:""},{name:"本年",totalTimes:0,unqualifiedTimes:0,passRate:0,startTimeStr:"",endTimeStr:""}],chartsInstance:null,serverTime:null}},mounted:function(){var t=this;this.$nextTick(function(){t.initMoudle()})},methods:{initMoudle:function(){var t=this;$(window).width()>3e3&&(i.series[0].label.fontSize=20),this.refreshChart(this.infoData.map(function(e,a){return t._initEcharts(t.$refs["EContainer"+a][0],i)}))},refreshRender:function(){this.chartsInstance&&this.chartsInstance.forEach(function(t){t.resize()})},getPatrolRecordStatisticsByArea:function(){var t=this;return this.$ajax.post(this.$api.overview.getPatrolRecord,{farmAreaId:[this.farmAreaInfo.farmAreaId],farmAreaType:this.farmAreaInfo.farmAreaType}).then(function(e){var a=e.data;if(t.serverTime=a.curDate,0===a.respCode)return a.obj}).catch(function(t){console.log(new Error("执法监管error"),t)})},_initEcharts:function(t,e){var a=this.$echarts.init(t);return a.setOption(e),a},refreshChart:function(t){var e=this;return function(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function n(r,i){try{var s=e[r](i),o=s.value}catch(t){return void a(t)}if(!s.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})}}(regeneratorRuntime.mark(function a(){var n,i,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=["yesterday","month","year"],a.next=3,e.getPatrolRecordStatisticsByArea();case 3:i=a.sent,s=e,e.infoData.forEach(function(t,a){var r=null,s=null;switch(a){case 0:r=s=new Date(e.serverTime).setDate(new Date(e.serverTime).getDate()-1);break;case 1:r=new Date(e.serverTime).setDate(1),s=new Date(new Date(e.serverTime).setMonth(new Date(e.serverTime).getMonth()+1)).setDate(0);break;case 2:r=new Date(e.serverTime).setMonth(0,1),s=new Date(e.serverTime).setMonth(11,31)}t.startTimeStr=r,t.endTimeStr=s,t.totalTimes=i[n[a]+"PatrolTotalCount"],t.unqualifiedTimes=i[n[a]+"PatrolUnqualifiedCount"],t.passRate=0===t.totalTimes?0:1-t.unqualifiedTimes/t.totalTimes}),t.forEach(function(t,a){t.setOption({series:[{label:{formatter:function(t){if(0===s.infoData[a].totalTimes)return"--";var e=String(100*t.value).split(".");return e.length>1&&(e[1]=e[1].slice(0,1)),Object(r.j)({value:Number(e.join("."))})+"%"}},data:[e.infoData[a].passRate]}]})}),e.chartsInstance=t;case 8:case"end":return a.stop()}},a,e)}))()},handleDetail:function(t){if(!this.serverTime)return!1;this.$router.push({name:"lawSuperviseList",query:t})},handle:function(){this.$emit("handleClick","lawSuperviseList","安全监管")}},components:{areaPanel:n.default}},o=a("W5g0");var l=function(t){a("3WVt")},c=Object(o.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gov-area-panel"},[a("area-panel",{attrs:{"area-title":"安全监管"},on:{"hand-sub-title":t.handle}},[a("ul",{staticClass:"panel-main block-ul",attrs:{slot:"panelMain"},slot:"panelMain"},t._l(t.infoData,function(e,n){return a("li",{key:n,staticClass:"block-item"},[a("div",{staticClass:"block-name"},[a("p",{staticClass:"b-name"},[t._v(t._s(e.name))]),t._v(" "),a("p",{staticClass:"s-name"},[t._v("合格率")])]),t._v(" "),a("div",{staticClass:"chart-wrap"},[a("div",{ref:"EContainer"+n,refInFor:!0,staticClass:"echarts-container"})]),t._v(" "),a("div",{staticClass:"block-info"},[a("p",{staticClass:"info-line",on:{click:function(a){return t.handleDetail({startTimeStr:e.startTimeStr,endTimeStr:e.endTimeStr})}}},[t._v("\n\t\t\t\t\t\t监管次数：\n\t\t\t\t\t\t"),a("span",{staticClass:"special-des"},[t._v(t._s(e.totalTimes))])]),t._v(" "),a("p",{staticClass:"info-line",on:{click:function(a){return t.handleDetail({patrolResult:"4",startTimeStr:e.startTimeStr,endTimeStr:e.endTimeStr})}}},[t._v("\n\t\t\t\t\t\t不合格次数：\n\t\t\t\t\t\t"),a("span",{staticClass:"special-des",class:[0===e.unqualifiedTimes?"normal":"warn"]},[t._v(t._s(e.unqualifiedTimes))])])])])}),0)])],1)},[],!1,l,"data-v-65f9ad12",null);e.default=c.exports}});
//# sourceMappingURL=31.6a3b38c559a1746f1597.js.map
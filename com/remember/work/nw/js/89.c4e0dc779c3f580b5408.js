webpackJsonp([89],{"3rHM":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("VCTt");var r={name:"gmap",data:function(){return{gmap:null,allPolygon:[],isFeatureClick:!1,adCodes:[1e5],sub:!0}},mounted:function(){var t=this;this.$nextTick(function(){t._initMap()})},methods:{_initMap:function(){var t=this;this.gmap=L.map(this.gmapEl,{center:[0,0],zoom:9,zoomSnap:.1,layers:[],zoomControl:!1,attributionControl:!1,dragging:!0,touchZoom:!1,scrollWheelZoom:!0,doubleClickZoom:!1,boxZoom:!1,tap:!1,keyboard:!1,maxZoom:21,minZoom:5}).on("click",function(e){t.isFeatureClick||t.drawPolygon(t.removeCode()),t.isFeatureClick=!1}),this.drawPolygon(this.adCodes[0])},drawPolygon:function(t){var e=this;return function(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,o){return function n(r,a){try{var i=e[r](a),s=i.value}catch(t){return void o(t)}if(!i.done)return Promise.resolve(s).then(function(t){n("next",t)},function(t){n("throw",t)});t(s)}("next")})}}(regeneratorRuntime.mark(function o(){var r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(n.g)({areaId:t});case 2:r=o.sent,a=r.features,e.sub=r.sub,e.allPolygon.forEach(function(t){t.remove()}),e.allPolygon=[],a.forEach(function(t,o){e.allPolygon[o]=L.geoJSON(t,{style:function(){return{color:"#ffc777",fillColor:"#47473b",fillOpacity:.6,fillRule:"evenodd",className:"polygonbox",lineJoin:"miter",weight:1}}}).on("click",function(t){t.latlng;var o=t.layer;e.isFeatureClick=!0,e.drawPolygon(o.feature.properties.adcode),e.addAdCode(o.feature.properties.adcode)}).addTo(e.gmap)}),e.drawProvinceFn();case 9:case"end":return o.stop()}},o,e)}))()},drawProvinceFn:function(){var t,e,o=[],n=void 0;this.allPolygon.forEach(function(t){var e=t.getBounds();o.push([e._southWest.lat,e._southWest.lng]),o.push([e._northEast.lat,e._northEast.lng])}),n=L.polygon(o,{}).getBounds(),t=this.gmap.getBoundsZoom(n),e=n.getCenter(),this.gmap.setView(e,t)},addAdCode:function(t){if(!this.sub)return!1;this.adCodes=[].concat(function(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}(this.adCodes),[t])},removeCode:function(){return this.adCodes.length>1?(this.adCodes.pop(),this.adCodes.slice(-1)[0]):this.adCodes[0]}},computed:{gmapEl:function(){return this.$refs.gmap}}},a=o("W5g0");var i=function(t){o("WeBJ")},s=Object(a.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{ref:"gmap",staticClass:"gmap",attrs:{id:"gmap"}})])},[],!1,i,"data-v-c5c5d50e",null);e.default=s.exports},WeBJ:function(t,e){}});
//# sourceMappingURL=89.c4e0dc779c3f580b5408.js.map
webpackJsonp([21],{gm8P:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("VCTt"),r=n("N/DY");function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function a(r,i){try{var o=e[r](i),s=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(s).then(function(t){a("next",t)},function(t){a("throw",t)});t(s)}("next")})}}var o={show:!1,position:"insideBottom",distance:15,align:"left",verticalAlign:"middle",rotate:90,formatter:"{c} 万亩",fontSize:14,color:"#ffffff",rich:{name:{textBorderColor:"#fff"}}},s={grid:{show:!1,top:25,left:"3%",right:"3%",bottom:85},tooltip:{trigger:"axis",backgroundColor:"#020A10",padding:[12,20,12,20],textStyle:{color:"#ecfeff",fontSize:12},axisPointer:{type:"shadow",shadowStyle:{color:"rgba(0,0,0,0.3)"}},formatter:function(t){return'<span style="font-weight: bold;">'+t[0].axisValue+"</span><br>"+t.map(function(t){return""!==t.value?("经作田"===t.seriesName?t.seriesName+"/果园":t.seriesName)+"："+t.value+"万亩<br>":""}).join("")}},xAxis:[{type:"category",axisTick:{show:!1},axisLine:{lineStyle:{color:"rgba(50, 206, 187, 0.15)"}},axisLabel:{color:"#6DC1CB",fontSize:14,interval:0,formatter:function(t){return t}},data:[]}],yAxis:[{type:"value",axisLine:{show:!1},axisLabel:{color:"#6DC1CB",fontSize:14,fontWeight:400},splitLine:{lineStyle:{color:"rgba(50, 206, 187, 0.15)"}}}],series:[]},c={props:{farmAreaInfo:{type:Object,default:function(){return Object(a.b)()}}},data:function(){return{chartInstance:null,areaTotal:0,loading:!1,legendList:[]}},mounted:function(){var t=this;this.$nextTick(function(){t.initMoudle()}),window.addEventListener("resize",this.adaptationChart),this.$once("hook:beforeDestroy",function(){window.removeEventListener("resize",this.adaptationChart)})},methods:{initMoudle:function(){var t=this;return i(regeneratorRuntime.mark(function e(){var n,a,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.chartInstance=t._initEcharts(t.eContainerRef,s),e.next=4,t.getDataList();case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:a=n.categoryList,r=n.areaLandByAreaList,i=n.sumSnLanArea,a.forEach(function(e){e.sumArea&&t.legendList.push(e)}),t.areaTotal=i,t.refreshChart(t.chartInstance,r,t.legendList),t.loading=!1;case 12:case"end":return e.stop()}},e,t)}))()},refreshChart:function(t,e,n){var a=this;return i(regeneratorRuntime.mark(function i(){var s,c,l,u,f,d,h,m,p;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:for(h in f=function(t,e){t[e]?(l["sortNum"+e].name=t[e].landType,l["sortNum"+e].itemStyle.color=t[e].color,l["sortNum"+e].data.push(s._formatNum(t[e].snLandArea)||"")):t[e]||l["sortNum"+e].data.push("")},s=a,c=[],l={},n.forEach(function(t){l["sortNum"+t.sortNum]={name:"",type:"bar",barGap:0,itemStyle:{color:"#000"},label:o,data:[]}}),u=[],e.forEach(function(t){if("310100"!==t.areaId){c.push(r.b[t.areaId]);var e=0,i={};t.detailList.forEach(function(t){e+=t.snLandArea,i[t.sortNum]=t}),n.forEach(function(t){f(i,t.sortNum)}),u.push(a._formatNum(e))}}),d=[],l)m=parseInt(h.slice(-1))-1,d[m]=l[h];p={xAxis:{data:c,axisLabel:{formatter:function(t,e){return"{t|"+t+"}\n{s|}\n{b|"+u[e]+"万亩}"},rich:{t:{color:"#ecfeff",fontSize:14},s:{height:5},b:{color:"#FEEB48",fontSize:16}}}},series:d},t.setOption(p),a.adaptationChart();case 12:case"end":return i.stop()}},i,a)}))()},getDataList:function(){var t=r.a.map(function(t){return t.id});return this.$ajax.post(this.$api.overview.getStatisticsSnByAreaIds,{farmAreaId:t,farmAreaType:this.farmAreaInfo.farmAreaType}).then(function(t){var e=t.data;return 0===e.respCode?e.obj:null}).catch(function(t){console.log("production17List error: ",t)})},_initEcharts:function(t,e){var n=this.$echarts.init(t);return n.setOption(e),n},_formatNum:function(t){return Object(a.j)({value:t/1e4})},refreshRender:function(){this.chartInstance&&this.chartInstance.resize()},adaptationChart:function(){var t={tooltip:{textStyle:{fontSize:12}},xAxis:{axisLabel:{rich:{t:{fontSize:14},b:{fontSize:16}}}}};(document.documentElement.clientWidth||document.body.clientWidth)>3e3?(t={tooltip:{textStyle:{fontSize:16}},xAxis:{axisLabel:{rich:{t:{fontSize:16},b:{fontSize:18}}}}},this.chartInstance&&this.chartInstance.setOption(t)):(t={tooltip:{textStyle:{fontSize:12}},xAxis:{axisLabel:{rich:{t:{fontSize:14},b:{fontSize:16}}}}},this.chartInstance&&this.chartInstance.setOption(t))}},computed:{eContainerRef:function(){return this.$refs.EContainer}}},l=n("W5g0");var u=function(t){n("lkas")},f=Object(l.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"production-17-list",attrs:{"element-loading-spinner":"iconfont icon-loading1","element-loading-background":"rgba(0, 0, 0, 0.2)"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"top-cell"},[n("div",{staticClass:"total"},[n("span",[t._v("入网地块面积：")]),n("span",[n("i",[t._v(t._s(t._formatNum(t.areaTotal)))]),t._v("万亩")])]),t._v(" "),n("div",{staticClass:"legend"},t._l(t.legendList,function(e){return n("div",{key:e.category,staticClass:"legend-item",class:{marginMore:t.legendList.length<=4}},[n("span",{style:{backgroundColor:e.color}}),t._v(" "),n("span",[t._v(t._s("经作田"===e.category?e.category+"/果园":e.category)+"：")]),t._v(" "),n("span",{style:{color:e.color}},[t._v(t._s(t._formatNum(e.sumArea))+"万亩")])])}),0)]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],ref:"EContainer",staticClass:"echart-container"})])},[],!1,u,"data-v-c1874870",null);e.default=f.exports},lkas:function(t,e){}});
//# sourceMappingURL=21.9775c5cffb6de0f69a98.js.map
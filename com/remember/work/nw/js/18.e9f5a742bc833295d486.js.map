{"version":3,"file":"static/js/18.e9f5a742bc833295d486.js","sources":["webpack:///src/pages/overview/lawSuperviseList.vue"],"sourcesContent":["<template>\r\n\t<div\r\n\t\tclass=\"law-supervise\"\r\n\t\tv-title\r\n\t\t:data-title=\"isHeaderShow ? '安全监管明细' : '农业总览'\"\r\n\t\tv-loading=\"excelLoading\"\r\n\t\telement-loading-text=\"导出中...\"\r\n\t\telement-loading-spinner=\"el-icon-loading\"\r\n\t\telement-loading-background=\"rgba(0, 0, 0, 0.5)\"\r\n\t\t:style=\"{minWidth: minWidth, height: height, minHeight: minHeight}\"\r\n\t>\r\n\t\t<Nav @back=\"back\" title=\"安全监管明细\" :hasShadow=\"true\" backColor=\"#B6CFDE\" v-if=\"isHeaderShow\" paddingRight=\"13px\" :isUserCenter=\"true\" :isAddNum=\"isAddNum\">\r\n\t\t\t<!-- <div slot=\"right\" style=\"width: 246px\"> -->\r\n\t\t\t<!-- 布局占位 -->\r\n\t\t\t<!-- </div> -->\r\n\t\t</Nav>\r\n\r\n\t\t<div class=\"main\">\r\n\t\t\t<div class=\"search-box\" v-if=\"isSearchShow\">\r\n\t\t\t\t<div class=\"search-box-left\">\r\n\t\t\t\t\t<CustomDatePicker margin=\"0 15px 0 0\" :clearable=\"!!dateValue.startTime\" v-model=\"dateValue\" @change=\"dateChange\"></CustomDatePicker>\r\n\r\n\t\t\t\t\t<CustomSelect margin=\"0 15px 0 0\">\r\n\t\t\t\t\t\t<template slot=\"select-container\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"checkNameValue\" placeholder=\"选择考核结果\" @change=\"patrolResultChange\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"(item, index) in checkNameMap\" :key=\"index\" :label=\"item.text\" :value=\"item.index\"> </el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</CustomSelect>\r\n\r\n\t\t\t\t\t<CustomSelect margin=\"0 15px 0 0\" v-if=\"getLevel\">\r\n\t\t\t\t\t\t<template slot=\"select-container\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"areaItem\" placeholder=\"全部区\" value-key=\"id\" @change=\"areaChange\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in area\" :key=\"item.id\" :label=\"item.areaName\" :value=\"item\"> </el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</CustomSelect>\r\n\r\n\t\t\t\t\t<CustomInput iconfont=\"el-icon-search\" placeholder=\"输入经营主体名称搜索\" v-model=\"keyword\" @clickAndEnter=\"clickAndEnter\"></CustomInput>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"excel-box\">\r\n\t\t\t\t\t<div class=\"excel\" @click=\"download\">\r\n\t\t\t\t\t\t<img src=\"../../assets/images/table/bg-excel-icon.png\" />\r\n\t\t\t\t\t\t<span style=\"margin-left: 9px\">导出EXCEL</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"list-content\" ref=\"listContent\">\r\n\t\t\t\t<!-- <Loading :show=\"true\" type=\"element\"></Loading> -->\r\n\t\t\t\t<CustomTable>\r\n\t\t\t\t\t<template slot=\"table-container\">\r\n\t\t\t\t\t\t<el-table :data=\"lawSuperviseList\" style=\"width: 100%\" :fit=\"true\" :height=\"tableHeight\" :lazy=\"true\" @row-click=\"rowClick\">\r\n\t\t\t\t\t\t\t<template slot=\"empty\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Loading :show=\"loading\" type=\"element\" theme=\"loader-light\"></Loading>\r\n\t\t\t\t\t\t\t\t\t<div class=\"no-data\" v-if=\"!loading\">\r\n\t\t\t\t\t\t\t\t\t\t<img src=\"../../assets/images/table/bg-table-no-data.png\" />\r\n\t\t\t\t\t\t\t\t\t\t<span>暂无数据</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<el-table-column>\r\n\t\t\t\t\t\t\t\t<template slot=\"header\" slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<CustomTableSort title=\"日期\" :defaultSort=\"dateDefaultSort\" prop=\"date\" @sortChange=\"sortChange\"></CustomTableSort>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ formatDate(scope.row.createdDate, '.') }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"经营主体名称\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text-bold\">{{ scope.row.cname }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<!-- <el-table-column\r\n\t\t\t\t\t\t\t\tlabel=\"区/县\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ scope.row.countyName }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column> -->\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"所在地\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ scope.row.countyName }}/{{ scope.row.town }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"类型\" v-if=\"!hideColumn.patrolType\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ checkTypeMap[scope.row.patrolType] }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"考核得分\">\r\n\t\t\t\t\t\t\t\t<template slot=\"header\" slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<CustomTableSort title=\"考核得分\" :defaultSort=\"patrolValueDefaultSort\" prop=\"patrolValue\" @sortChange=\"sortChange\"></CustomTableSort>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"value-text\">\r\n\t\t\t\t\t\t\t\t\t\t{{ checkNameMap[scope.row.patrolResult === 0 ? 5 : scope.row.patrolResult].text !== '未知' ? scope.row.patrolValue : '--' }}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"考核结果\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"patrol-text\" :style=\"{color: getColor(scope.row.patrolResult)}\">\r\n\t\t\t\t\t\t\t\t\t\t{{ checkNameMap[scope.row.patrolResult === 0 ? 5 : scope.row.patrolResult].text }}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"操作\" width=\"120\" v-if=\"!hideColumn.handle\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"handle\" @click=\"handleEdit(scope.row)\">\r\n\t\t\t\t\t\t\t\t\t\t<i class=\"iconfont icon-xiangqing\"></i>\r\n\t\t\t\t\t\t\t\t\t\t<span>详情</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t\t</el-table>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</CustomTable>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div v-if=\"total > pageSize && isPageShow\" class=\"page-box\">\r\n\t\t\t<Page\r\n\t\t\t\t:total=\"total\"\r\n\t\t\t\t:page-size=\"pageSize\"\r\n\t\t\t\t:current=\"currentPage\"\r\n\t\t\t\t@onChange=\"onChange\"\r\n\t\t\t\t@changePageSize=\"changePageSize\"\r\n\t\t\t\t:isPageSizeShow=\"true\"\r\n\t\t\t\t:isJumpShow=\"true\"\r\n\t\t\t\t:isTotalShow=\"true\"\r\n\t\t\t\t:perPage=\"15\"\r\n\t\t\t></Page>\r\n\t\t</div>\r\n\r\n\t\t<lawSuperviseDialog :regulatoryVisible.sync=\"regulatoryVisible\" :patrolRecordId=\"patrolRecordId\" :title=\"dialogTitle\" v-if=\"regulatoryVisible\"></lawSuperviseDialog>\r\n\r\n\t\t<RunBall :isRunBall=\"isRunBall\"></RunBall>\r\n\r\n\t\t<downloadModal :isShow.sync=\"isModalShow\"></downloadModal>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Nav from '@/components/common/nav.vue';\r\nimport Page from '@/components/common/page.vue';\r\nimport Loading from '@/components/common/loading.vue';\r\nimport CustomInput from '@/components/common/input.vue';\r\nimport CustomSelect from '@/components/common/select.vue';\r\nimport CustomTable from '@/components/common/table.vue';\r\nimport CustomDatePicker from '@/components/common/datePicker.vue';\r\nimport CustomTableSort from '@/components/common/custom-table-sort.vue';\r\nimport downloadModal from '@/components/common/download-modal.vue';\r\nimport RunBall from '@/components/common/run-ball.vue'; // 抛出动画\r\nimport {areaLevelCorAreaId} from '@/common/fn';\r\nimport {getStorage} from '@/utils/storage.js';\r\nimport {downloadExcel} from '@/utils/utils.js';\r\nimport filterArea from '@/common/config/filterArea.js';\r\n\r\nexport default {\r\n\tprops: {\r\n\t\tisHeaderShow: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\tisSearchShow: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\thideColumn: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn {};\r\n\t\t\t},\r\n\t\t},\r\n\t\tminWidth: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '1366px',\r\n\t\t},\r\n\t\tminHeight: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '696px',\r\n\t\t},\r\n\t\theight: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '100vh',\r\n\t\t},\r\n\t\tdefaultPageSize: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 15,\r\n\t\t},\r\n\t\tisPageShow: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\tfarmAreaInfo: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn areaLevelCorAreaId();\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tpageSize: 15,\r\n\t\t\ttotal: 1,\r\n\t\t\tkeyword: '',\r\n\t\t\tareaItem: {\r\n\t\t\t\tareaName: '全部区',\r\n\t\t\t\tid: '',\r\n\t\t\t},\r\n\t\t\tarea: [\r\n\t\t\t\t{\r\n\t\t\t\t\tareaName: '全部区',\r\n\t\t\t\t\tid: '',\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tdateValue: '',\r\n\t\t\tlawSuperviseList: [],\r\n\t\t\tcheckTypeMap: ['未知', '日常巡查', '三品一标'],\r\n\t\t\tcheckNameMap: [\r\n\t\t\t\t{\r\n\t\t\t\t\tindex: 100,\r\n\t\t\t\t\ttext: '全部考核结果',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tindex: 1,\r\n\t\t\t\t\ttext: '优',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tindex: 2,\r\n\t\t\t\t\ttext: '良',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tindex: 3,\r\n\t\t\t\t\ttext: '合格',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tindex: 4,\r\n\t\t\t\t\ttext: '不合格',\r\n\t\t\t\t},\r\n\t\t\t\t// {\r\n\t\t\t\t// \tindex: 0,\r\n\t\t\t\t// \ttext: '未知'\r\n\t\t\t\t// }\r\n\t\t\t], //['未知', '优', '良', '合格', '不合格'],\r\n\t\t\tcheckNameValue: 100,\r\n\t\t\ttableHeight: 0,\r\n\t\t\tsortDirection: 1,\r\n\t\t\tsortField: 0,\r\n\t\t\tdateDefaultSort: 'descending',\r\n\t\t\tpatrolValueDefaultSort: 'none',\r\n\t\t\tregulatoryVisible: false,\r\n\t\t\tpatrolRecordId: '',\r\n\t\t\tdialogTitle: '',\r\n\t\t\tloading: false,\r\n\t\t\texcelLoading: false,\r\n\t\t\tisModalShow: false,\r\n\t\t\tisRunBall: false,\r\n\t\t\tisAddNum: false,\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tif (JSON.stringify(this.$route.query) !== '{}') {\r\n\t\t\tthis.checkNameValue = this.$route.query.patrolResult ? parseInt(this.$route.query.patrolResult) : 100;\r\n\t\t\tthis.dateValue = {\r\n\t\t\t\tstartTime: this.$route.query.startTimeStr ? this.formatDate(parseInt(this.$route.query.startTimeStr), '-') : '',\r\n\t\t\t\tendTime: this.$route.query.endTimeStr ? this.formatDate(parseInt(this.$route.query.endTimeStr), '-') : '',\r\n\t\t\t};\r\n\t\t}\r\n\t\tthis.pageSize = this.defaultPageSize;\r\n\t\tthis.getLawSuperviseList();\r\n\t\tthis.getArea();\r\n\t},\r\n\tcomputed: {\r\n\t\tgetLevel() {\r\n\t\t\treturn getStorage('govGovernmentSubjectVO').subjectLevel === 2 && getStorage('govGovernmentSubjectVO').cityId === '310100';\r\n\t\t},\r\n\t},\r\n\tmounted() {\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tthis.tableHeight = this.$refs.listContent.offsetHeight;\r\n\t\t});\r\n\t\twindow.addEventListener('resize', this.resizeHandle, false);\r\n\t},\r\n\tmethods: {\r\n\t\tback() {\r\n\t\t\tvar tempPath = this.$route.path;\r\n\t\t\tthis.$router.go(-1);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (tempPath === this.$route.path) {\r\n\t\t\t\t\tthis.back();\r\n\t\t\t\t}\r\n\t\t\t}, 200);\r\n\t\t},\r\n\t\trowClick(row) {\r\n\t\t\t// 如果是详情弹框该事件可以点击\r\n\t\t\tif (this.isHeaderShow) return;\r\n\t\t\tthis.regulatoryVisible = true;\r\n\t\t\tthis.patrolRecordId = row.patrolRecordID;\r\n\t\t\tthis.dialogTitle = row.cname;\r\n\t\t},\r\n\t\tasync download() {\r\n\t\t\tif (!this.lawSuperviseList.length) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\tmessage: '暂无数据，无法导出',\r\n\t\t\t\t\tcenter: true,\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.excelLoading = true;\r\n\r\n\t\t\tconst defaultArea = areaLevelCorAreaId();\r\n\t\t\tconst userInfo = getStorage('govGovernmentUserVO');\r\n\r\n\t\t\tconst options = {\r\n\t\t\t\tfarmAreaId: this.areaItem.id ? [this.areaItem.id] : [defaultArea.farmAreaId],\r\n\t\t\t\tfarmAreaType: this.areaItem.level ? this.areaItem.level : defaultArea.farmAreaType,\r\n\t\t\t\tendTimeStr: this.dateValue.endTime ? this.dateValue.endTime : '',\r\n\t\t\t\tstartTimeStr: this.dateValue.startTime ? this.dateValue.startTime : '',\r\n\t\t\t\tkeyword: this.keyword ? this.keyword : null,\r\n\t\t\t\tpatrolResult: this.checkNameValue !== null && this.checkNameValue !== 100 ? this.checkNameValue : null,\r\n\t\t\t\tsortDirection: this.sortDirection,\r\n\t\t\t\tsortField: this.sortField,\r\n\t\t\t\tgovUserId: userInfo.id,\r\n\t\t\t};\r\n\r\n\t\t\tconst res = await this.$ajax.post(this.$api.downloadExcel.lawExportByAreatoTask, options);\r\n\t\t\tthis.excelLoading = false;\r\n\t\t\t// console.log('res=======>', res);\r\n\t\t\tif (res.data.respCode === 0) {\r\n\t\t\t\tif (this.isAddNum) {\r\n\t\t\t\t\tthis.isAddNum = false;\r\n\t\t\t\t}\r\n\t\t\t\tthis.isRunBall = true;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.isRunBall = false;\r\n\t\t\t\t\tthis.isAddNum = true;\r\n\t\t\t\t}, 800);\r\n\t\t\t}\r\n\t\t\tif (res.data.respCode === 300) {\r\n\t\t\t\tthis.isModalShow = true;\r\n\t\t\t}\r\n\t\t\t// this.excelLoading = true;\r\n\t\t\t// const defaultArea = areaLevelCorAreaId();\r\n\r\n\t\t\t// let filename = `执法监管信息（${this.formatDate(new Date().getTime(), '')}）`;\r\n\r\n\t\t\t// const res = await downloadExcel(\r\n\t\t\t// \t'/freetekApi/nongwei/gov/patrolRecord/listOnExportByArea',\r\n\t\t\t// \t{\r\n\t\t\t// \t\tfarmAreaId: this.areaItem.id ? [this.areaItem.id] : [defaultArea.farmAreaId],\r\n\t\t\t// \t\tfarmAreaType: this.areaItem.level ? this.areaItem.level : defaultArea.farmAreaType,\r\n\t\t\t// \t\tendTimeStr: this.dateValue.endTime ? this.dateValue.endTime : '',\r\n\t\t\t// \t\tstartTimeStr: this.dateValue.startTime ? this.dateValue.startTime : '',\r\n\t\t\t// \t\tkeyword: this.keyword ? this.keyword : null,\r\n\t\t\t// \t\tpatrolResult: this.checkNameValue !== null && this.checkNameValue !== 100 ? this.checkNameValue : null,\r\n\t\t\t// \t\tsortDirection: this.sortDirection,\r\n\t\t\t// \t\tsortField: this.sortField\r\n\t\t\t// \t},\r\n\t\t\t// \tfilename\r\n\t\t\t// );\r\n\t\t\t// if (res.msg === 'success') {\r\n\t\t\t// \tthis.$message({\r\n\t\t\t// \t\ttype: 'success',\r\n\t\t\t// \t\tmessage: '下载成功',\r\n\t\t\t// \t\tcenter: true\r\n\t\t\t// \t});\r\n\t\t\t// \tthis.excelLoading = false;\r\n\t\t\t// } else {\r\n\t\t\t// \tthis.excelLoading = false;\r\n\t\t\t// }\r\n\t\t},\r\n\t\tonChange(page) {\r\n\t\t\tthis.currentPage = page;\r\n\t\t\tthis.getLawSuperviseList();\r\n\t\t},\r\n\t\tchangePageSize(pageSize) {\r\n\t\t\tthis.pageSize = pageSize;\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getLawSuperviseList();\r\n\t\t},\r\n\t\tclickAndEnter() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getLawSuperviseList();\r\n\t\t},\r\n\t\tdateChange() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getLawSuperviseList();\r\n\t\t},\r\n\t\t// 考核结果筛选\r\n\t\tpatrolResultChange() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getLawSuperviseList();\r\n\t\t},\r\n\t\tsortChange(value) {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tif (value.prop === 'date') {\r\n\t\t\t\t// 清空其他的排序条件，排序只能一种条件在排序\r\n\t\t\t\tif (this.dateDefaultSort === 'none') {\r\n\t\t\t\t\t// 在同个排序中的初始化\r\n\t\t\t\t\tthis.patrolValueDefaultSort = 'none';\r\n\t\t\t\t\tthis.dateDefaultSort = 'descending';\r\n\t\t\t\t\tthis.sortField = 0;\r\n\t\t\t\t\tthis.sortDirection = 1;\r\n\t\t\t\t\tthis.getLawSuperviseList();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.sortField = 0;\r\n\t\t\t\tthis.sortDirection = value.order === 'descending' ? 1 : 0;\r\n\t\t\t}\r\n\t\t\tif (value.prop === 'patrolValue') {\r\n\t\t\t\tif (this.patrolValueDefaultSort === 'none') {\r\n\t\t\t\t\tthis.dateDefaultSort = 'none';\r\n\t\t\t\t\tthis.patrolValueDefaultSort = 'descending';\r\n\t\t\t\t\tthis.sortField = 1;\r\n\t\t\t\t\tthis.sortDirection = 1;\r\n\t\t\t\t\tthis.getLawSuperviseList();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.sortField = 1;\r\n\t\t\t\tthis.sortDirection = value.order === 'descending' ? 1 : 0;\r\n\t\t\t}\r\n\r\n\t\t\tthis.getLawSuperviseList();\r\n\t\t},\r\n\t\tareaChange() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getLawSuperviseList();\r\n\t\t},\r\n\t\thandleEdit(row) {\r\n\t\t\tthis.regulatoryVisible = true;\r\n\t\t\tthis.patrolRecordId = row.patrolRecordID;\r\n\t\t\tthis.dialogTitle = row.cname;\r\n\t\t},\r\n\t\tasync getLawSuperviseList() {\r\n\t\t\tthis.lawSuperviseList = [];\r\n\t\t\tthis.loading = true;\r\n\t\t\tconst defaultArea = areaLevelCorAreaId();\r\n\r\n\t\t\tif (!this.isHeaderShow && this.farmAreaInfo.farmAreaId) {\r\n\t\t\t\tthis.areaItem.id = this.farmAreaInfo.farmAreaId;\r\n\t\t\t\tthis.areaItem.level = this.farmAreaInfo.farmAreaType;\r\n\t\t\t}\r\n\r\n\t\t\tconst options = {\r\n\t\t\t\tfarmAreaId: this.areaItem.id ? [this.areaItem.id] : [defaultArea.farmAreaId],\r\n\t\t\t\tfarmAreaType: this.areaItem.level ? this.areaItem.level : defaultArea.farmAreaType,\r\n\t\t\t\tendTimeStr: this.dateValue.endTime ? this.dateValue.endTime : '',\r\n\t\t\t\tstartTimeStr: this.dateValue.startTime ? this.dateValue.startTime : '',\r\n\t\t\t\tkeyword: this.keyword ? this.keyword : null,\r\n\t\t\t\tpageNo: this.currentPage,\r\n\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\tpatrolResult: this.checkNameValue !== null && this.checkNameValue !== 100 ? this.checkNameValue : null,\r\n\t\t\t\tsortDirection: this.sortDirection,\r\n\t\t\t\tsortField: this.sortField,\r\n\t\t\t};\r\n\r\n\t\t\tconst res = await this.$ajax.post(this.$api.govPatrol.lawSuperviseList, options);\r\n\r\n\t\t\tif (res.data.respCode === 0) {\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t\tthis.lawSuperviseList = res.data.obj.list;\r\n\t\t\t\tthis.total = res.data.obj.totalCount;\r\n\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.tableHeight = this.$refs.listContent.offsetHeight;\r\n\t\t\t\t\tthis.backTop();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getArea() {\r\n\t\t\tconst res = await this.$ajax.post(this.$api.area.listByParentId, {\r\n\t\t\t\tparentId: getStorage('govGovernmentSubjectVO').cityId,\r\n\t\t\t});\r\n\t\t\tif (res.data.respCode === 0) {\r\n\t\t\t\tres.data.obj.list.forEach(ele => {\r\n\t\t\t\t\tlet temp = [];\r\n\t\t\t\t\t// 当行政区为上海时，过滤没有gis地图的区\r\n\t\t\t\t\tif (getStorage('govGovernmentSubjectVO').cityId === '310100') {\r\n\t\t\t\t\t\ttemp = filterArea.filterArea.filter(element => ele.id === element.id);\r\n\t\t\t\t\t\tif (temp.length) return;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.area.push(ele);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetColor(patrolResult) {\r\n\t\t\tswitch (patrolResult) {\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\treturn '#ABC0D2';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\treturn '#3CCA42';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\treturn '#CAD640';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\treturn '#CAA207';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\treturn '#FF5252';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\tformatDate(time, character) {\r\n\t\t\tconst date = new Date(time);\r\n\r\n\t\t\tconst YY = date.getFullYear() + character;\r\n\t\t\tconst MM = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + character;\r\n\t\t\tconst DD = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\r\n\r\n\t\t\treturn YY + MM + DD;\r\n\t\t},\r\n\t\tresizeHandle() {\r\n\t\t\tthis.tableHeight = this.$refs.listContent.offsetHeight;\r\n\t\t},\r\n\t\tbackTop() {\r\n\t\t\tdocument.querySelector('.el-table__body-wrapper').scrollTop = 0;\r\n\t\t},\r\n\t},\r\n\tdestroyed() {\r\n\t\twindow.removeEventListener('resize', this.resizeHandle, false);\r\n\t},\r\n\tcomponents: {\r\n\t\tNav,\r\n\t\tPage,\r\n\t\tLoading,\r\n\t\tCustomInput,\r\n\t\tCustomSelect,\r\n\t\tCustomTable,\r\n\t\tCustomDatePicker,\r\n\t\tCustomTableSort,\r\n\t\tlawSuperviseDialog: () => import('@/components/overview/law-supervise-dialog.vue'),\r\n\t\tdownloadModal,\r\n\t\tRunBall,\r\n\t},\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.law-supervise {\r\n\toverflow: hidden;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\theight: 100vh;\r\n\tmin-width: 1366px;\r\n\tmin-height: 696px;\r\n\tbox-sizing: border-box;\r\n\tbackground-color: #021220;\r\n\r\n\t.main {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t\toverflow: hidden;\r\n\r\n\t\t.search-box {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tpadding: 28px 50px 21px;\r\n\r\n\t\t\t.search-box-left {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t}\r\n\r\n\t\t\t.excel-box {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t.excel {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\twidth: 120px;\r\n\t\t\t\t\theight: 36px;\r\n\t\t\t\t\tmargin-left: 15px;\r\n\t\t\t\t\tborder: 1px solid #145763;\r\n\t\t\t\t\tborder-radius: 2px;\r\n\t\t\t\t\tbackground-color: #24969a;\r\n\t\t\t\t\tcolor: #d9e3ed;\r\n\t\t\t\t\tfont-size: 14px;\r\n\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.list-content {\r\n\t\t\tflex: 1;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\toverflow: hidden;\r\n\t\t}\r\n\t}\r\n\r\n\t.handle {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #20a8f8;\r\n\t\tcursor: pointer;\r\n\r\n\t\t.iconfont {\r\n\t\t\tfont-size: 23px;\r\n\t\t}\r\n\t}\r\n\r\n\t.text {\r\n\t\tcolor: #a1acb7;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\t.text-bold {\r\n\t\tcolor: #a1acb7;\r\n\t\tfont-weight: bold;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\t.patrol-text {\r\n\t\tfont-size: 18px;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t.value-text {\r\n\t\tcolor: #a1acb7;\r\n\t\tfont-weight: bold;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.page-box {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\t\talign-items: center;\r\n\t\theight: 88px;\r\n\t\tpadding: 0 40px;\r\n\t\tbackground: #021220;\r\n\t\tbox-shadow: 0px -3px 21px 0px rgba(4, 52, 82, 0.2);\r\n\t}\r\n\r\n\t.no-data {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t}\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\">\r\n.law-supervise > .el-loading-mask {\r\n\ti {\r\n\t\tcolor: #00e5ff;\r\n\t\tfont-size: 40px;\r\n\t}\r\n\tp {\r\n\t\tcolor: #00e5ff;\r\n\t\tline-height: 40px;\r\n\t\tfont-size: 18px;\r\n\t}\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/overview/lawSuperviseList.vue"],"mappings":"AAuKA","sourceRoot":""}
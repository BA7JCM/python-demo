webpackJsonp([77],{Fc84:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mOB5"),r=a("mYEk"),i=a("44dg"),o=a("ItLx"),s=a("8BiH"),l=a("yivU"),u=a("ae5q"),c=a("ikDy"),d=a("VCTt"),g=a("VKKs"),f=a("N/DY");function p(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function n(r,i){try{var o=t[r](i),s=o.value}catch(e){return void a(e)}if(!o.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}var h={data:function(){return{currentPage:1,pageSize:15,total:1,keyword:"",brandList:[],brandValue:"",brand:[{name:"全部品牌",id:""},{name:"公用品牌",id:1}],industryValue:"",industry:[{bizCategoryName:"全部行业",id:""}],area:[{areaName:"全部区",id:""}],areaItem:{areaName:"全部区",id:""},tableHeight:0,loading:!1,dataTargetFlag:"",excelLoading:!1,showDialog:!1,brandDetail:{},detailLoading:!1}},created:function(){this.getArea(),this.getBusinessCategory(),this.$route.query.areaId||this.getPpBrandList()},computed:{getLevel:function(){return 2===Object(g.b)("govGovernmentSubjectVO").subjectLevel&&"310100"===Object(g.b)("govGovernmentSubjectVO").cityId}},mounted:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.$refs.listContent.offsetHeight}),window.addEventListener("resize",this.resizeHandle,!1)},methods:{back:function(){this.$router.push("/home/farmProductBrand")},areaChange:function(){this.currentPage=1,this.getPpBrandList()},brandChange:function(){this.currentPage=1,this.getPpBrandList()},industryChange:function(){this.currentPage=1,this.getPpBrandList()},onChange:function(e){this.currentPage=e,this.getPpBrandList()},changePageSize:function(e){this.pageSize=e,this.currentPage=1,this.getPpBrandList()},clickAndEnter:function(){this.currentPage=1,this.getPpBrandList()},handleEdit:function(e){this.showDialog=!0,console.log(e),this.getBrandDetail(e.id)},getBrandDetail:function(e){var t=this;return p(regeneratorRuntime.mark(function a(){var n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.detailLoading=!0,a.next=3,t.$ajax.post(t.$api.brand.getPpBrand,{id:e});case 3:0===(n=a.sent).data.respCode&&(t.brandDetail=n.data.obj),t.detailLoading=!1;case 6:case"end":return a.stop()}},a,t)}))()},getPpBrandList:function(){var e=this;return p(regeneratorRuntime.mark(function t(){var a,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.brandList=[],e.loading=!0,a=Object(d.b)(),n={farmAreaId:e.areaItem.id?[e.areaItem.id]:[a.farmAreaId],farmAreaType:e.areaItem.level?e.areaItem.level:a.farmAreaType,keywords:e.keyword?e.keyword:"",pageNo:e.currentPage,pageSize:e.pageSize,businessCategoryId:e.industryValue?e.industryValue:null,shareFlag:e.brandValue?e.brandValue:null},t.next=6,e.$ajax.post(e.$api.brand.getPpBrandList,n);case 6:0===(r=t.sent).data.respCode?(e.brandList=r.data.obj.list,e.total=r.data.obj.totalCount,e.loading=!1,e.$nextTick(function(){e.tableHeight=e.$refs.listContent.offsetHeight,e.backTop()})):e.loading=!1;case 8:case"end":return t.stop()}},t,e)}))()},getBusinessCategory:function(){var e=this;return p(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$ajax.post(e.$api.produce.businessCategory,{});case 2:0===(a=t.sent).data.respCode&&a.data.obj.list.forEach(function(t){e.industry.push(t)});case 4:case"end":return t.stop()}},t,e)}))()},getArea:function(){var e=this;return p(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$ajax.post(e.$api.area.listByParentId,{parentId:Object(g.b)("govGovernmentSubjectVO").cityId});case 2:0===(a=t.sent).data.respCode&&(a.data.obj.list.forEach(function(t){"310100"===Object(g.b)("govGovernmentSubjectVO").cityId&&f.c.filterArea.filter(function(e){return t.id===e.id}).length||e.area.push(t)}),e.$route.query.areaId&&(e.areaItem=e.area.filter(function(t){return t.id===String(e.$route.query.areaId)})[0],e.getPpBrandList()));case 4:case"end":return t.stop()}},t,e)}))()},resizeHandle:function(){this.tableHeight=this.$refs.listContent.offsetHeight},backTop:function(){document.querySelector(".el-table__body-wrapper").scrollTop=0}},destroyed:function(){window.removeEventListener("resize",this.resizeHandle,!1)},components:{Nav:n.default,Page:r.default,Loading:i.default,CustomInput:o.default,CustomSelect:s.default,CustomTable:l.default,CustomTableSort:u.default,BrandDialog:c.default}},m=a("W5g0");var b=function(e){a("FpaD"),a("HwUs")},v=Object(m.a)(h,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"title",rawName:"v-title"},{name:"loading",rawName:"v-loading",value:e.excelLoading,expression:"excelLoading"}],staticClass:"farm-product-brand",attrs:{"data-title":"农产品品牌明细","element-loading-text":"数据导出中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)"}},[n("Nav",{attrs:{title:"农产品品牌明细",hasShadow:!0,backColor:"#B6CFDE"},on:{back:e.back}},[n("div",{staticStyle:{width:"246px"},attrs:{slot:"right"},slot:"right"})]),e._v(" "),n("div",{staticClass:"main"},[n("div",{staticClass:"search-box"},[n("div",{staticClass:"search-box-left"},[e.getLevel?n("CustomSelect",{attrs:{margin:"0 15px 0 0"}},[n("template",{slot:"select-container"},[n("el-select",{attrs:{placeholder:"全部品牌"},on:{change:e.brandChange},model:{value:e.brandValue,callback:function(t){e.brandValue=t},expression:"brandValue"}},e._l(e.brand,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],2):e._e(),e._v(" "),n("CustomSelect",{attrs:{margin:"0 15px 0 0"}},[n("template",{slot:"select-container"},[n("el-select",{attrs:{placeholder:"全部行业"},on:{change:e.industryChange},model:{value:e.industryValue,callback:function(t){e.industryValue=t},expression:"industryValue"}},e._l(e.industry,function(e){return n("el-option",{key:e.id,attrs:{label:e.bizCategoryName,value:e.id}})}),1)],1)],2),e._v(" "),e.getLevel?n("CustomSelect",{attrs:{margin:"0 15px 0 0"}},[n("template",{slot:"select-container"},[n("el-select",{attrs:{placeholder:"全部区","value-key":"id"},on:{change:e.areaChange},model:{value:e.areaItem,callback:function(t){e.areaItem=t},expression:"areaItem"}},e._l(e.area,function(e){return n("el-option",{key:e.id,attrs:{label:e.areaName,value:e}})}),1)],1)],2):e._e(),e._v(" "),n("CustomInput",{attrs:{iconfont:"el-icon-search",placeholder:"输入品牌名称搜索"},on:{clickAndEnter:e.clickAndEnter},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)]),e._v(" "),n("div",{ref:"listContent",staticClass:"list-content"},[n("CustomTable",[n("template",{slot:"table-container"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.brandList,fit:!0,height:e.tableHeight,lazy:!0}},[n("template",{slot:"empty"},[n("div",[n("Loading",{attrs:{show:e.loading,type:"element",theme:"loader-light"}}),e._v(" "),e.loading?e._e():n("div",{staticClass:"no-data"},[n("img",{attrs:{src:a("gtDs")}}),e._v(" "),n("span",[e._v("暂无数据")])])],1)]),e._v(" "),n("el-table-column",{attrs:{label:"品牌"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"text-bold"},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"text"},[e._v(e._s(t.row.shareFlag?"公用品牌":"--"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"行业"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"text"},[e._v(e._s(t.row.businessCategoryNickname?t.row.businessCategoryNickname:"--"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"区域"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"text"},[e._v(e._s(t.row.countyName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"申报单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"handle"},[n("span",{staticClass:"text"},[e._v(e._s(t.row.companyName))]),e._v(" "),n("span",{on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("详情")])])]}}])})],2)],1)],2)],1)]),e._v(" "),e.total>e.pageSize?n("div",{staticClass:"page-box"},[n("Page",{attrs:{total:e.total,"page-size":e.pageSize,current:e.currentPage,isPageSizeShow:!0,isJumpShow:!0,isTotalShow:!0,perPage:15},on:{onChange:e.onChange,changePageSize:e.changePageSize}})],1):e._e(),e._v(" "),e.showDialog?n("brand-dialog",{attrs:{showDialog:e.showDialog,data:e.brandDetail,loading:e.detailLoading},on:{"update:showDialog":function(t){e.showDialog=t},"update:show-dialog":function(t){e.showDialog=t}}}):e._e()],1)},[],!1,b,"data-v-276f1f46",null);t.default=v.exports},FpaD:function(e,t){},HwUs:function(e,t){}});
//# sourceMappingURL=77.9c540fda239ea2469a52.js.map
{"version":3,"file":"static/js/121.dfed76c6f2da6cc006e0.js","sources":["webpack:///src/components/vegetables/PriceTrend.vue"],"sourcesContent":["<template>\n\t<box-item title=\"田头价格监测\" position=\"left\" :loading=\"loading\">\n\t\t<div class=\"sub-title\" slot=\"subTitle\">\n\t\t\t<el-select v-model=\"priceType\" placeholder=\"请选择\" slot=\"subTitle\" class=\"vegetable-select\" filterable ref=\"priceType\" @change=\"selectPriceType\">\n\t\t\t\t<el-option v-for=\"(item, index) in priceTypeList\" :key=\"index\" :label=\"item.name\" :value=\"item.id\"> </el-option>\n\t\t\t</el-select>\n\n\t\t\t<el-select v-model=\"cropId\" placeholder=\"请选择\" slot=\"subTitle\" class=\"vegetable-select\" filterable ref=\"cropSearch\" @change=\"selectCrop\">\n\t\t\t\t<el-option v-for=\"(item, index) in vegetableVariety\" :key=\"index\" :label=\"item.crop\" :value=\"item.cropId\"> </el-option>\n\t\t\t</el-select>\n\t\t</div>\n\n\t\t<!-- 主区域 -->\n\t\t<div class=\"echart-container\" ref=\"EContainer\"></div>\n\t</box-item>\n</template>\n\n<script>\nimport BoxItem from '@/components/common/BoxItem';\nimport {dateFormat, getIntervalTime, maxDecimalPlaces, areaLevelCorAreaId} from '@/common/fn';\nimport {setStorage, getStorage} from '@/utils/storage';\n\n/* process date */\n// 今年的时间\nconst curYear = new Date().getFullYear();\nconst curMonth = new Date().getMonth();\nconst curYearList = getIntervalTime({\n\tstartTime: `${curYear}-01-01`,\n\thowMonth: curMonth\n});\n// 去年的时间\nconst prevYear = curYear - 1;\nconst prevYearList = getIntervalTime({\n\tstartTime: `${prevYear}-01-01`\n});\n\nconst xData = ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'];\n// echarts 超级变量含义 {a} series.name, {b} data.name {c} data.value {d} data%\nconst lineChartOption = {\n\ttitle: {\n\t\tshow: false,\n\t\ttext: '暂无数据',\n\t\ttextStyle: {\n\t\t\tfontSize: 12,\n\t\t\tcolor: '#6DC1CB'\n\t\t},\n\t\tleft: 'center',\n\t\ttop: 'center'\n\t},\n\tgrid: {\n\t\tshow: true,\n\t\tborderColor: '#0D394A',\n\t\tbottom: 30,\n\t\ttop: 40,\n\t\tright: 20\n\t\t// height: '65%'\n\t},\n\ttooltip: {\n\t\tshow: true,\n\t\ttrigger: 'axis',\n\t\tformatter(value) {\n\t\t\tconst s = value.map(item => {\n\t\t\t\treturn item.value !== null ? `${item.seriesName}：${maxDecimalPlaces({value: item.value})}元/公斤` : '';\n\t\t\t});\n\t\t\treturn `${value[0].axisValue}<br/>${s.join('<br />')}`;\n\t\t},\n\t\tbackgroundColor: '#043250',\n\t\tpadding: [13, 14, 13, 11],\n\t\ttextStyle: {\n\t\t\tfontSize: 12,\n\t\t\tcolor: '#9ED2D8'\n\t\t}\n\t},\n\tlegend: {\n\t\tshow: true,\n\t\ttype: 'plain',\n\t\ttextStyle: {\n\t\t\tcolor: '#6DC1CB',\n\t\t\tfontSize: 12\n\t\t},\n\t\tbackgroundColor: 'rgba(255, 255, 255, 0)',\n\t\ttop: 3,\n\t\tright: 10,\n\t\titemWidth: 30,\n\t\titemHeight: 10,\n\t\theight: 20,\n\t\tdata: [\n\t\t\t{\n\t\t\t\tname: `${new Date().getFullYear() - 1}年`,\n\t\t\t\ticon: `image://${require('images/prevYears.png')}`\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: `${new Date().getFullYear()}年`,\n\t\t\t\ticon: `image://${require('images/curYears.png')}`\n\t\t\t}\n\t\t]\n\t},\n\txAxis: {\n\t\tdata: xData,\n\t\tboundaryGap: false,\n\t\taxisLabel: {\n\t\t\ttextStyle: {\n\t\t\t\tcolor: '#6DC1CB',\n\t\t\t\tfontSize: 12\n\t\t\t},\n\t\t\talign: 'center'\n\t\t},\n\t\taxisTick: {\n\t\t\tshow: false\n\t\t},\n\t\taxisLine: {\n\t\t\tshow: true,\n\t\t\tlineStyle: {\n\t\t\t\t// color: '#0D394A'\n\t\t\t\tcolor: 'rgba(109,193,203,0.2)'\n\t\t\t}\n\t\t},\n\t\tz: 10\n\t},\n\tyAxis: {\n\t\tname: '(元/公斤)',\n\t\tnameTextStyle: {\n\t\t\tfontSize: 12,\n\t\t\tcolor: '#6DC1CB',\n\t\t\tpadding: [4, 8, 5, 10]\n\t\t},\n\t\taxisLine: {\n\t\t\tshow: false,\n\t\t\tlineStyle: {\n\t\t\t\tcolor: '#0D394A'\n\t\t\t}\n\t\t},\n\t\taxisTick: {\n\t\t\tshow: false\n\t\t},\n\t\tsplitLine: {\n\t\t\tshow: true,\n\t\t\tlineStyle: {\n\t\t\t\t// color: '#0D394A'\n\t\t\t\tcolor: 'rgba(109,193,203,0.2)'\n\t\t\t}\n\t\t},\n\t\taxisLabel: {\n\t\t\ttextStyle: {\n\t\t\t\tcolor: '#6DC1CB',\n\t\t\t\tfontSize: 12\n\t\t\t}\n\t\t}\n\t},\n\tseries: [\n\t\t{\n\t\t\tdata: [],\n\t\t\ttype: 'line',\n\t\t\tsmooth: true,\n\t\t\tsymbolSize: 0,\n\t\t\tareaStyle: {\n\t\t\t\tcolor: {\n\t\t\t\t\ttype: 'linear',\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0,\n\t\t\t\t\tx2: 0,\n\t\t\t\t\ty2: 1,\n\t\t\t\t\tcolorStops: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toffset: 0,\n\t\t\t\t\t\t\tcolor: 'rgba(0, 162, 255, 0.5)' // 0% 处的颜色\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toffset: 1,\n\t\t\t\t\t\t\tcolor: 'rgba(60, 105, 217, 0)' // 100% 处的颜色\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tglobal: false // 缺省为 false\n\t\t\t\t}\n\t\t\t},\n\t\t\tlineStyle: {\n\t\t\t\tcolor: '#00FFFF'\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tdata: [],\n\t\t\ttype: 'line',\n\t\t\tsmooth: true,\n\t\t\tsymbolSize: 0,\n\t\t\tareaStyle: {\n\t\t\t\tcolor: {\n\t\t\t\t\ttype: 'linear',\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0,\n\t\t\t\t\tx2: 0,\n\t\t\t\t\ty2: 1,\n\t\t\t\t\tcolorStops: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toffset: 0,\n\t\t\t\t\t\t\tcolor: 'rgba(212, 167, 84, 0.5)' // 0% 处的颜色\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toffset: 1,\n\t\t\t\t\t\t\tcolor: 'rgba(212, 167, 84, 0)' // 100% 处的颜色\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tglobal: false // 缺省为 false\n\t\t\t\t}\n\t\t\t},\n\t\t\tlineStyle: {\n\t\t\t\tcolor: '#D4A754'\n\t\t\t}\n\t\t}\n\t]\n};\nconst govGovernmentSubjectVO = getStorage('govGovernmentSubjectVO');\nconst vegetableVariety = getStorage('vegetableVariety');\n\n/*\n * 逻辑\n * 进入（以田头价为例）\n * 获取田头价的作物列表 -- 通过第一个作物获取今年和去年的价格趋势 -- 处理趋势数据渲染到echart\n * 选择\n * 选择作物价格类型 -- 根据价格类型获取相应的作物列表 --- 进入逻辑第二步\n * 选择作物 --- 根据作物id获取去年和今年的价格趋势 -- 处理数据渲染到echart\n *\n * */\nexport default {\n\tname: 'PriceTrend',\n\tprops: {\n\t\tfarmAreaInfo: {\n\t\t\ttype: Object,\n\t\t\tdefault() {\n\t\t\t\treturn areaLevelCorAreaId();\n\t\t\t}\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t// 价格走势chart\n\t\t\tchart: null,\n\t\t\t// loading\n\t\t\tloading: false,\n\t\t\t// 市场类型\n\t\t\tpriceType: 0,\n\t\t\t// 市场价格类型列表\n\t\t\tpriceTypeList: [\n\t\t\t\t{\n\t\t\t\t\tname: '田头价',\n\t\t\t\t\tid: 0\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: '批发价',\n\t\t\t\t\tid: 1\n\t\t\t\t}\n\t\t\t],\n\t\t\t// 蔬菜品种下拉框\n\t\t\tvegetableVariety: [],\n\t\t\t// 蔬菜品种下拉框默认值\n\t\t\tcropId: null\n\t\t};\n\t},\n\tcreated() {},\n\tmounted() {\n\t\tthis.initPage();\n\t\twindow.addEventListener('resize', this.resizeChart, false);\n\t},\n\tmethods: {\n\t\t// 获取 田头价作物列表\n\t\tgetTtjCropList() {\n\t\t\treturn this.$ajax\n\t\t\t\t.post(this.$api.operate.ttjCropList, {\n\t\t\t\t\tpageNo: 1,\n\t\t\t\t\tpageSize: 10000\n\t\t\t\t})\n\t\t\t\t.then(({data: res}) => {\n\t\t\t\t\tif (res.respCode === 0) {\n\t\t\t\t\t\treturn res.obj;\n\t\t\t\t\t}\n\t\t\t\t\tthrow new Error(res);\n\t\t\t\t})\n\t\t\t\t.catch(e => {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t\tthrow e;\n\t\t\t\t});\n\t\t},\n\t\t// 获取 批发价作物列表\n\t\tgetDefaultCropList() {\n\t\t\treturn this.$ajax\n\t\t\t\t.post(this.$api.market.cropList, {\n\t\t\t\t\tareaId: govGovernmentSubjectVO.provinceId,\n\t\t\t\t\tkeyword: '',\n\t\t\t\t\tpageNo: 1,\n\t\t\t\t\tpageSize: 10000\n\t\t\t\t})\n\t\t\t\t.then(({data: res}) => {\n\t\t\t\t\tif (res.respCode === 0) {\n\t\t\t\t\t\tsetStorage('cropTime', res.curDate);\n\t\t\t\t\t\treturn res.obj;\n\t\t\t\t\t}\n\t\t\t\t\tthrow new Error(res);\n\t\t\t\t})\n\t\t\t\t.catch(e => {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t\tthrow e;\n\t\t\t\t});\n\t\t},\n\t\t// 获取 田头价格走势\n\t\tgetCropPriceStatisticList() {\n\t\t\treturn this.$ajax\n\t\t\t\t.post(this.$api.operate.cropPriceStatisticList, {\n\t\t\t\t\tyearsList: [`${new Date().getFullYear()}`, `${new Date().getFullYear() - 1}`],\n\t\t\t\t\tcropId: this.cropId,\n\t\t\t\t\t// 省id\n\t\t\t\t\tprovinceId: govGovernmentSubjectVO.provinceId\n\t\t\t\t})\n\t\t\t\t.then(({data: res}) => {\n\t\t\t\t\tif (res.respCode === 0) {\n\t\t\t\t\t\treturn res.obj;\n\t\t\t\t\t}\n\t\t\t\t\tthrow new Error(res);\n\t\t\t\t})\n\t\t\t\t.catch(e => {\n\t\t\t\t\tthrow e;\n\t\t\t\t});\n\t\t},\n\t\t// 获取 批发价格走势(这个是两条并发)\n\t\tgetDefaultStatisticList() {\n\t\t\treturn this.$ajax\n\t\t\t\t.all([\n\t\t\t\t\tthis.$ajax.post(this.$api.market.cropPrice, {\n\t\t\t\t\t\tdateListStr: curYearList,\n\t\t\t\t\t\tnccropId: this.cropId,\n\t\t\t\t\t\tproviceId: govGovernmentSubjectVO.provinceId\n\t\t\t\t\t}),\n\t\t\t\t\tthis.$ajax.post(this.$api.market.cropPrice, {\n\t\t\t\t\t\tdateListStr: prevYearList,\n\t\t\t\t\t\tnccropId: this.cropId,\n\t\t\t\t\t\tproviceId: govGovernmentSubjectVO.provinceId\n\t\t\t\t\t})\n\t\t\t\t])\n\t\t\t\t.then(([curResponse, prevResponse]) => {\n\t\t\t\t\tif (curResponse.data.respCode === 0 || prevResponse.data.respCode === 0) {\n\t\t\t\t\t\treturn [{data: curResponse.data.obj}, {data: prevResponse.data.obj}];\n\t\t\t\t\t}\n\t\t\t\t\tthrow new Error([JSON.stringify(curResponse.data, null, '\\t'), JSON.stringify(prevResponse.data, null, '\\t')].join(','));\n\t\t\t\t})\n\t\t\t\t.catch(e => {\n\t\t\t\t\tthrow e;\n\t\t\t\t});\n\t\t},\n\n\t\t// 处理 批发价作物列表\n\t\tasync processDefaultCropList() {\n\t\t\tawait new Promise((resolve, reject) => {\n\t\t\t\tif (this.checkCropReload() && vegetableVariety && vegetableVariety.length) {\n\t\t\t\t\tthis.vegetableVariety = vegetableVariety.map(item => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tcrop: item.ncCropName,\n\t\t\t\t\t\t\tcropId: item.id\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.cropId = vegetableVariety[0].id;\n\t\t\t\t\t\treturn resolve();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\treject(e);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.getDefaultCropList()\n\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\tsetStorage('vegetableVariety', res.list);\n\t\t\t\t\t\t\tthis.vegetableVariety = res.list.map(item => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tcrop: item.ncCropName,\n\t\t\t\t\t\t\t\t\tcropId: item.id\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tthis.cropId = this.vegetableVariety[0].cropId;\n\t\t\t\t\t\t\t\treturn resolve();\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t\t\treject(e);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(e => {\n\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t\treject(e);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 处理 田头价作物列表\n\t\tasync processTtjCropList() {\n\t\t\ttry {\n\t\t\t\tconst res = await this.getTtjCropList();\n\t\t\t\tthis.vegetableVariety = res.list.map(item => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcrop: item.cropName,\n\t\t\t\t\t\tcropId: item.id\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tthis.cropId = this.vegetableVariety[0].cropId;\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(e);\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t},\n\t\t// 处理 批发价的数据\n\t\tasync processDefaultPriceList() {\n\t\t\ttry {\n\t\t\t\tconst res = await this.getDefaultStatisticList();\n\t\t\t\tconst curRes = res[0].data.map(info => info.price);\n\t\t\t\tconst prevRes = res[1].data.map(info => info.price);\n\t\t\t\treturn [curRes, prevRes];\n\t\t\t} catch (e) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t},\n\t\t// 处理 田头价的数据\n\t\tasync processTtjPriceList() {\n\t\t\ttry {\n\t\t\t\tconst res = await this.getCropPriceStatisticList();\n\t\t\t\tconst curRes = res[0].data.slice(0, 12).map(num => Number(num));\n\t\t\t\tconst prevRes = res[1].data.slice(0, 12).map(num => Number(num));\n\t\t\t\treturn [curRes, prevRes];\n\t\t\t} catch (e) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t},\n\n\t\t// 更新作物列表\n\t\tasync updateCropList() {\n\t\t\tthis.vegetableVariety = [];\n\t\t\tif (this.priceType) {\n\t\t\t\tawait this.processDefaultCropList();\n\t\t\t} else {\n\t\t\t\tawait this.processTtjCropList();\n\t\t\t}\n\t\t},\n\t\t// 更新作物价格趋势\n\t\tasync updateCropPrice() {\n\t\t\tthis.loading = true;\n\t\t\tawait this.updateChart();\n\t\t\tthis.loading = false;\n\t\t},\n\n\t\t// 渲染 echarts\n\t\tasync updateChart() {\n\t\t\ttry {\n\t\t\t\tlet priceList = null;\n\t\t\t\tif (this.priceType) {\n\t\t\t\t\tpriceList = await this.processDefaultPriceList();\n\t\t\t\t} else {\n\t\t\t\t\tpriceList = await this.processTtjPriceList();\n\t\t\t\t}\n\t\t\t\tconst [curRes, prevRes] = priceList;\n\n\t\t\t\tconst curTotal = curRes.reduce((total, value) => {\n\t\t\t\t\treturn total + value;\n\t\t\t\t});\n\n\t\t\t\tconst prevTotal = prevRes.reduce((total, value) => {\n\t\t\t\t\treturn total + value;\n\t\t\t\t});\n\n\t\t\t\tconst curYear = new Date().getFullYear();\n\t\t\t\t// 去年的时间\n\t\t\t\tconst prevYear = curYear - 1;\n\n\t\t\t\t// 是否有数据\n\t\t\t\tconst ownDataFlag = curTotal !== 0 || prevTotal !== 0;\n\n\t\t\t\tthis.chart.setOption({\n\t\t\t\t\ttooltip: {\n\t\t\t\t\t\tshow: ownDataFlag\n\t\t\t\t\t},\n\t\t\t\t\ttitle: {\n\t\t\t\t\t\tshow: !ownDataFlag\n\t\t\t\t\t},\n\t\t\t\t\tyAxis: {\n\t\t\t\t\t\tshow: true // !ownDataFlag\n\t\t\t\t\t},\n\t\t\t\t\txAxis: {\n\t\t\t\t\t\tshow: ownDataFlag\n\t\t\t\t\t},\n\t\t\t\t\tseries: ownDataFlag\n\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: dateFormat(`${prevYear}-01-01`, 'yyyy年'),\n\t\t\t\t\t\t\t\t\tdata: (() => {\n\t\t\t\t\t\t\t\t\t\treturn prevRes.map((value, index) => ({\n\t\t\t\t\t\t\t\t\t\t\tname: `${index + 1}月`,\n\t\t\t\t\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\t\t})(),\n\t\t\t\t\t\t\t\t\tsymbol: 'circle',\n\t\t\t\t\t\t\t\t\tsymbolSize: 2,\n\t\t\t\t\t\t\t\t\tcolor: '#00F6FF'\n\t\t\t\t\t\t\t\t\t// showAllSymbol: true\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: dateFormat(`${curYear}-01-01`, 'yyyy年'),\n\t\t\t\t\t\t\t\t\tdata: (() => {\n\t\t\t\t\t\t\t\t\t\treturn curRes.map((value, index) => ({\n\t\t\t\t\t\t\t\t\t\t\tname: `${index + 1}月`,\n\t\t\t\t\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\t\t})(),\n\t\t\t\t\t\t\t\t\tsymbol: 'circle',\n\t\t\t\t\t\t\t\t\tsymbolSize: 2,\n\t\t\t\t\t\t\t\t\tcolor: '#FBC02D'\n\t\t\t\t\t\t\t\t\t// showAllSymbol: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t  ]\n\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tdata: []\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tdata: []\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t  ]\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(e);\n\t\t\t}\n\t\t},\n\t\t// 页面初始化\n\t\tasync initPage() {\n\t\t\tthis.chart = this._initEcharts(this.eContainerRef, lineChartOption);\n\t\t\tawait this.updateCropList();\n\t\t\tthis.getDefaultStatisticList();\n\t\t\tthis.updateCropPrice();\n\t\t},\n\t\t// 选择价格类型\n\t\tasync selectPriceType() {\n\t\t\tawait this.updateCropList();\n\t\t\tthis.chart.setOption({\n\t\t\t\tseries: [\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: []\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: []\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\t\t\tthis.updateCropPrice();\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$refs.priceType.blur();\n\t\t\t});\n\t\t},\n\t\t// 选择作物\n\t\tselectCrop() {\n\t\t\tthis.chart.setOption({\n\t\t\t\tseries: [\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: []\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: []\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\t\t\tthis.updateCropPrice();\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$refs.cropSearch.blur();\n\t\t\t});\n\t\t},\n\n\t\t// 检测是否需要重新加载作物数据\n\t\tcheckCropReload() {\n\t\t\tlet cropTime = getStorage('cropTime');\n\t\t\tif (!cropTime) return true;\n\t\t\tcropTime = Number(cropTime);\n\t\t\tconst updateMonth = new Date(cropTime).getMonth();\n\t\t\tconst updateTime = new Date(cropTime).setMonth(updateMonth + 1, 1);\n\t\t\tconst curEarlyMonth = new Date().getTime();\n\t\t\treturn updateTime >= curEarlyMonth;\n\t\t},\n\t\t_initEcharts(el, option) {\n\t\t\tconst chart = this.$echarts.init(el);\n\t\t\tchart.setOption(option);\n\t\t\treturn chart;\n\t\t},\n\t\t// echart 重绘\n\t\tresizeChart() {\n\t\t\tif (this.chart) {\n\t\t\t\tthis.chart.resize();\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\teContainerRef() {\n\t\t\treturn this.$refs.EContainer;\n\t\t}\n\t},\n\tcomponents: {\n\t\tBoxItem\n\t}\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '~styles/selectSkin_default.scss';\n/deep/ .el-select {\n\t.el-input__inner {\n\t\twidth: 92px;\n\t\theight: 30px;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tpadding: 0 25px 0 10px;\n\t\t.el-input__suffix {\n\t\t\tright: 0;\n\t\t}\n\t\t&::-webkit-input-placeholder {\n\t\t\tcolor: rgba(39, 145, 149, 0.5);\n\t\t}\n\t\t&:-moz-placeholder {\n\t\t\t/* Mozilla Firefox 4 to 18 */\n\t\t\tcolor: rgba(39, 145, 149, 0.5);\n\t\t}\n\t\t&::-moz-placeholder {\n\t\t\t/* Mozilla Firefox 19+ */\n\t\t\tcolor: rgba(39, 145, 149, 0.5);\n\t\t}\n\t\t&:-ms-input-placeholder {\n\t\t\t/* Internet Explorer 10+ */\n\t\t\tcolor: rgba(39, 145, 149, 0.5);\n\t\t}\n\t}\n\t+ .el-select {\n\t\tmargin-left: 2px;\n\t}\n}\n\n.sub-title {\n\tposition: absolute;\n\ttop: 50%;\n\ttransform: translateY(-75%);\n\tright: 8px;\n}\n.echart-container {\n\theight: 100%;\n\twidth: 100%;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/vegetables/PriceTrend.vue"],"mappings":"AAwBA","sourceRoot":""}
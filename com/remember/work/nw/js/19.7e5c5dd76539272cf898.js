webpackJsonp([19],{E0p1:function(e,t){},IsR3:function(e,t){},YJ8t:function(t,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=a("xk5x"),s=a("VCTt");function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(r,s){try{var i=t[r](s),o=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}("next")})}}var o={name:"argi-materials-statistic-12",props:{farmAreaInfo:{type:Object,default:function(){return Object(s.b)()}}},data:function(){return{loading:!0,dataTime:new Date(Object(s.k)()).setDate(1),manureList:[],manureBs:null,pesticideList:[],pesticideBs:null,cancelAjaxFnContainer:[]}},mounted:function(){this.initMoudle()},methods:{initMoudle:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.stopPrevInitfn(),e.loading=!0,e.manureBs&&e.manureBs.scrollTo(0,0),e.manureBs&&e.manureBs.destroy(),e.pesticideBs&&e.pesticideBs.scrollTo(0,0),e.pesticideBs&&e.pesticideBs.destroy(),t.next=8,e.renderList(e.farmAreaInfo.farmAreaId,e.farmAreaInfo.farmAreaType);case 8:if(t.sent){t.next=12;break}return n(!1),t.abrupt("return");case 12:e.$nextTick(function(){e.manureBs=Object(s.a)(e.$refs.manureRef.$el),e.pesticideBs=Object(s.a)(e.$refs.pesticideRef.$el),e.loading=!1,setTimeout(function(){e.manureBs.refresh(),e.pesticideBs.refresh(),n(!0)},300)});case 13:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t,e)}))()},refreshRender:function(){var e=this;(this.manureBs||this.pesticideBs)&&this.$nextTick(function(){e.manureBs.refresh(),e.pesticideBs.refresh()})},stopPrevInitfn:function(){this.cancelAjaxFnContainer.length&&(this.cancelAjaxFnContainer.forEach(function(e){e("取消过期请求")}),this.cancelAjaxFnContainer.length=0)},getMissionInputList:function(t,n,a,r){var i=this,o=this.$ajax.CancelToken;return new Promise(function(c){i.$ajax.post(i.$api.inputs.getSpecies,{areaId:n,areaType:a,dateStr:Object(s.c)(i.dataTime,"yyyy-MM-dd"),inputType:t},{cancelToken:new o(function(e){r.push(e)})}).then(function(t){var n=t.data;0===n.respCode?c(n.obj):(c(null),console.log(new Error("农资使用统计error"),e))}).catch(function(e){console.log(new Error("农资使用统计error"),e)})})},renderList:function(e,t){var n=this;return i(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(){var a=i(regeneratorRuntime.mark(function a(r){var s,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.getMissionInputList(2,e,t,n.cancelAjaxFnContainer);case 2:if(s=a.sent){a.next=5;break}return a.abrupt("return",r(!1));case 5:return a.next=7,n.getMissionInputList(4,e,t,n.cancelAjaxFnContainer);case 7:if(i=a.sent){a.next=10;break}return a.abrupt("return",r(!1));case 10:n.cancelAjaxFnContainer.length=0,n.manureList=[],n.pesticideList=[],s&&s.flResNameVOS&&s.flResNameVOS.length&&(n.manureList=s.flResNameVOS.slice(0,20)),i&&i.nyResNameVOS&&i.nyResNameVOS.length&&(n.pesticideList=i.nyResNameVOS.slice(0,20)),r(!0);case 16:case"end":return a.stop()}},a,n)}));return function(e){return a.apply(this,arguments)}}()));case 1:case"end":return a.stop()}},a,n)}))()},switchTabs:function(e){var t=this;this.$nextTick(function(){t[e.name+"Bs"].refresh()})}},components:{areaPanel:r.default}},c=a("W5g0");var u=function(e){a("IsR3"),a("E0p1")},l=Object(c.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gov-area-panel"},[n("area-panel",{attrs:{"area-title":"农资使用统计"}},[n("div",{staticClass:"date-time head-sub-title",attrs:{slot:"subTitle"},slot:"subTitle"},[e._v(e._s(e._f("dateFormat")(e.dataTime,"yyyy年MM月")))]),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"panel-main-container",attrs:{slot:"panelMain","element-loading-spinner":"iconfont icon-loading1","element-loading-background":"rgba(0, 0, 0, 0.2)"},slot:"panelMain"},[n("el-tabs",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],attrs:{value:"manure"},on:{"tab-click":e.switchTabs}},[n("el-tab-pane",{ref:"manureRef",attrs:{label:"肥料",name:"manure"}},[e.manureList.length>0?n("ul",{staticClass:"goods-ul"},e._l(e.manureList,function(t,a){return n("li",{key:a,staticClass:"goods-item"},[n("p",{staticClass:"goods-name"},[n("span",{staticClass:"serial-number"},[e._v(e._s(a+1))]),e._v(" "),n("span",{staticClass:"g-name"},[e._v(e._s(t.resName))])]),e._v(" "),n("p",{staticClass:"goods-value"},[e._v(e._s(t.totalAmount)+e._s(t.totalAmountUnit))])])}),0):n("div",{staticClass:"no-data"},[e._v("暂无数据")])]),e._v(" "),n("el-tab-pane",{ref:"pesticideRef",attrs:{label:"农药",name:"pesticide"}},[e.pesticideList.length>0?n("ul",{staticClass:"goods-ul"},e._l(e.pesticideList,function(t,a){return n("li",{key:a,staticClass:"goods-item"},[n("p",{staticClass:"goods-name"},[n("span",{staticClass:"serial-number"},[e._v(e._s(a+1))]),e._v(" "),n("span",{staticClass:"g-name"},[e._v(e._s(t.resName))])]),e._v(" "),n("p",{staticClass:"goods-value"},[e._v(e._s(1e3*t.totalAmount)+"千克")])])}),0):n("div",{staticClass:"no-data"},[e._v("暂无数据")])])],1)],1)])],1)},[],!1,u,"data-v-017d1903",null);n.default=l.exports}});
//# sourceMappingURL=19.7e5c5dd76539272cf898.js.map
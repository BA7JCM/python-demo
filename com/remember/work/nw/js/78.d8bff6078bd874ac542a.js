webpackJsonp([78],{"9dcc":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABbUlEQVQ4jeWSsWsUURCHv90cKAfaJP4BXnlBSGFxvcIlBMtDuEJECKQTO2sLRRAkdlHsLYQ0ir0KXmWhCCqYkICNgs0J4kHyWdxbeNmbPVvBHwzszuz75vdmB/5fOauJOlLXVNS2elf9Gnx7p+K0atwHwOv0fALoA8+Aa8AG0AG2gN3szK15DofJTR631SN1rJ4N6q9yh2XG/A0sBL3uAQJPgb2gfhI4jIAfgPPBgR/AN+BTUDsFdIHPEfAh0zn1goOTINcC7gM/gZ08WekRcAF4CWwDowzUBs4Bg/R+BrgKLAOXgPFMuzTgUt1U36q/gvWo9F19onarn9MERF1UOynKlNtXb2ZNq/rpOrCscct05S8p1oPZrWf150H9mMPL6UpX1JU5DlfUG+nbXtOVS/V9WtT68ubAKhbUj+qLJuAgdbwYAB+r/SA/rFxWnCIDvgOWgOuNc5lVyXR/3xRFsVp3eDBnTf6m3bDdP6k/klbeiobwox4AAAAASUVORK5CYII="},Y6OB:function(t,e){},ji7R:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("VCTt"),r=a("VKKs");function n(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function s(r,n){try{var i=e[r](n),c=i.value}catch(t){return void a(t)}if(!i.done)return Promise.resolve(c).then(function(t){s("next",t)},function(t){s("throw",t)});t(c)}("next")})}}var i=Object(s.b)(),c=Object(r.b)("govGovernmentSubjectVO").groupFlag,o={data:function(){return{subjectsearch:"",landtypeList:[],subjectList:[],searchHasResult:!0,ploticon:a("9dcc"),tabindex:!0}},props:{farmactiveid:{default:"",type:String}},computed:{farmActiveId:{get:function(){return this.farmactiveid},set:function(t){this.$emit("update:farmactiveid",t)}}},watch:{subjectsearch:function(t){var e=this;this.searchHasResult=!1,this.subjectList.forEach(function(a){-1!==a.farmName.indexOf(t)?(a.nohas=!1,e.searchHasResult=!0):a.nohas=!0}),this.$nextTick(function(){$(e.$refs.companylist).getNiceScroll().resize()})},tabindex:function(t){var e=this;this.$nextTick(function(){t?($(e.$refs.landtypelist).getNiceScroll().show(),$(e.$refs.companylist).getNiceScroll().hide()):($(e.$refs.landtypelist).getNiceScroll().hide(),1===$(e.$refs.companylist).getNiceScroll().length?$(e.$refs.companylist).getNiceScroll().show():$(e.$refs.companylist).niceScroll({cursorcolor:"rgba(0, 247, 255 ,0.4)",cursorwidth:"3px",cursorborder:"",autohidemode:!0,railpadding:{top:0,right:8,left:0,bottom:0}}))})}},mounted:function(){var t=this;return n(regeneratorRuntime.mark(function e(){var a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0===c?t.getAreaLandTypeDistribution:t.getAllLandTypeList)();case 2:if(a=e.sent){e.next=5;break}return e.abrupt("return");case 5:return t.landtypeList=a.list,e.next=8,t.getFarmList();case 8:if(s=e.sent){e.next=11;break}return e.abrupt("return");case 11:t.subjectList=s.list,t.$nextTick(function(){$(t.$refs.landtypelist).niceScroll({cursorcolor:"rgba(0, 247, 255 ,0.4)",cursorwidth:"3px",cursorborder:"",autohidemode:!0,railpadding:{top:0,right:8,left:0,bottom:0}})});case 13:case"end":return e.stop()}},e,t)}))()},methods:{showFarmAllPlotfn:function(t,e){var a=this;return n(regeneratorRuntime.mark(function s(){var r,n;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a.farmActiveId=t,s.next=3,a.getFarmAllPlots(t);case 3:if(r=s.sent){s.next=6;break}return s.abrupt("return");case 6:a.$emit("getFarmAllPlotEv",[r.list,e]),n="",r.totalCount>0&&(n='<div class="plantinfot-item"><img src="'+a.ploticon+'" alt="">地块：'+r.totalCount+"个</div>",a.ploticon,r.totalCount),a.$emit("getFarmTitleEv",n);case 10:case"end":return s.stop()}},s,a)}))()},getFarmList:function(){var t=this,e=JSON.parse(localStorage.govGovernmentSubjectVO),a=e.subjectLevel,s=[e.provinceId,e.provinceId,e.cityId,e.countyId];return new Promise(function(r){t.$ajax.post(t.$api.operators.listByArea,{farmAreaId:[s[a]],farmAreaType:e.subjectLevel}).then(function(t){var e=t.status,a=t.data;200===e&&0===a.respCode&&r(a.obj),r(!1)})})},getFarmAllPlots:function(t){var e=this;return new Promise(function(a){e.$ajax.post(e.$api.operators.getFarmAllPoltIds,{farmId:t}).then(function(t){var e=t.status,s=t.data;200===e&&0===s.respCode&&a(s.obj),a(!1)})})},getAreaLandTypeDistribution:function(){return this.$ajax.post(this.$api.public.areaLandTypeDistribution,{farmAreaId:[i.farmAreaId],farmAreaType:i.farmAreaType}).then(function(t){var e=t.data;if(0===e.respCode)return e.obj}).catch(function(t){console.log(new Error("获取用地类型---非集团版本"),t)})},getAllLandTypeList:function(){var t=this;return new Promise(function(e){t.$ajax.post(t.$api.plotlist.landTypeDistributionlist,{}).then(function(t){var a=t.status,s=t.data;200===a&&0===s.respCode&&e(s.obj),e(!1)})})}}},l=a("W5g0");var u=function(t){a("Y6OB")},d=Object(l.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gis-company-list tabs-container"},[a("div",{staticClass:"tab-detail"},[a("h3",{staticClass:"title"},[a("span",{class:{active:t.tabindex},on:{click:function(){t.tabindex=!0}}},[t._v("土地类型")]),t._v(" "),a("span",{class:{active:!t.tabindex},on:{click:function(){t.tabindex=!1}}},[t._v("经营主体")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabindex,expression:"tabindex"}],staticClass:"list-detail"},[a("div",{ref:"landtypelist",staticClass:"list-items list-items-plus"},[t.landtypeList&&t.landtypeList.length>0?a("div",t._l(t.landtypeList,function(e,s){return a("div",{staticClass:"item itemplus"},[a("div",{staticClass:"nameplus"},[a("p",{staticClass:"pyc landname"},[a("i",{style:{"background-color":e.color}}),t._v(t._s(e.landType))]),t._v(" "),a("p",{staticClass:"pyc"},[t._v(t._s(e.landNum)+"个地块")])]),t._v(" "),a("span",{staticClass:"area"},[t._v(t._s(e.landAcre)+"亩")])])}),0):a("div",[a("p",{staticClass:"nodata"},[t._v("暂无土地类型")])])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.tabindex,expression:"!tabindex"}],staticClass:"list-detail"},[a("div",{staticClass:"list-search"},[a("label",{attrs:{for:"subjectSea"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.subjectsearch,expression:"subjectsearch"}],attrs:{id:"subjectSea",type:"text",placeholder:"搜索经营主体",autocomplete:"off"},domProps:{value:t.subjectsearch},on:{input:function(e){e.target.composing||(t.subjectsearch=e.target.value)}}})]),t._v(" "),a("div",{ref:"companylist",staticClass:"list-items"},[t.subjectList&&t.subjectList.length>0?a("div",[t._l(t.subjectList,function(e,s){return!e.nohas&&t.searchHasResult?a("div",{staticClass:"item",class:{active:e.farmId===t.farmActiveId}},[a("p",{staticClass:"name pyc",on:{click:function(a){return t.showFarmAllPlotfn(e.farmId,e.farmName)}}},[t._v(t._s(e.farmName))]),t._v(" "),a("span",{staticClass:"gosubject",attrs:{title:"查看地块"},on:{click:function(a){return t.showFarmAllPlotfn(e.farmId,e.farmName)}}}),t._v(" "),a("span",{staticClass:"gosubject-detail",attrs:{title:"进入基地"},on:{click:function(a){return t.$router.push({path:"/farmdetail/"+e.farmId})}}})]):t._e()}),t._v(" "),t.searchHasResult?t._e():a("p",{staticClass:"nodata"},[t._v("当前搜索无结果")])],2):a("div",[a("p",{staticClass:"nodata"},[t._v("暂无经营主体")])])])])])])},[],!1,u,"data-v-2055552f",null);e.default=d.exports}});
//# sourceMappingURL=78.d8bff6078bd874ac542a.js.map
{"version":3,"file":"static/js/88.6d87bb89501a7725d863.js","sources":["webpack:///src/components/common/regional-selector.vue"],"sourcesContent":["<template>\n\t<div class=\"area-selector\">\n\t\t<CustomSelect v-for=\"(arealist, index) in areaData\" clearable :key=\"index\" margin=\"0 15px 0 0\" theme=\"light\" v-if=\"arealist.childrens.length > 1\">\n\t\t\t<template slot=\"select-container\">\n\t\t\t\t<el-select v-model=\"arealist.selected\" :placeholder=\"arealist.placeholder\" :popper-class=\"selectStyle\">\n\t\t\t\t\t<el-option v-for=\"item in arealist.childrens\" :key=\"item.id\" :label=\"item.areaName || item.name\" :value=\"item.areaName || item.name\">\n\t\t\t\t\t\t<span @click=\"areaChangeHadner(item)\">{{ item.areaName || item.name }}</span>\n\t\t\t\t\t</el-option>\n\t\t\t\t</el-select>\n\t\t\t</template>\n\t\t</CustomSelect>\n\t</div>\n</template>\n<script>\nimport CustomSelect from '@/components/common/select.vue';\n\nexport default {\n\tprops: {\n\t\t// 当前监管地区的层级\n\t\tlevel: {\n\t\t\ttype: Number,\n\t\t\tdefault: 1\n\t\t},\n\t\tareaId: {\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tisShowTown: {\n\t\t\t// 是否显示街镇，村等级\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tselectStyle: {\n\t\t\ttype: String,\n\t\t\tdefault: 'custom-light'\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tareaData: [],\n\t\t\tareaValue: {},\n\t\t\tdefaultOption: [\n\t\t\t\t{\n\t\t\t\t\tplaceholder: '请选择省',\n\t\t\t\t\tchildrens: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tareaName: '全部省',\n\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\tlevel: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tselected: '',\n\t\t\t\t\tlevel: 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tplaceholder: '请选择市',\n\t\t\t\t\tchildrens: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tareaName: '全部市',\n\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\tlevel: 2\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tselected: '',\n\t\t\t\t\tlevel: 2\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tplaceholder: '请选择区/县',\n\t\t\t\t\tchildrens: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tareaName: '全部区/县',\n\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\tlevel: 3\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tselected: '',\n\t\t\t\t\tlevel: 3\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tplaceholder: '请选择街镇',\n\t\t\t\t\tchildrens: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tareaName: '全部街镇',\n\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\tlevel: 4\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tselected: '',\n\t\t\t\t\tlevel: 4\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tplaceholder: '请选择村',\n\t\t\t\t\tchildrens: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tareaName: '全部村',\n\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\tlevel: 5\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tselected: '',\n\t\t\t\t\tlevel: 5\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t},\n\tcreated() {},\n\tmounted() {\n\t\tthis.initDefaultSelect();\n\t\tthis.init();\n\t},\n\tmethods: {\n\t\tinitDefaultSelect() {\n\t\t\tvar lastLevel = this.isShowTown ? 2 : 4;\n\t\t\tthis.areaData = this.defaultOption.splice(this.level, lastLevel);\n\t\t\tconsole.log(this.areaData);\n\t\t},\n\t\tasync init() {\n\t\t\t// 获取当前监管下第一层级的地区初始数据\n\t\t\tif (this.level === 3) {\n\t\t\t\tconst res = await this.getLocalArea(this.areaId);\n\t\t\t\tthis.areaData[0].childrens.push(...res.obj.list);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst res = await this.getArea(this.areaId);\n\t\t\tthis.areaData[0].childrens.push(...res.obj.list);\n\t\t},\n\t\tasync areaChangeHadner(val) {\n\t\t\tconsole.log(val);\n\n\t\t\t//this.$emit('areaCilck', val);\n\t\t\t// 当前监管的区域层级\n\t\t\t//当前选中的是 当前列的全部选项 不需要加载下一级\n\t\t\tif (!val.id) {\n\t\t\t}\n\t\t\tif (this.level) {\n\t\t\t}\n\n\t\t\treturn;\n\t\t\tif (val.level === 2) {\n\t\t\t\tif (val.id) {\n\t\t\t\t\tthis.areaData[1].area = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tareaName: '全部区/县',\n\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\tlevel: 3\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t} else {\n\t\t\t\t\tthis.areaData[1].area = [];\n\t\t\t\t}\n\t\t\t\tlet res = await this.getArea(val.id);\n\t\t\t\tres.obj.list.forEach(element => {\n\t\t\t\t\tthis.areaData[1].area.push(element);\n\t\t\t\t});\n\t\t\t\t// 清空后面输入框内容\n\t\t\t\tfor (let i = 0; i < this.areaData.length; i++) {\n\t\t\t\t\tif (i !== 0) {\n\t\t\t\t\t\tthis.areaData[i].selected = '';\n\t\t\t\t\t\tthis.areaData[i + 1].area = [];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.isShowTown) {\n\t\t\t\tif (val.level === 3) {\n\t\t\t\t\tif (val.id) {\n\t\t\t\t\t\tthis.areaData[3 - level].area = [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tareaName: '全部街镇',\n\t\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\t\tlevel: 4\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.areaData[3 - level].area = [];\n\t\t\t\t\t}\n\t\t\t\t\tlet res = await this.getLocalArea(val.id);\n\t\t\t\t\tres.obj.list.forEach(element => {\n\t\t\t\t\t\tthis.areaData[3 - level].area.push(element);\n\t\t\t\t\t});\n\t\t\t\t\tfor (let i = 0; i < this.areaData.length; i++) {\n\t\t\t\t\t\tif (this.areaData[i].level !== 2 && this.areaData[i].level !== 3) {\n\t\t\t\t\t\t\tthis.areaData[i].selected = '';\n\t\t\t\t\t\t\tthis.areaData[i + 1].area = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (val.level === 4) {\n\t\t\t\t\tif (val.id) {\n\t\t\t\t\t\tthis.areaData[4 - level].area = [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tareaName: '全部村',\n\t\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\t\tlevel: 5\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.areaData[4 - level].area = [];\n\t\t\t\t\t}\n\t\t\t\t\tlet res = await this.getLocalArea(val.id);\n\t\t\t\t\tres.obj.list.forEach(element => {\n\t\t\t\t\t\tthis.areaData[4 - level].area.push(element);\n\t\t\t\t\t});\n\t\t\t\t\tfor (let i = 0; i < this.areaData.length; i++) {\n\t\t\t\t\t\tif (this.areaData[i].level !== 2 && this.areaData[i].level !== 3 && this.areaData[i].level !== 4) {\n\t\t\t\t\t\t\tthis.areaData[i].selected = '';\n\t\t\t\t\t\t\tthis.areaData[i + 1].area = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// 获取省市区列表\n\t\tgetArea(id) {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tthis.$ajax\n\t\t\t\t\t.post(this.$api.area.listByParentId, {\n\t\t\t\t\t\tparentId: id\n\t\t\t\t\t})\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tif (res.data.respCode === 0) {\n\t\t\t\t\t\t\tresolve(res.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t// 获取镇村列表\n\t\tgetLocalArea(id) {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tthis.$ajax\n\t\t\t\t\t.post(this.$api.area.LocalListByParentId, {\n\t\t\t\t\t\tparentId: id\n\t\t\t\t\t})\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tif (res.data.respCode === 0) {\n\t\t\t\t\t\t\tresolve(res.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\tcomponents: {\n\t\tCustomSelect\n\t}\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.area-selector {\n\tdisplay: flex;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/common/regional-selector.vue"],"mappings":"AAgBA","sourceRoot":""}
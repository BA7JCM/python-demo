{"version":3,"file":"static/js/131.ea99043d10fbd4a2c037.js","sources":["webpack:///src/components/farmdetail/cropLandListTabs.vue"],"sourcesContent":["<template>\n\t<div class=\"tabs-container fr landdrap\">\n\t\t<div class=\"tabs-wrap\">\n\t\t\t<el-tabs\n\t\t\t\tv-model=\"activeName\"\n\t\t\t\t@tab-click=\"\n\t\t\t\t\ttab => {\n\t\t\t\t\t\tinitListScrollfn(tab.index === '0');\n\t\t\t\t\t}\n\t\t\t\t\"\n\t\t\t>\n\t\t\t\t<el-tab-pane :label=\"`种养品种`\" name=\"种养品种\">\n\t\t\t\t\t<div class=\"tabitem\">\n\t\t\t\t\t\t<div class=\"plantlistcon\" ref=\"croplistref\">\n\t\t\t\t\t\t\t<ul v-if=\"cropList.length\">\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tclass=\"clearfix\"\n\t\t\t\t\t\t\t\t\t:class=\"{active: item.select}\"\n\t\t\t\t\t\t\t\t\tv-for=\"(item, index) in cropList\"\n\t\t\t\t\t\t\t\t\t:key=\"item.cropId\"\n\t\t\t\t\t\t\t\t\t:cropid=\"item.cropId\"\n\t\t\t\t\t\t\t\t\t@click=\"\n\t\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\t\tclickCropItemfn(item.landIdList, index);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div class=\"plantimg plant-pic\"><img :src=\"aliimgresizefn(item.imgUrl, 40, 40)\" alt=\"loading\" /></div>\n\t\t\t\t\t\t\t\t\t<div class=\"plantname\">{{ item.cropName }}</div>\n\t\t\t\t\t\t\t\t\t<div class=\"plot-area\">{{ item.allLandAcre }}亩</div>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t<ul v-else>\n\t\t\t\t\t\t\t\t<li class=\"clearfix noplant\">\n\t\t\t\t\t\t\t\t\t<p><img :src=\"allimg.imgb\" alt=\"\" /></p>\n\t\t\t\t\t\t\t\t\t<p>暂无种养品种</p>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</el-tab-pane>\n\t\t\t\t<el-tab-pane :label=\"`地块`\" name=\"地块\">\n\t\t\t\t\t<div class=\"tabitem\">\n\t\t\t\t\t\t<div class=\"arealistcon\" ref=\"arealistref\">\n\t\t\t\t\t\t\t<ul v-if=\"landList.length\">\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tclass=\"clearfix\"\n\t\t\t\t\t\t\t\t\t:class=\"{active: item.select, item_noarea: !item.path}\"\n\t\t\t\t\t\t\t\t\tv-for=\"(item, index) in landList\"\n\t\t\t\t\t\t\t\t\t:key=\"item.id\"\n\t\t\t\t\t\t\t\t\t:areaid=\"item.id\"\n\t\t\t\t\t\t\t\t\t@click=\"\n\t\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\t\tclickAreaItemfn(item.id, !item.path);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div class=\"areaimg\"><img :src=\"item.landTypeImgUrl\" alt=\"loading\" /></div>\n\t\t\t\t\t\t\t\t\t<div class=\"areaname\">\n\t\t\t\t\t\t\t\t\t\t{{ item.landName }}\n\t\t\t\t\t\t\t\t\t\t<span class=\"editarea\" title=\"未绘制轮廓\" v-if=\"!item.path\"><i></i></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"status plant\" :class=\"['plant_' + item.landStatus]\">{{ landStatusMap[item.landStatus] }}</div>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t<ul v-else>\n\t\t\t\t\t\t\t\t<li class=\"clearfix noarea\">\n\t\t\t\t\t\t\t\t\t<p><img :src=\"allimg.imgc\" alt=\"\" /></p>\n\t\t\t\t\t\t\t\t\t<p>尚未添加地块</p>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</el-tab-pane>\n\t\t\t</el-tabs>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport '../../assets/css/homemap.css';\nexport default {\n\tname: 'cropLandListTabs',\n\tdata() {\n\t\treturn {\n\t\t\tactiveName: '种养品种',\n\t\t\tallimg: {\n\t\t\t\timga: require('../../assets/images/farmmap/shouqi.png'),\n\t\t\t\timgb: require('../../assets/images/wuzuowu.png'),\n\t\t\t\timgc: require('../../assets/images/wudikuai.png'),\n\t\t\t\timgd: require('../../assets/images/farmmap/xiugengzhong.png'),\n\t\t\t\tlvseimg: require('../../assets/images/map/green-cert-icon.png')\n\t\t\t},\n\t\t\tlandStatusMap: ['-', '使用中', '闲置中'],\n\t\t\tprevclicktime: 0,\n\t\t\tisClickLandList: false //是否是 手动点击地块列表\n\t\t};\n\t},\n\tprops: {\n\t\tcropList: {\n\t\t\tdefault() {\n\t\t\t\treturn [];\n\t\t\t},\n\t\t\ttype: Array\n\t\t},\n\t\tlandList: {\n\t\t\tdefault() {\n\t\t\t\treturn [];\n\t\t\t},\n\t\t\ttype: Array\n\t\t}\n\t},\n\tcomputed: {},\n\tcreated() {},\n\tasync mounted() {\n\t\t//初始化 品种地块列表 scroll\n\t\tthis.initListScrollfn(true);\n\t},\n\tmethods: {\n\t\tinitListScrollfn(isfirst) {\n\t\t\tif (isfirst) {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t$(this.$refs.croplistref).niceScroll({\n\t\t\t\t\t\tcursorcolor: 'rgba(0, 247, 255 ,0.4)',\n\t\t\t\t\t\tcursorwidth: '3px',\n\t\t\t\t\t\tcursorborder: '',\n\t\t\t\t\t\tautohidemode: true,\n\t\t\t\t\t\tsmoothscroll: false,\n\t\t\t\t\t\trailpadding: {top: 0, right: -10, left: 0, bottom: 0}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t$(this.$refs.arealistref).niceScroll({\n\t\t\t\t\t\tcursorcolor: 'rgba(0, 247, 255 ,0.4)',\n\t\t\t\t\t\tcursorwidth: '3px',\n\t\t\t\t\t\tcursorborder: '',\n\t\t\t\t\t\tautohidemode: true,\n\t\t\t\t\t\tsmoothscroll: false,\n\t\t\t\t\t\trailpadding: {top: 0, right: -10, left: 0, bottom: 0}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tclickCropItemfn(arealist = [], index) {\n\t\t\t// 防止频繁触发\n\t\t\tvar canClick = this.preventFastClicks();\n\t\t\tif (!canClick) return;\n\t\t\tvar hasarea = false;\n\t\t\tfor (var i = 0; i < arealist.length; i++) {\n\t\t\t\tfor (var j = 0; j < this.$parent.allpolygon.length; j++) {\n\t\t\t\t\tif (this.$parent.allpolygon[j].areaid == arealist[i]) {\n\t\t\t\t\t\thasarea = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\twindow.layer.closeAll('page');\n\t\t\tthis.$parent.plotdialogVisible = false;\n\t\t\tif (arealist && arealist.length >= 1 && hasarea) {\n\t\t\t\tthis.$parent.isclickarea = false;\n\t\t\t\tthis.$parent.syncAreaSelectfn(arealist, false);\n\t\t\t\tthis.selectCropAreaList(index, false);\n\t\t\t} else {\n\t\t\t\tthis.$parent.syncAreaSelectfn([], false);\n\t\t\t\tthis.$message('该品种的地块未绘制轮廓，无法在地图中查看');\n\t\t\t}\n\t\t},\n\t\tclickAreaItemfn(areaid, noDrawArea = false) {\n\t\t\t// 防止频繁触发\n\t\t\tvar canClick = this.preventFastClicks();\n\t\t\tif (!canClick) return;\n\t\t\tif (noDrawArea) {\n\t\t\t\tthis.$parent.isclickarea = true;\n\t\t\t\tthis.$parent.syncAreaSelectfn([], false);\n\t\t\t\tthis.$message('该地块未绘制轮廓，无法在地图中查看');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.isClickLandList = true;\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.isClickLandList = false;\n\t\t\t});\n\t\t\tthis.selectCropAreaList(areaid, true);\n\t\t\tthis.$parent.syncAreaSelectfn([areaid], true);\n\t\t},\n\t\tselectCropAreaList(index = -1, isArea = false) {\n\t\t\tthis.cropList.map(item => (item.select = false));\n\t\t\tthis.landList.map(item => (item.select = false));\n\t\t\tif (isArea) {\n\t\t\t\tthis.activeName = '地块';\n\t\t\t\tthis.initListScrollfn(false);\n\t\t\t}\n\t\t\tif (index === -1) return;\n\t\t\tif (isArea) {\n\t\t\t\tthis.landList.map(item => {\n\t\t\t\t\tif (item.id === index) {\n\t\t\t\t\t\tif (!!item.path) {\n\t\t\t\t\t\t\titem['select'] = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.$message('该地块未绘制轮廓，无法在地图中查看');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.cropList[index]['select'] = true;\n\t\t\t}\n\t\t},\n\t\tpreventFastClicks() {\n\t\t\t// 防止频繁触发\n\t\t\tvar canClick = false;\n\t\t\tvar nowtime = Date.parse(new Date());\n\t\t\tif (this.prevclicktime && nowtime < this.prevclicktime + 500) {\n\t\t\t\tcanClick = false;\n\t\t\t} else {\n\t\t\t\tcanClick = true;\n\t\t\t\tthis.prevclicktime = Date.parse(new Date());\n\t\t\t}\n\t\t\treturn canClick;\n\t\t}\n\t},\n\twatch: {\n\t\tlandList: {\n\t\t\thandler() {\n\t\t\t\tvar index = -1;\n\t\t\t\tthis.landList.map((item, i) => {\n\t\t\t\t\tif (item.select) {\n\t\t\t\t\t\tindex = i;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (this.isClickLandList) return;\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tvar top = (index - 3) * 60;\n\t\t\t\t\ttop = top < 0 ? 0 : top;\n\t\t\t\t\tthis.initListScrollfn(false);\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t$(this.$refs.arealistref)\n\t\t\t\t\t\t\t.getNiceScroll(0)\n\t\t\t\t\t\t\t.doScrollTop(top, 100);\n\t\t\t\t\t}, 200);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t}\n};\n</script>\n<style scoped lang=\"scss\">\n@import '~styles/tabsSkin_default';\n@keyframes showani {\n\t0% {\n\t\topacity: 0;\n\t\ttop: calc(50vh - 169px);\n\t}\n\t100% {\n\t\topacity: 1;\n\t\ttop: calc(50vh - 269px);\n\t}\n}\n.tabs-container.landdrap {\n\tposition: absolute;\n\tright: 0;\n\ttop: calc(50vh - 269px);\n\tmargin-top: 0;\n\tmargin-right: 2px;\n\topacity: 0;\n\tanimation: showani 0.5s 0.3s;\n\tanimation-fill-mode: forwards;\n}\n#tab-draplist,\n#tab-landlist {\n\tpadding: 0 5px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/farmdetail/cropLandListTabs.vue"],"mappings":"AAiFA","sourceRoot":""}
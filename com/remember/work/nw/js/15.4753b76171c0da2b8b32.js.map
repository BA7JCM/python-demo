{"version":3,"file":"static/js/15.4753b76171c0da2b8b32.js","sources":["webpack:///src/pages/overview/operateSubjectList.vue"],"sourcesContent":["<template>\r\n\t<div\r\n\t\tclass=\"operate-subject\"\r\n\t\tv-title\r\n\t\t:data-title=\"isHeaderShow ? '经营主体明细' : '农业总览'\"\r\n\t\tv-loading=\"excelLoading\"\r\n\t\telement-loading-text=\"数据导出中...\"\r\n\t\telement-loading-spinner=\"el-icon-loading\"\r\n\t\telement-loading-background=\"rgba(0, 0, 0, 0.5)\"\r\n\t\t:style=\"{minWidth: minWidth, height: height, minHeight: minHeight}\"\r\n\t>\r\n\t\t<Nav @back=\"back\" title=\"经营主体明细\" :hasShadow=\"true\" backColor=\"#B6CFDE\" v-if=\"isHeaderShow\" paddingRight=\"13px\" :isUserCenter=\"true\" :isAddNum=\"isAddNum\">\r\n\t\t\t<!-- <template slot=\"center\" v-if=\"dataTargetFlag\">\r\n\t\t\t\t<div class=\"nav-tab\">\r\n\t\t\t\t\t<div v-for=\"item in tabs\" class=\"tab-item\" :class=\"{'tab-active': item.index === tabCurrent}\" @click=\"tabChange(item)\">\r\n\t\t\t\t\t\t<span class=\"tab-title\">{{ item.title }}</span>\r\n\t\t\t\t\t\t<span class=\"tab-underline\"></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</template> -->\r\n\t\t\t<!-- <div slot=\"right\" style=\"width: 246px\"> -->\r\n\t\t\t<!-- 布局占位 -->\r\n\t\t\t<!-- </div> -->\r\n\t\t</Nav>\r\n\r\n\t\t<div class=\"main\">\r\n\t\t\t<div class=\"search-box\" v-if=\"isSearchShow\">\r\n\t\t\t\t<div class=\"search-box-left\">\r\n\t\t\t\t\t<CustomSelect margin=\"0 15px 0 0\" v-if=\"dataTargetFlag\">\r\n\t\t\t\t\t\t<template slot=\"select-container\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"tabCurrent\" placeholder=\"选择经营主体\" @change=\"tabChange\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in tabs\" :key=\"item.index\" :label=\"item.title\" :value=\"item.index\"></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</CustomSelect>\r\n\r\n\t\t\t\t\t<CustomSelect margin=\"0 15px 0 0\">\r\n\t\t\t\t\t\t<template slot=\"select-container\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"companyCategory\" placeholder=\"选择主体类型\" @change=\"companyChange\" v-show=\"tabCurrent === 0\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in companyCategoryList\" :key=\"item.id\" :label=\"item.companyCategoryName\" :value=\"item.id\"> </el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</CustomSelect>\r\n\r\n\t\t\t\t\t<CustomSelect margin=\"0 15px 0 0\" v-show=\"tabCurrent === 0\">\r\n\t\t\t\t\t\t<template slot=\"select-container\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"businessCategory\" placeholder=\"选择经营类目\" @change=\"businessChange\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in businessCategoryList\" :key=\"item.id\" :label=\"item.bizCategoryName\" :value=\"item.id\"> </el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</CustomSelect>\r\n\r\n\t\t\t\t\t<!-- 神农口袋区域选择 -->\r\n\t\t\t\t\t<CustomAreaSelect @areaCilck=\"areaCilck\" :level=\"level\" :areaId=\"startId\" v-if=\"tabCurrent === 0\"></CustomAreaSelect>\r\n\r\n\t\t\t\t\t<!-- 种植业系统区域选择 -->\r\n\t\t\t\t\t<CustomSelect margin=\"0 15px 0 0\" v-show=\"tabCurrent === 1\">\r\n\t\t\t\t\t\t<template slot=\"select-container\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"zzCompanyCategory\" placeholder=\"选择主体类型\" @change=\"zzCompanyChange\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in zzCompanyCategoryList\" :key=\"item.id\" :label=\"item.companyCategoryName\" :value=\"item.id\"> </el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</CustomSelect>\r\n\r\n\t\t\t\t\t<CustomSelect margin=\"0 15px 0 0\" v-if=\"tabCurrent === 1 && getLevel\">\r\n\t\t\t\t\t\t<template slot=\"select-container\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"zzAreaValue\" placeholder=\"全部区\" value-key=\"id\" @change=\"areaChange\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in zzArea\" :key=\"item.id\" :label=\"item.areaName\" :value=\"item\">\r\n\t\t\t\t\t\t\t\t\t<!-- <span @click=\"areaChange(item)\">{{ item.areaName }}</span> -->\r\n\t\t\t\t\t\t\t\t</el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</CustomSelect>\r\n\r\n\t\t\t\t\t<CustomSelect margin=\"0 15px 0 0\" v-show=\"tabCurrent === 1\">\r\n\t\t\t\t\t\t<template slot=\"select-container\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"aboveAcre\" placeholder=\"选择上图面积\" @change=\"aboveAcreChange\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in aboveAcreList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"> </el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</CustomSelect>\r\n\r\n\t\t\t\t\t<CustomInput iconfont=\"el-icon-search\" placeholder=\"输入经营主体名称搜索\" v-model=\"keyword\" @clickAndEnter=\"clickAndEnter\"></CustomInput>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"excel-box\">\r\n\t\t\t\t\t<div class=\"excel\" @click=\"download\">\r\n\t\t\t\t\t\t<img src=\"../../assets/images/table/bg-excel-icon.png\" />\r\n\t\t\t\t\t\t<span style=\"margin-left: 9px\">导出EXCEL</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"list-content\" ref=\"listContent\">\r\n\t\t\t\t<!-- <Loading :show=\"true\" type=\"element\"></Loading> -->\r\n\t\t\t\t<CustomTable v-show=\"tabCurrent === 0\">\r\n\t\t\t\t\t<template slot=\"table-container\">\r\n\t\t\t\t\t\t<el-table :data=\"businessList\" style=\"width: 100%\" :height=\"tableHeight\" @row-click=\"rowClick\">\r\n\t\t\t\t\t\t\t<template slot=\"empty\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Loading :show=\"loading\" type=\"element\" theme=\"loader-light\"></Loading>\r\n\t\t\t\t\t\t\t\t\t<div class=\"no-data\" v-if=\"!loading\">\r\n\t\t\t\t\t\t\t\t\t\t<img src=\"../../assets/images/table/bg-table-no-data.png\" />\r\n\t\t\t\t\t\t\t\t\t\t<span>暂无数据</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<el-table-column label=\"经营主体名称\" width=\"250\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text-bold\">{{ scope.row.farmName }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"主体类型\" v-if=\"!hideColumn.companyCategoryName\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ scope.row.companyCategoryName ? scope.row.companyCategoryName : '--' }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column width=\"180\" v-if=\"!hideColumn.companyCategoryIdentifier\">\r\n\t\t\t\t\t\t\t\t<template slot=\"header\" slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span>主体唯一标识</span>\r\n\t\t\t\t\t\t\t\t\t<!-- popper-class=\"custom-tooltip-light\" 白色主题 -->\r\n\t\t\t\t\t\t\t\t\t<el-tooltip class=\"item\" effect=\"dark\" content=\"企业的统一社会信用代码或者农户的身份证号\" popper-class=\"custom-tooltip-dark\" placement=\"top\" @click=\"buttonClick\">\r\n\t\t\t\t\t\t\t\t\t\t<i class=\"iconfont icon-wenhao4\" style=\"cursor: pointer\"></i>\r\n\t\t\t\t\t\t\t\t\t</el-tooltip>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ scope.row.companyCategoryIdentifier ? scope.row.companyCategoryIdentifier : '--' }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"所在地\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ spliceAreaName(scope.row) ? spliceAreaName(scope.row) : '--' }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"经营类目\" v-if=\"!hideColumn.bizCategoryName\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ scope.row.bizCategoryName ? scope.row.bizCategoryName : '--' }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<!-- 土地流转面积（地块面积） -->\r\n\t\t\t\t\t\t\t<el-table-column width=\"200\" v-if=\"!hideColumn.farmAcre\">\r\n\t\t\t\t\t\t\t\t<template slot=\"header\" slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<CustomTableSort title=\"土地流转面积（亩）\" :defaultSort=\"farmAcreDefaultSort\" prop=\"farmAcre\" @sortChange=\"sortChange\"></CustomTableSort>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"value-text\">{{ scope.row.farmAcre === 0 ? 0 : scope.row.farmAcre ? scope.row.farmAcre : '--' }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<!-- <el-table-column width=\"240\">\r\n\t\t\t\t\t\t\t\t<template slot=\"header\" slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<CustomTableSort title=\"可种植/养殖面积（亩）\" :defaultSort=\"landAcresDefaultSort\" prop=\"landAcres\" @sortChange=\"sortChange\"></CustomTableSort>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"value-text\">{{ scope.row.landAcres === 0 ? 0 : scope.row.landAcres ? scope.row.landAcres : 0 }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column> -->\r\n\r\n\t\t\t\t\t\t\t<!-- 入网面积（上图面积） -->\r\n\t\t\t\t\t\t\t<el-table-column width=\"180\" v-if=\"gisMapFlag && !hideColumn.aboveAcre\" label=\"入网面积（亩）\">\r\n\t\t\t\t\t\t\t\t<template slot=\"header\" slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<CustomTableSort title=\"入网面积（亩）\" :defaultSort=\"aboveAcreDefaultSort\" prop=\"aboveAcre\" @sortChange=\"sortChange\"></CustomTableSort>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"value-text\">{{ scope.row.aboveAcre === 0 ? 0 : scope.row.aboveAcre ? scope.row.aboveAcre : 0 }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column width=\"180\">\r\n\t\t\t\t\t\t\t\t<template slot=\"header\" slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<CustomTableSort title=\"在田面积（亩）\" :defaultSort=\"plantingDefaultSort\" prop=\"planting\" @sortChange=\"sortChange\"></CustomTableSort>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"value-text\">{{ scope.row.allLandArceOnPlanting === 0 ? 0 : scope.row.allLandArceOnPlanting ? scope.row.allLandArceOnPlanting : 0 }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"联系人\" v-if=\"!hideColumn.legalPerson\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ scope.row.legalPerson ? scope.row.legalPerson : '--' }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"联系方式\" v-if=\"!hideColumn.legalPersonPhone\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ scope.row.legalPersonPhone ? scope.row.legalPersonPhone : '--' }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"操作\" width=\"120\" v-if=\"!hideColumn.handle\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"handle\" @click=\"handleEdit(scope.row)\">\r\n\t\t\t\t\t\t\t\t\t\t<i class=\"iconfont icon-xiangqing\"></i>\r\n\t\t\t\t\t\t\t\t\t\t<span>详情</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t\t</el-table>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</CustomTable>\r\n\t\t\t\t<!-- 种植业系统 -->\r\n\t\t\t\t<CustomTable v-show=\"tabCurrent === 1\">\r\n\t\t\t\t\t<template slot=\"table-container\">\r\n\t\t\t\t\t\t<el-table :data=\"businessList1\" style=\"width: 100%\" :height=\"tableHeight\">\r\n\t\t\t\t\t\t\t<template slot=\"empty\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Loading :show=\"loading\" type=\"element\" theme=\"loader-light\"></Loading>\r\n\t\t\t\t\t\t\t\t\t<div class=\"no-data\" v-if=\"!loading\">\r\n\t\t\t\t\t\t\t\t\t\t<img src=\"../../assets/images/table/bg-table-no-data.png\" />\r\n\t\t\t\t\t\t\t\t\t\t<span>暂无数据</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<el-table-column label=\"经营主体名称\" width=\"250\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text-bold\">{{ scope.row.name }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"主体类型\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ scope.row.type ? scope.row.type : '--' }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column width=\"220\">\r\n\t\t\t\t\t\t\t\t<template slot=\"header\" slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span>主体唯一标识</span>\r\n\t\t\t\t\t\t\t\t\t<el-tooltip class=\"item\" effect=\"dark\" content=\"企业的统一社会信用代码或者农户的身份证号\" placement=\"top\" popper-class=\"custom-tooltip-dark\" @click=\"buttonClick\">\r\n\t\t\t\t\t\t\t\t\t\t<i class=\"iconfont icon-wenhao4\" style=\"cursor: pointer\"></i>\r\n\t\t\t\t\t\t\t\t\t</el-tooltip>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ scope.row.creditCode ? scope.row.creditCode : '--' }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"所在地\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ scope.row.qu ? scope.row.qu : '--' }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<!-- 土地流转面积（农场面积） -->\r\n\t\t\t\t\t\t\t<el-table-column width=\"200\">\r\n\t\t\t\t\t\t\t\t<template slot=\"header\" slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<CustomTableSort title=\"土地流转面积（亩）\" :defaultSort=\"farmAcreDefaultSort\" prop=\"farmAcre\" @sortChange=\"sortChange\"></CustomTableSort>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"value-text\">{{ scope.row.plotarea === 0 ? 0 : scope.row.plotarea ? scope.row.plotarea : '--' }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<!-- <el-table-column width=\"180\">\r\n\t\t\t\t\t\t\t\t<template slot=\"header\" slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<CustomTableSort title=\"可种植面积（亩）\" :defaultSort=\"landAcresDefaultSort\" prop=\"landAcres\" @sortChange=\"sortChange\"></CustomTableSort>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"value-text\">{{ scope.row.plotAreas === 0 ? 0 : scope.row.plotAreas ? scope.row.plotAreas : 0 }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column> -->\r\n\r\n\t\t\t\t\t\t\t<!-- 入网面积（上图面积） -->\r\n\t\t\t\t\t\t\t<el-table-column width=\"180\" v-if=\"gisMapFlag\" label=\"入网面积（亩）\">\r\n\t\t\t\t\t\t\t\t<!-- <template slot=\"header\" slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<CustomTableSort title=\"入网面积（亩）\" :defaultSort=\"aboveAcreDefaultSort\" prop=\"aboveAcre\" @sortChange=\"sortChange\"></CustomTableSort>\r\n\t\t\t\t\t\t\t\t</template> -->\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"value-text\">{{ scope.row.aboveAcre === 0 ? 0 : scope.row.aboveAcre ? scope.row.aboveAcre : 0 }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"联系人\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ scope.row.man1 ? scope.row.man1 : '--' }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"联系方式\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"text\">{{ scope.row.phone ? scope.row.phone : '--' }}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t\t\t<el-table-column label=\"操作\" width=\"120\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"handle\" @click=\"handleEdit(scope.row)\">\r\n\t\t\t\t\t\t\t\t\t\t<i class=\"iconfont icon-xiangqing\"></i>\r\n\t\t\t\t\t\t\t\t\t\t<span>详情</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t\t</el-table>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</CustomTable>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div v-if=\"total > pageSize && isPageShow\" class=\"page-box\">\r\n\t\t\t<Page\r\n\t\t\t\t:total=\"total\"\r\n\t\t\t\t:page-size=\"pageSize\"\r\n\t\t\t\t:current=\"currentPage\"\r\n\t\t\t\t@onChange=\"onChange\"\r\n\t\t\t\t@changePageSize=\"changePageSize\"\r\n\t\t\t\t:isPageSizeShow=\"true\"\r\n\t\t\t\t:isJumpShow=\"true\"\r\n\t\t\t\t:isTotalShow=\"true\"\r\n\t\t\t\t:perPage=\"15\"\r\n\t\t\t></Page>\r\n\t\t</div>\r\n\r\n\t\t<RunBall :isRunBall=\"isRunBall\"></RunBall>\r\n\r\n\t\t<downloadModal :isShow.sync=\"isModalShow\"></downloadModal>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Nav from '@/components/common/nav.vue';\r\nimport Page from '@/components/common/page.vue';\r\nimport Loading from '@/components/common/loading.vue';\r\nimport CustomInput from '@/components/common/input.vue';\r\nimport CustomSelect from '@/components/common/select.vue';\r\nimport CustomTable from '@/components/common/table.vue';\r\nimport CustomTableSort from '@/components/common/custom-table-sort.vue';\r\nimport CustomAreaSelect from '@/components/common/area-selecter.vue';\r\nimport downloadModal from '@/components/common/download-modal.vue';\r\nimport RunBall from '@/components/common/run-ball.vue'; // 抛出动画\r\n\r\nimport {areaLevelCorAreaId} from '@/common/fn/index.js';\r\nimport {SessionStorage, getStorage} from '@/utils/storage.js';\r\nimport {downloadExcel} from '@/utils/utils.js';\r\nimport filterArea from '@/common/config/filterArea.js';\r\n\r\nlet operateSubjectSessionStorage = '';\r\n\r\nexport default {\r\n\tprops: {\r\n\t\tfarmAreaInfo: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn areaLevelCorAreaId();\r\n\t\t\t},\r\n\t\t},\r\n\t\tisHeaderShow: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\tisSearchShow: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\thideColumn: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn {};\r\n\t\t\t},\r\n\t\t},\r\n\t\tminWidth: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '1366px',\r\n\t\t},\r\n\t\tminHeight: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '696px',\r\n\t\t},\r\n\t\theight: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '100vh',\r\n\t\t},\r\n\t\tdefaultPageSize: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 15,\r\n\t\t},\r\n\t\tisPageShow: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tpageSize: 15,\r\n\t\t\ttotal: 1,\r\n\t\t\tkeyword: '',\r\n\t\t\t// 企业类型\r\n\t\t\tcompanyCategory: '',\r\n\t\t\tcompanyCategoryList: [\r\n\t\t\t\t{\r\n\t\t\t\t\tcompanyCategoryName: '全部主体类型',\r\n\t\t\t\t\tid: '',\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tzzCompanyCategory: '',\r\n\t\t\tzzCompanyCategoryList: [\r\n\t\t\t\t{\r\n\t\t\t\t\tcompanyCategoryName: '全部主体类型',\r\n\t\t\t\t\tid: '',\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\t// 经营类目\r\n\t\t\tbusinessCategory: '',\r\n\t\t\tbusinessCategoryList: [\r\n\t\t\t\t{\r\n\t\t\t\t\tbizCategoryName: '全部经营类目',\r\n\t\t\t\t\tid: '',\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tbusinessList: [],\r\n\t\t\tbusinessList1: [],\r\n\t\t\ttableHeight: 0,\r\n\t\t\tareaValue: {\r\n\t\t\t\tids: [],\r\n\t\t\t\tlevel: '',\r\n\t\t\t},\r\n\t\t\tzzAreaValue: {\r\n\t\t\t\tareaName: '全部区',\r\n\t\t\t\tid: '',\r\n\t\t\t},\r\n\t\t\tzzArea: [\r\n\t\t\t\t{\r\n\t\t\t\t\tareaName: '全部区',\r\n\t\t\t\t\tid: '',\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\taboveAcreList: [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: '全部',\r\n\t\t\t\t\tid: '0',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: '已入网',\r\n\t\t\t\t\tid: '1',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: '未入网',\r\n\t\t\t\t\tid: '2',\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\taboveAcre: '1',\r\n\t\t\tsortField: 1, // 神农口袋：0 占地面积（土地流转面积） 1 可种植/养殖面积 2、上图面积（入网面积），3、在田面积，4、经营主体id ； 种植业系统：0 种植面积 1 占地面积（土地流转面积）\r\n\t\t\tsortDirection: 1,\r\n\t\t\tfarmAcreDefaultSort: 'none', // 神农口袋：占地面积排序； 种植业系统：种植面积排序\r\n\t\t\taboveAcreDefaultSort: 'descending', // 神农口袋：可种植/养殖面积排序； 种植业系统：占地面积排序\r\n\t\t\tplantingDefaultSort: 'none',\r\n\t\t\tloading: false,\r\n\t\t\ttabs: [\r\n\t\t\t\t{\r\n\t\t\t\t\tindex: 0,\r\n\t\t\t\t\ttitle: '神农口袋',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tindex: 1,\r\n\t\t\t\t\ttitle: '种植业系统',\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\ttabCurrent: 0,\r\n\t\t\ttabCache: {},\r\n\t\t\texcelLoading: false,\r\n\t\t\t// defaultAreaOptions: {},\r\n\t\t\t// tempAreaOptions: {}\r\n\t\t\tisModalShow: false,\r\n\t\t\tisRunBall: false,\r\n\t\t\tisAddNum: false,\r\n\t\t};\r\n\t},\r\n\tbeforeRouteEnter(to, from, next) {\r\n\t\tif (from.name === 'farmdetail' || from.name === 'gisfarmdetail') {\r\n\t\t\toperateSubjectSessionStorage = SessionStorage.get('operateSubjectSessionStorage');\r\n\t\t} else {\r\n\t\t\toperateSubjectSessionStorage = '';\r\n\t\t}\r\n\t\tnext();\r\n\t},\r\n\tcreated() {\r\n\t\tif (operateSubjectSessionStorage) {\r\n\t\t\tthis.keyword = operateSubjectSessionStorage.keyword;\r\n\t\t\tthis.pageSize = operateSubjectSessionStorage.pageSize;\r\n\t\t\tthis.currentPage = operateSubjectSessionStorage.currentPage;\r\n\t\t\tthis.companyCategory = operateSubjectSessionStorage.companyCategory;\r\n\t\t\tthis.businessCategory = operateSubjectSessionStorage.businessCategory;\r\n\t\t\tthis.sortField = operateSubjectSessionStorage.sortField;\r\n\t\t\tthis.sortDirection = operateSubjectSessionStorage.sortDirection;\r\n\t\t\tthis.farmAcreDefaultSort = operateSubjectSessionStorage.farmAcreDefaultSort;\r\n\t\t\tthis.plantingDefaultSort = operateSubjectSessionStorage.plantingDefaultSort;\r\n\t\t\tthis.aboveAcreDefaultSort = operateSubjectSessionStorage.aboveAcreDefaultSort;\r\n\t\t\tthis.tabCurrent = operateSubjectSessionStorage.tabCurrent;\r\n\t\t\tthis.zzAreaValue = operateSubjectSessionStorage.zzAreaValue;\r\n\t\t\t// this.defaultAreaOptions = operateSubjectSessionStorage.defaultAreaOptions;\r\n\t\t\tthis.zzCompanyCategory = operateSubjectSessionStorage.zzCompanyCategory;\r\n\t\t\tthis.aboveAcre = operateSubjectSessionStorage.aboveAcre;\r\n\t\t} else {\r\n\t\t\tthis.keyword = '';\r\n\t\t\tthis.pageSize = this.defaultPageSize;\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.companyCategory = '';\r\n\t\t\tthis.businessCategory = '';\r\n\t\t\tthis.sortField = 2;\r\n\t\t\tthis.sortDirection = 1;\r\n\t\t\tthis.farmAcreDefaultSort = 'none';\r\n\t\t\tthis.plantingDefaultSort = 'none';\r\n\t\t\tthis.aboveAcreDefaultSort = 'descending';\r\n\t\t\tthis.aboveAcre = 1;\r\n\t\t\t// 在总览页中默认的排序\r\n\t\t\tif (!this.isHeaderShow) {\r\n\t\t\t\tthis.aboveAcreDefaultSort = 'none';\r\n\t\t\t\tthis.plantingDefaultSort = 'none';\r\n\t\t\t\tthis.farmAcreDefaultSort = 'none';\r\n\t\t\t\tthis.sortField = 4;\r\n\t\t\t\tthis.sortDirection = 0;\r\n\t\t\t}\r\n\t\t\tthis.tabCurrent = 0;\r\n\t\t\tthis.zzAreaValue = {\r\n\t\t\t\tareaName: '全部区',\r\n\t\t\t\tid: '',\r\n\t\t\t};\r\n\t\t\t// this.defaultAreaOptions = {};\r\n\t\t\tthis.zzCompanyCategory = '';\r\n\t\t}\r\n\t\t// 神农口袋\r\n\t\tif (this.tabCurrent === 0) {\r\n\t\t\tthis.getCompanyCategory();\r\n\t\t\tthis.getBusinessCategory();\r\n\t\t\tthis.getOperateSubjectList();\r\n\t\t}\r\n\t\t// 种植业系统\r\n\t\tif (this.tabCurrent === 1) {\r\n\t\t\tthis.getZzBasCompanyList();\r\n\t\t\tthis.getZzBasCompanyListType();\r\n\t\t\tthis.zzGetArea();\r\n\t\t}\r\n\t},\r\n\tbeforeRouteLeave(to, from, next) {\r\n\t\t// 如果进入farm详情页，缓存过滤条件，用于从详情页返回保持过滤条件\r\n\t\tif (to.name === 'farmdetail' || to.name === 'gisfarmdetail') {\r\n\t\t\tSessionStorage.set('operateSubjectSessionStorage', {\r\n\t\t\t\tkeyword: this.keyword,\r\n\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\tcurrentPage: this.currentPage,\r\n\t\t\t\tcompanyCategory: this.companyCategory,\r\n\t\t\t\tbusinessCategory: this.businessCategory,\r\n\t\t\t\tsortField: this.sortField,\r\n\t\t\t\tsortDirection: this.sortDirection,\r\n\t\t\t\tfarmAcreDefaultSort: this.farmAcreDefaultSort,\r\n\t\t\t\taboveAcreDefaultSort: this.aboveAcreDefaultSort,\r\n\t\t\t\tplantingDefaultSort: this.plantingDefaultSort,\r\n\t\t\t\ttabCurrent: this.tabCurrent,\r\n\t\t\t\tzzAreaValue: this.zzAreaValue,\r\n\t\t\t\t// defaultAreaOptions: this.tempAreaOptions,\r\n\t\t\t\tzzCompanyCategory: this.zzCompanyCategory,\r\n\t\t\t\taboveAcre: this.aboveAcre,\r\n\t\t\t});\r\n\t\t}\r\n\t\tnext();\r\n\t},\r\n\tcomputed: {\r\n\t\tdataTargetFlag() {\r\n\t\t\treturn getStorage('govGovernmentSubjectVO').dataTargetFlag;\r\n\t\t},\r\n\t\tgisMapFlag() {\r\n\t\t\treturn getStorage('govGovernmentSubjectVO').gisMapFlag;\r\n\t\t},\r\n\t\t// 是否在改地区显示\r\n\t\tgetLevel() {\r\n\t\t\treturn getStorage('govGovernmentSubjectVO').subjectLevel === 2 && getStorage('govGovernmentSubjectVO').cityId === '310100';\r\n\t\t},\r\n\t\t// 监管层级\r\n\t\tlevel() {\r\n\t\t\treturn getStorage('govGovernmentSubjectVO').subjectLevel;\r\n\t\t},\r\n\t\t// 监管地区id\r\n\t\tstartId() {\r\n\t\t\tlet storage = getStorage('govGovernmentSubjectVO');\r\n\t\t\tlet level = getStorage('govGovernmentSubjectVO').subjectLevel;\r\n\r\n\t\t\tif (level === 1) {\r\n\t\t\t\treturn storage.provinceId;\r\n\t\t\t}\r\n\t\t\tif (level === 2) {\r\n\t\t\t\treturn storage.cityId;\r\n\t\t\t}\r\n\t\t\tif (level === 3) {\r\n\t\t\t\treturn storage.countyId;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tmounted() {\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tthis.tableHeight = this.$refs.listContent.offsetHeight;\r\n\t\t});\r\n\t\twindow.addEventListener('resize', this.resizeHandle, false);\r\n\t},\r\n\tmethods: {\r\n\t\tback() {\r\n\t\t\tvar tempPath = this.$route.path;\r\n\t\t\tthis.$router.go(-1);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (tempPath === this.$route.path) {\r\n\t\t\t\t\tthis.back();\r\n\t\t\t\t}\r\n\t\t\t}, 200);\r\n\t\t},\r\n\t\tasync download() {\r\n\t\t\t// this.excelLoading = true;\r\n\t\t\tconst defaultArea = areaLevelCorAreaId();\r\n\t\t\tconst userInfo = getStorage('govGovernmentUserVO');\r\n\r\n\t\t\tlet area = {};\r\n\t\t\tif (this.areaValue) {\r\n\t\t\t\tarea = this.areaValue;\r\n\t\t\t}\r\n\r\n\t\t\tlet filename = '';\r\n\r\n\t\t\tif (this.tabCurrent === 0) {\r\n\t\t\t\tif (!this.businessList.length) {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\tmessage: '暂无数据，无法导出',\r\n\t\t\t\t\t\tcenter: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst options = {\r\n\t\t\t\t\tfarmAreaId: this.areaValue.ids.length ? this.areaValue.ids : [defaultArea.farmAreaId],\r\n\t\t\t\t\tfarmAreaType: this.areaValue.level ? this.areaValue.level : defaultArea.farmAreaType,\r\n\t\t\t\t\tkeyword: this.keyword ? this.keyword : '',\r\n\t\t\t\t\tbusinessCategoryId: this.businessCategory ? this.businessCategory : '',\r\n\t\t\t\t\tcompanyCategoryId: this.companyCategory ? this.companyCategory : '',\r\n\t\t\t\t\ttownId: this.areaValue.townId ? this.areaValue.townId : '',\r\n\t\t\t\t\tvillageId: this.areaValue.villageId ? this.areaValue.villageId : '',\r\n\t\t\t\t\tgovUserId: userInfo.id,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconst res = await this.$ajax.post(this.$api.downloadExcel.operateSubjectlUploadToServer, options);\r\n\r\n\t\t\t\t// console.log('res=======>', res);\r\n\t\t\t\tif (res.data.respCode === 0) {\r\n\t\t\t\t\tif (this.isAddNum) {\r\n\t\t\t\t\t\tthis.isAddNum = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.isRunBall = true;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.isRunBall = false;\r\n\t\t\t\t\t\tthis.isAddNum = true;\r\n\t\t\t\t\t}, 800);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (res.data.respCode === 300) {\r\n\t\t\t\t\tthis.isModalShow = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// filename = `经营主体信息-神农口袋（${this.formatDate(new Date().getTime(), '')}）`;\r\n\t\t\t\t// const res = await downloadExcel(\r\n\t\t\t\t// \t'/freetekApi/produce/gov/farm/FarmBusinessEntityCountDistributionByAreaTypeAndAreaIdDetailDownload',\r\n\t\t\t\t// \t{\r\n\t\t\t\t// \t\tfarmAreaId: this.areaValue.ids.length ? this.areaValue.ids : [defaultArea.farmAreaId],\r\n\t\t\t\t// \t\tfarmAreaType: this.areaValue.level ? this.areaValue.level : defaultArea.farmAreaType,\r\n\t\t\t\t// \t\tkeyword: this.keyword,\r\n\t\t\t\t// \t\tbusinessCategoryId: this.businessCategory ? this.businessCategory : '',\r\n\t\t\t\t// \t\tcompanyCategoryId: this.companyCategory ? this.companyCategory : '',\r\n\t\t\t\t// \t\ttownId: this.areaValue.townId ? this.areaValue.townId : '',\r\n\t\t\t\t// \t\tvillageId: this.areaValue.villageId ? this.areaValue.villageId : ''\r\n\t\t\t\t// \t},\r\n\t\t\t\t// \tfilename\r\n\t\t\t\t// );\r\n\t\t\t\t// if (res.msg === 'success') {\r\n\t\t\t\t// \tthis.$message({\r\n\t\t\t\t// \t\ttype: 'success',\r\n\t\t\t\t// \t\tmessage: '下载成功',\r\n\t\t\t\t// \t\tcenter: true\r\n\t\t\t\t// \t});\r\n\t\t\t\t// \tthis.excelLoading = false;\r\n\t\t\t\t// } else {\r\n\t\t\t\t// \tthis.excelLoading = false;\r\n\t\t\t\t// }\r\n\t\t\t}\r\n\r\n\t\t\tif (this.tabCurrent === 1) {\r\n\t\t\t\tif (!this.businessList1.length) {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\tmessage: '暂无数据，无法导出',\r\n\t\t\t\t\t\tcenter: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst options = {\r\n\t\t\t\t\tfarmAreaId: this.zzAreaValue.id ? [this.zzAreaValue.id] : [defaultArea.farmAreaId],\r\n\t\t\t\t\tfarmAreaType: this.zzAreaValue.level ? this.zzAreaValue.level : defaultArea.farmAreaType,\r\n\t\t\t\t\tkeyword: this.keyword,\r\n\t\t\t\t\ttype: this.zzCompanyCategory ? this.zzCompanyCategory : '',\r\n\t\t\t\t\tisAbove: this.aboveAcre,\r\n\t\t\t\t\tgovUserId: userInfo.id,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconst res = await this.$ajax.post(this.$api.downloadExcel.zzBasCompanyExportTask, options);\r\n\r\n\t\t\t\t// console.log('res=======>', res);\r\n\t\t\t\tif (res.data.respCode === 0) {\r\n\t\t\t\t\tif (this.isAddNum) {\r\n\t\t\t\t\t\tthis.isAddNum = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.isRunBall = true;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.isRunBall = false;\r\n\t\t\t\t\t\tthis.isAddNum = true;\r\n\t\t\t\t\t}, 800);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (res.data.respCode === 300) {\r\n\t\t\t\t\tthis.isModalShow = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// filename = `经营主体信息-种植业管理系统（${this.formatDate(new Date().getTime(), '')}）`;\r\n\t\t\t\t// const res = await downloadExcel(\r\n\t\t\t\t// \t'/freetekApi/nongwei/gov/zzBasCompany/listDownload',\r\n\t\t\t\t// \t{\r\n\t\t\t\t// \t\tfarmAreaId: this.zzAreaValue.id ? [this.zzAreaValue.id] : [defaultArea.farmAreaId],\r\n\t\t\t\t// \t\tfarmAreaType: this.zzAreaValue.level ? this.zzAreaValue.level : defaultArea.farmAreaType,\r\n\t\t\t\t// \t\tkeyword: this.keyword,\r\n\t\t\t\t// \t\ttype: this.zzCompanyCategory ? this.zzCompanyCategory : '',\r\n\t\t\t\t// \t\tisAbove: this.aboveAcre\r\n\t\t\t\t// \t},\r\n\t\t\t\t// \tfilename\r\n\t\t\t\t// );\r\n\t\t\t\t// if (res.msg === 'success') {\r\n\t\t\t\t// \tthis.$message({\r\n\t\t\t\t// \t\ttype: 'success',\r\n\t\t\t\t// \t\tmessage: '下载成功',\r\n\t\t\t\t// \t\tcenter: true\r\n\t\t\t\t// \t});\r\n\t\t\t\t// \tthis.excelLoading = false;\r\n\t\t\t\t// } else {\r\n\t\t\t\t// \tthis.excelLoading = false;\r\n\t\t\t\t// }\r\n\t\t\t}\r\n\t\t},\r\n\t\ttabChange(item) {\r\n\t\t\t// this.tabCurrent = item.index;\r\n\t\t\tthis.keyword = '';\r\n\t\t\tthis.pageSize = 15;\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.companyCategory = '';\r\n\t\t\tthis.businessCategory = '';\r\n\t\t\tthis.zzCompanyCategory = '';\r\n\t\t\tthis.aboveAcre = '1';\r\n\t\t\tthis.farmAcreDefaultSort = 'none';\r\n\t\t\tthis.plantingDefaultSort = 'none';\r\n\t\t\tthis.aboveAcreDefaultSort = 'descending';\r\n\t\t\tthis.areaValue = {\r\n\t\t\t\tids: [],\r\n\t\t\t\tlevel: '',\r\n\t\t\t};\r\n\t\t\tthis.zzAreaValue = {\r\n\t\t\t\tareaName: '全部区',\r\n\t\t\t\tid: '',\r\n\t\t\t};\r\n\t\t\tthis.zzArea = [\r\n\t\t\t\t{\r\n\t\t\t\t\tareaName: '全部区',\r\n\t\t\t\t\tid: '',\r\n\t\t\t\t},\r\n\t\t\t];\r\n\t\t\tif (this.tabCurrent === 0) {\r\n\t\t\t\tthis.sortField = 2;\r\n\t\t\t\tthis.sortDirection = 1;\r\n\r\n\t\t\t\tthis.getCompanyCategory();\r\n\t\t\t\tthis.getOperateSubjectList();\r\n\t\t\t\tthis.getBusinessCategory();\r\n\t\t\t}\r\n\t\t\tif (this.tabCurrent === 1) {\r\n\t\t\t\tthis.sortField = 0;\r\n\t\t\t\tthis.sortDirection = 1;\r\n\t\t\t\tthis.farmAcreDefaultSort = 'descending';\r\n\t\t\t\t// this.aboveAcreDefaultSort = 'none'\r\n\t\t\t\tthis.getZzBasCompanyListType();\r\n\t\t\t\tthis.getZzBasCompanyList();\r\n\t\t\t\tthis.zzGetArea();\r\n\t\t\t}\r\n\t\t},\r\n\t\trowClick(row) {\r\n\t\t\t// 如果是详情弹框该事件可以点击\r\n\t\t\tif (this.isHeaderShow) return;\r\n\t\t\tthis.$router.push(`/farmdetail/${row.farmId}`);\r\n\t\t},\r\n\t\tonChange(page) {\r\n\t\t\tthis.currentPage = page;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\tchangePageSize(pageSize) {\r\n\t\t\tthis.pageSize = pageSize;\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\tclickAndEnter() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\t// 种植业系统地区选择\r\n\t\tareaChange() {\r\n\t\t\t// this.areaValue = val\r\n\t\t\t// this.zzAreaValue = val;\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\tasync areaCilck(val, obj) {\r\n\t\t\t// this.tempAreaOptions = obj\r\n\t\t\tthis.areaValue = val;\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\tcompanyChange() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\tzzCompanyChange() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\tbusinessChange() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\taboveAcreChange() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\tsortChange(value) {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tif (value.prop === 'farmAcre') {\r\n\t\t\t\t// 当占地面积排序时且占地面积之前不再排序中，清空其他的排序条件，排序只能一种条件在排序\r\n\t\t\t\tif (this.farmAcreDefaultSort === 'none') {\r\n\t\t\t\t\tthis.aboveAcreDefaultSort = 'none';\r\n\t\t\t\t\tthis.plantingDefaultSort = 'none';\r\n\t\t\t\t\tthis.farmAcreDefaultSort = 'descending';\r\n\t\t\t\t\tthis.sortField = 0; // 占地面积\r\n\t\t\t\t\tthis.sortDirection = 1;\r\n\t\t\t\t\tthis.getData();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// 占地面积置空\r\n\t\t\t\tthis.sortField = 0; // 占地面积\r\n\t\t\t\tthis.farmAcreDefaultSort = value.order === 'descending' ? 'descending' : 'ascending';\r\n\t\t\t\tthis.sortDirection = value.order === 'descending' ? 1 : 0;\r\n\t\t\t}\r\n\t\t\tif (value.prop === 'aboveAcre') {\r\n\t\t\t\tif (this.aboveAcreDefaultSort === 'none') {\r\n\t\t\t\t\tthis.farmAcreDefaultSort = 'none';\r\n\t\t\t\t\tthis.plantingDefaultSort = 'none';\r\n\t\t\t\t\tthis.aboveAcreDefaultSort = 'descending';\r\n\t\t\t\t\tthis.sortField = 2; // 入网面积\r\n\t\t\t\t\tthis.sortDirection = 1;\r\n\t\t\t\t\tthis.getData();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.sortField = 2; // 入网面积\r\n\t\t\t\tthis.aboveAcreDefaultSort = value.order === 'descending' ? 'descending' : 'ascending';\r\n\t\t\t\tthis.sortDirection = value.order === 'descending' ? 1 : 0;\r\n\t\t\t}\r\n\t\t\tif (value.prop === 'planting') {\r\n\t\t\t\tif (this.plantingDefaultSort === 'none') {\r\n\t\t\t\t\tthis.farmAcreDefaultSort = 'none';\r\n\t\t\t\t\tthis.aboveAcreDefaultSort = 'none';\r\n\t\t\t\t\tthis.plantingDefaultSort = 'descending';\r\n\t\t\t\t\tthis.sortField = 3; // 在田面积\r\n\t\t\t\t\tthis.sortDirection = 1;\r\n\t\t\t\t\tthis.getData();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.sortField = 3; // 在田面积\r\n\t\t\t\tthis.plantingDefaultSort = value.order === 'descending' ? 'descending' : 'ascending';\r\n\t\t\t\tthis.sortDirection = value.order === 'descending' ? 1 : 0;\r\n\t\t\t}\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\tgetData() {\r\n\t\t\tif (this.tabCurrent === 0) {\r\n\t\t\t\tthis.getOperateSubjectList();\r\n\t\t\t}\r\n\t\t\tif (this.tabCurrent === 1) {\r\n\t\t\t\tthis.getZzBasCompanyList();\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleEdit(row) {\r\n\t\t\tif (this.tabCurrent === 0) {\r\n\t\t\t\tthis.$router.push(`/farmdetail/${row.farmId}`);\r\n\t\t\t}\r\n\t\t\tif (this.tabCurrent === 1) {\r\n\t\t\t\tthis.$router.push(`/gisfarmdetail/${row.companyCode}`);\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getCompanyCategory() {\r\n\t\t\tthis.companyCategoryList = [\r\n\t\t\t\t{\r\n\t\t\t\t\tcompanyCategoryName: '全部主体类型',\r\n\t\t\t\t\tid: '',\r\n\t\t\t\t},\r\n\t\t\t];\r\n\t\t\tconst res = await this.$ajax.post(this.$api.produce.companyCategory, {});\r\n\t\t\tif (res.data.respCode === 0) {\r\n\t\t\t\tres.data.obj.list.forEach(ele => {\r\n\t\t\t\t\tthis.companyCategoryList.push(ele);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getBusinessCategory() {\r\n\t\t\tconst res = await this.$ajax.post(this.$api.produce.businessCategory, {});\r\n\r\n\t\t\tif (res.data.respCode === 0) {\r\n\t\t\t\tres.data.obj.list.forEach(ele => {\r\n\t\t\t\t\tthis.businessCategoryList.push(ele);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 种植业系统经营主体类型\r\n\t\tasync getZzBasCompanyListType() {\r\n\t\t\tthis.zzCompanyCategoryList = [\r\n\t\t\t\t{\r\n\t\t\t\t\tcompanyCategoryName: '全部主体类型',\r\n\t\t\t\t\tid: '',\r\n\t\t\t\t},\r\n\t\t\t];\r\n\t\t\tconst res = await this.$ajax.post(this.$api.govPatrol.zzBasCompanyListType, {});\r\n\r\n\t\t\tif (res.data.respCode === 0) {\r\n\t\t\t\tres.data.obj.forEach(ele => {\r\n\t\t\t\t\tthis.zzCompanyCategoryList.push({\r\n\t\t\t\t\t\tcompanyCategoryName: ele,\r\n\t\t\t\t\t\tid: ele,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 神农口袋经营主体列表\r\n\t\tasync getOperateSubjectList() {\r\n\t\t\tthis.businessList = [];\r\n\t\t\tthis.loading = true;\r\n\t\t\tconst defaultArea = areaLevelCorAreaId();\r\n\r\n\t\t\tif (!this.isHeaderShow && this.farmAreaInfo.farmAreaId) {\r\n\t\t\t\tthis.areaValue.ids = [this.farmAreaInfo.farmAreaId];\r\n\t\t\t\tthis.areaValue.level = this.farmAreaInfo.farmAreaType;\r\n\t\t\t}\r\n\r\n\t\t\tconst options = {\r\n\t\t\t\tbusinessCategoryId: this.businessCategory ? this.businessCategory : '',\r\n\t\t\t\tcompanyCategoryId: this.companyCategory ? this.companyCategory : '',\r\n\t\t\t\tfarmAreaId: this.areaValue.ids.length ? this.areaValue.ids : [defaultArea.farmAreaId],\r\n\t\t\t\tfarmAreaType: this.areaValue.level ? this.areaValue.level : defaultArea.farmAreaType,\r\n\t\t\t\tkeyword: this.keyword ? this.keyword : '',\r\n\t\t\t\tpageNo: this.currentPage,\r\n\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\tsortField: this.sortField,\r\n\t\t\t\tsortDirection: this.sortDirection,\r\n\t\t\t\ttownId: this.areaValue.townId ? this.areaValue.townId : '',\r\n\t\t\t\tvillageId: this.areaValue.villageId ? this.areaValue.villageId : '',\r\n\t\t\t};\r\n\r\n\t\t\tconst res = await this.$ajax.post(this.$api.produce.operateSubjectList, options);\r\n\r\n\t\t\tif (res.data.respCode === 0) {\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t\tthis.businessList = res.data.obj.lists;\r\n\t\t\t\tthis.total = res.data.obj.count;\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.tableHeight = this.$refs.listContent.offsetHeight;\r\n\t\t\t\t\tthis.backTop();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 种植业经营主体列表\r\n\t\tasync getZzBasCompanyList() {\r\n\t\t\tthis.businessList1 = [];\r\n\t\t\tthis.loading = true;\r\n\t\t\tconst defaultArea = areaLevelCorAreaId();\r\n\r\n\t\t\tlet areaValue = {};\r\n\t\t\tif (this.zzAreaValue.id) {\r\n\t\t\t\tareaValue = this.zzAreaValue;\r\n\t\t\t}\r\n\t\t\tconst options = {\r\n\t\t\t\ttype: this.zzCompanyCategory ? this.zzCompanyCategory : '',\r\n\t\t\t\tfarmAreaId: areaValue.id ? [areaValue.id] : [defaultArea.farmAreaId],\r\n\t\t\t\tfarmAreaType: areaValue.level ? areaValue.level : defaultArea.farmAreaType,\r\n\t\t\t\tkeyword: this.keyword ? this.keyword : '',\r\n\t\t\t\tpageNo: this.currentPage,\r\n\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\tsortField: this.sortField,\r\n\t\t\t\tsortDirection: this.sortDirection,\r\n\t\t\t\tisAbove: this.aboveAcre,\r\n\t\t\t};\r\n\r\n\t\t\tconst res = await this.$ajax.post(this.$api.govPatrol.zzBasCompanyList, options);\r\n\r\n\t\t\tif (res.data.respCode === 0) {\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t\tthis.businessList1 = res.data.obj.lists;\r\n\t\t\t\tthis.total = res.data.obj.count;\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.tableHeight = this.$refs.listContent.offsetHeight;\r\n\t\t\t\t\tthis.backTop();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync zzGetArea() {\r\n\t\t\tconst res = await this.$ajax.post(this.$api.area.listByParentId, {\r\n\t\t\t\tparentId: getStorage('govGovernmentSubjectVO').cityId,\r\n\t\t\t});\r\n\t\t\tif (res.data.respCode === 0) {\r\n\t\t\t\tres.data.obj.list.forEach(ele => {\r\n\t\t\t\t\tlet temp = [];\r\n\t\t\t\t\t// 当行政区为上海时，过滤没有gis地图的区\r\n\t\t\t\t\tif (getStorage('govGovernmentSubjectVO').cityId === '310100') {\r\n\t\t\t\t\t\ttemp = filterArea.filterArea.filter(element => ele.id === element.id);\r\n\t\t\t\t\t\tif (temp.length) return;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.zzArea.push(ele);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tspliceAreaName(row) {\r\n\t\t\tconst storage = getStorage('govGovernmentSubjectVO');\r\n\r\n\t\t\tlet str = '';\r\n\t\t\tstr = row.townName ? str + '/' + row.townName : '';\r\n\t\t\tstr = row.villageName ? (str ? str + '/' + row.villageName : row.villageName) : str ? str : '';\r\n\r\n\t\t\tif (storage.subjectLevel === 1) {\r\n\t\t\t\treturn row.cityName + '/' + row.countyName + str;\r\n\t\t\t}\r\n\r\n\t\t\tif (storage.subjectLevel === 2 || storage.subjectLevel === 3) {\r\n\t\t\t\tlet str1 = row.cityName;\r\n\t\t\t\tstr = row.countyName ? str1 + '/' + row.countyName + str : str;\r\n\r\n\t\t\t\treturn str;\r\n\t\t\t}\r\n\t\t},\r\n\t\tformatDate(time, character) {\r\n\t\t\tconst date = new Date(time);\r\n\r\n\t\t\tconst YY = date.getFullYear() + character;\r\n\t\t\tconst MM = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + character;\r\n\t\t\tconst DD = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\r\n\r\n\t\t\treturn YY + MM + DD;\r\n\t\t},\r\n\t\tresizeHandle() {\r\n\t\t\tthis.tableHeight = this.$refs.listContent.offsetHeight;\r\n\t\t},\r\n\t\tbackTop() {\r\n\t\t\tdocument.querySelector('.el-table__body-wrapper').scrollTop = 0;\r\n\t\t},\r\n\t\t// 解决element ui tooltip点击后，切换页面回来后，tip出现的问题\r\n\t\tbuttonClick(e) {\r\n\t\t\te.target.blur();\r\n\t\t},\r\n\t},\r\n\tdestroyed() {\r\n\t\twindow.removeEventListener('resize', this.resizeHandle, false);\r\n\t},\r\n\tcomponents: {\r\n\t\tNav,\r\n\t\tPage,\r\n\t\tLoading,\r\n\t\tCustomInput,\r\n\t\tCustomSelect,\r\n\t\tCustomTable,\r\n\t\tCustomTableSort,\r\n\t\tCustomAreaSelect,\r\n\t\tdownloadModal,\r\n\t\tRunBall,\r\n\t},\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.operate-subject {\r\n\toverflow: hidden;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\theight: 100vh;\r\n\tmin-width: 1366px;\r\n\tmin-height: 696px;\r\n\tbox-sizing: border-box;\r\n\tbackground-color: #021220;\r\n\r\n\t.nav-tab {\r\n\t\tdisplay: flex;\r\n\r\n\t\t.tab-item {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t\theight: 65px;\r\n\t\t\tpadding: 20px 0 2px 0;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tcursor: pointer;\r\n\r\n\t\t\t&:first-child {\r\n\t\t\t\tmargin-right: 40px;\r\n\t\t\t}\r\n\r\n\t\t\t.tab-title {\r\n\t\t\t\tcolor: #afc3d4;\r\n\t\t\t\tfont-size: 22px;\r\n\t\t\t}\r\n\r\n\t\t\t&.tab-active {\r\n\t\t\t\t.tab-title {\r\n\t\t\t\t\tcolor: #00f6ff;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t}\r\n\t\t\t\t.tab-underline {\r\n\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 4px;\r\n\t\t\t\t\tbackground-color: #00f6ff;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.main {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t\toverflow: hidden;\r\n\r\n\t\t.search-box {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tpadding: 28px 50px 21px;\r\n\r\n\t\t\t.search-box-left {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t}\r\n\r\n\t\t\t.excel-box {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t.excel {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\twidth: 120px;\r\n\t\t\t\t\theight: 36px;\r\n\t\t\t\t\tmargin-left: 15px;\r\n\t\t\t\t\tborder: 1px solid #145763;\r\n\t\t\t\t\tborder-radius: 2px;\r\n\t\t\t\t\tbackground-color: #24969a;\r\n\t\t\t\t\tcolor: #d9e3ed;\r\n\t\t\t\t\tfont-size: 14px;\r\n\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.list-content {\r\n\t\t\tflex: 1;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\theight: 100%;\r\n\t\t\toverflow: hidden;\r\n\t\t}\r\n\t}\r\n\r\n\t.handle {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #20a8f8;\r\n\t\tcursor: pointer;\r\n\r\n\t\t.iconfont {\r\n\t\t\tfont-size: 23px;\r\n\t\t}\r\n\t}\r\n\r\n\t.text {\r\n\t\tcolor: #a1acb7;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\t.text-bold {\r\n\t\tcolor: #a1acb7;\r\n\t\tfont-weight: bold;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\t.value-text {\r\n\t\tcolor: #a1acb7;\r\n\t\tfont-weight: bold;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.page-box {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\t\talign-items: center;\r\n\t\theight: 88px;\r\n\t\tpadding: 0 40px;\r\n\t\tbackground: #021220;\r\n\t\tbox-shadow: 0px -3px 21px 0px rgba(4, 52, 82, 0.2);\r\n\t}\r\n\r\n\t.no-data {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t}\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\">\r\n.custom-tooltip-light.el-tooltip__popper {\r\n\twidth: 140px;\r\n\tbackground-color: #f4f7f9 !important;\r\n\tbox-shadow: 0px 3px 9px 0px rgba(0, 0, 0, 0.13) !important;\r\n\tcolor: #485256;\r\n\tline-height: 24px;\r\n\r\n\t.popper__arrow {\r\n\t\tbottom: -12px;\r\n\t\tborder-color: transparent !important;\r\n\t\tborder-top-color: #f4f7f9 !important;\r\n\t\tborder-width: 6px !important;\r\n\t\tborder-style: solid !important;\r\n\t}\r\n}\r\n.custom-tooltip-dark.el-tooltip__popper {\r\n\t.popper__arrow {\r\n\t\tbottom: -12px;\r\n\t\tborder-color: transparent !important;\r\n\t\tborder-top-color: rgba(0, 0, 0, 0.9) !important;\r\n\t\tborder-width: 6px !important;\r\n\t\tborder-style: solid !important;\r\n\t}\r\n}\r\n.operate-subject > .el-loading-mask {\r\n\ti {\r\n\t\tcolor: #00e5ff;\r\n\t\tfont-size: 40px;\r\n\t}\r\n\tp {\r\n\t\tcolor: #00e5ff;\r\n\t\tline-height: 40px;\r\n\t\tfont-size: 18px;\r\n\t}\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/overview/operateSubjectList.vue"],"mappings":"AAkVA","sourceRoot":""}
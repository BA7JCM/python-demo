{"version":3,"file":"static/js/17.a056352327db4b6eaac3.js","sources":["webpack:///src/components/overview/modules/operators-16.vue"],"sourcesContent":["<template>\n\t<div class=\"operators\" v-loading=\"loading\" element-loading-spinner=\"iconfont icon-loading1\" element-loading-background=\"rgba(0, 0, 0, 0.2)\">\n\t\t<area-panel area-title=\"经营主体\" @hand-sub-title=\"handlePage\">\n\t\t\t<div slot=\"panelMain\" class=\"wrapper\" ref=\"panel\">\n\t\t\t\t<div v-show=\"!loading\" class=\"network-operators\">\n\t\t\t\t\t<div class=\"echart-wrapper\">\n\t\t\t\t\t\t<div class=\"echart-container\" ref=\"EContainer\"></div>\n\t\t\t\t\t\t<div class=\"center-text\">\n\t\t\t\t\t\t\t<p>经营主体</p>\n\t\t\t\t\t\t\t<p>{{ total }}</p>\n\t\t\t\t\t\t\t<p>（家）</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"legend\">\n\t\t\t\t\t\t<template v-for=\"item in legendList\">\n\t\t\t\t\t\t\t<p v-if=\"item.value\" :key=\"item.name\">\n\t\t\t\t\t\t\t\t<span class=\"icon\" :style=\"{background: item.color}\"></span>{{ item.name }}：<span class=\"num\">{{ item.value }}</span\n\t\t\t\t\t\t\t\t>家\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-show=\"!loading\" class=\"operators-total\">\n\t\t\t\t\t<span class=\"title\">入网经营主体数：</span>\n\t\t\t\t\t<span class=\"click-area\" @click=\"buttonClick\">\n\t\t\t\t\t\t<span class=\"nums\">{{ snTotal }}</span>\n\t\t\t\t\t\t<span class=\"unit\">家</span>\n\t\t\t\t\t\t<i class=\"iconfont icon-tubiao1\" title=\"查看统计\"></i>\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<!--\t\t\t\t\t<el-tooltip key=\"operators\" effect=\"dark\" popper-class=\"custom-tooltip-panel\" placement=\"top\" :visible-arrow=\"false\" :popper-options=\"{removeOnDestroy: true}\">-->\n\t\t\t\t\t<!--\t\t\t\t\t\t<div slot=\"content\" class=\"tooltip-box\">-->\n\t\t\t\t\t<!--\t\t\t\t\t\t\t<div class=\"bg-style\"></div>-->\n\t\t\t\t\t<!--\t\t\t\t\t\t\t<div class=\"content-wrapper\">-->\n\t\t\t\t\t<!--\t\t\t\t\t\t\t\t<template v-for=\"item in operatorsList\">-->\n\t\t\t\t\t<!--\t\t\t\t\t\t\t\t\t<p v-if=\"!item.isTotal && item.snBusinessCount\" :key=\"item.businessName\">-->\n\t\t\t\t\t<!--\t\t\t\t\t\t\t\t\t\t{{ item.businessName }}：<span class=\"num\">{{ item.snBusinessCount }}家</span>-->\n\t\t\t\t\t<!--\t\t\t\t\t\t\t\t\t</p>-->\n\t\t\t\t\t<!--\t\t\t\t\t\t\t\t</template>-->\n\t\t\t\t\t<!--\t\t\t\t\t\t\t</div>-->\n\t\t\t\t\t<!--\t\t\t\t\t\t</div>-->\n\t\t\t\t\t<!--\t\t\t\t\t\t<i class=\"iconfont icon-tishi1\" @click=\"buttonClick\"></i>-->\n\t\t\t\t\t<!--\t\t\t\t\t</el-tooltip>-->\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</area-panel>\n\t</div>\n</template>\n<script>\nimport AreaPanel from '../area-panel';\nimport {areaLevelCorAreaId, maxDecimalPlaces} from '@/common/fn';\nvar pieOption = {\n\ttooltip: {\n\t\tshow: true,\n\t\ttrigger: 'item',\n\t\tformatter(a) {\n\t\t\treturn `${a.name}：${a.value}家`;\n\t\t},\n\t\tbackgroundColor: '#043250',\n\t\tposition: 'right',\n\t\tpadding: [13, 14, 13, 11],\n\t\ttextStyle: {\n\t\t\tfontSize: 12,\n\t\t\tcolor: '#9ED2D8'\n\t\t}\n\t},\n\tcolor: ['#CB4A99', '#D5EF10', '#10AC2A', '#32CEBB', '#3649FB', '#9CE9E8'],\n\tseries: [\n\t\t{\n\t\t\ttype: 'pie',\n\t\t\tcenter: ['50%', '50%'],\n\t\t\tradius: ['75%', '85%'],\n\t\t\tlabel: {\n\t\t\t\tshow: false\n\t\t\t},\n\t\t\tlabelLine: {\n\t\t\t\tshow: false\n\t\t\t},\n\t\t\tdata: []\n\t\t},\n\t\t{\n\t\t\ttype: 'pie',\n\t\t\tcenter: ['50%', '50%'],\n\t\t\tradius: ['66%', '68%'],\n\t\t\thoverAnimation: false,\n\t\t\tlabel: {\n\t\t\t\tshow: false\n\t\t\t},\n\t\t\tlabelLine: {\n\t\t\t\tshow: false\n\t\t\t},\n\t\t\tdata: []\n\t\t}\n\t]\n};\nexport default {\n\tprops: {\n\t\tfarmAreaInfo: {\n\t\t\ttype: Object,\n\t\t\tdefault() {\n\t\t\t\treturn areaLevelCorAreaId();\n\t\t\t}\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tchartInstance: null,\n\t\t\ttotal: 0,\n\t\t\tsnTotal: 0,\n\t\t\tlegendList: [],\n\t\t\tloading: false,\n\t\t\toperatorsList: []\n\t\t};\n\t},\n\tcomponents: {\n\t\tAreaPanel\n\t},\n\tcomputed: {\n\t\tEContainer() {\n\t\t\treturn this.$refs.EContainer;\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.$nextTick(() => {\n\t\t\tthis.initMoudle();\n\t\t});\n\t\twindow.addEventListener('resize', this.adaptationChart);\n\t\tthis.$once('hook:beforeDestroy', function() {\n\t\t\twindow.removeEventListener('resize', this.adaptationChart);\n\t\t});\n\t},\n\tmethods: {\n\t\tasync initMoudle() {\n\t\t\tthis.loading = true;\n\t\t\tthis.chartInstance = this._initEcharts(this.EContainer, pieOption);\n\t\t\tconst seriesData = [];\n\t\t\tconst colorList = [];\n\t\t\tconst res = await this.getAreaBusinessEntityConfig();\n\t\t\tif (!res) return;\n\t\t\tthis.operatorsList = res;\n\t\t\tres.forEach(item => {\n\t\t\t\tif (item.isTotal) {\n\t\t\t\t\tthis.total = item.businessCount;\n\t\t\t\t\tthis.snTotal = item.snBusinessCount;\n\t\t\t\t} else {\n\t\t\t\t\tcolorList.push(item.color || '#000');\n\t\t\t\t\tseriesData.push({\n\t\t\t\t\t\tname: item.businessName,\n\t\t\t\t\t\tvalue: item.businessCount,\n\t\t\t\t\t\tcolor: item.color || '#000'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.legendList = seriesData;\n\t\t\tthis.refreshChart(this.chartInstance, seriesData, colorList);\n\t\t\tthis.adaptationChart();\n\t\t\tthis.loading = false;\n\t\t},\n\t\tgetAreaBusinessEntityConfig() {\n\t\t\treturn this.$ajax\n\t\t\t\t.post(this.$api.overview.getAreaBusinessEntity, {\n\t\t\t\t\tfarmAreaId: [this.farmAreaInfo.farmAreaId],\n\t\t\t\t\tfarmAreaType: this.farmAreaInfo.farmAreaType\n\t\t\t\t})\n\t\t\t\t.then(({data}) => {\n\t\t\t\t\tif (data.respCode === 0) {\n\t\t\t\t\t\treturn data.obj;\n\t\t\t\t\t\t// return this.formatObjData(data.obj)\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(e => {\n\t\t\t\t\tconsole.log('经营主体 error: ', e);\n\t\t\t\t});\n\t\t},\n\t\trefreshChart(chartInstance, seriesData, colorList) {\n\t\t\tconst chartOpts = {\n\t\t\t\tcolor: colorList,\n\t\t\t\tseries: [\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: seriesData\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: seriesData\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\t\t\tthis.chartInstance.setOption(chartOpts);\n\t\t},\n\t\thandlePage() {\n\t\t\t// this.$router.push({name: 'operateSubjectList'});\n\t\t\tthis.$emit('handleClick', 'operateSubjectList', '经营主体');\n\t\t},\n\t\t_initEcharts(el, option) {\n\t\t\tconst chart = this.$echarts.init(el);\n\t\t\tchart.setOption(option);\n\t\t\treturn chart;\n\t\t},\n\t\trefreshRender() {\n\t\t\tif (this.chartInstance) {\n\t\t\t\tthis.chartInstance.resize();\n\t\t\t}\n\t\t},\n\t\tadaptationChart() {\n\t\t\tconst htmlWidth = document.documentElement.clientWidth || document.body.clientWidth;\n\t\t\tconst opts = {\n\t\t\t\tseries: [\n\t\t\t\t\t{\n\t\t\t\t\t\tradius: ['75%', '85%']\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tradius: ['66%', '68%']\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\t\t\tif (htmlWidth > 3000) {\n\t\t\t\topts.series[0].radius = ['85%', '95%'];\n\t\t\t\topts.series[1].radius = ['76%', '78%'];\n\t\t\t\tif (this.chartInstance) {\n\t\t\t\t\tthis.chartInstance.setOption(opts);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\topts.series[0].radius = ['75%', '85%'];\n\t\t\t\topts.series[1].radius = ['66%', '68%'];\n\t\t\t\tif (this.chartInstance) {\n\t\t\t\t\tthis.chartInstance.setOption(opts);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tbuttonClick(e) {\n\t\t\tthis.$emit('handleClick', 'operators16List', '入网经营主体');\n\t\t\te.target.blur();\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.operators {\n\twidth: 100%;\n\theight: 100%;\n\t// background-color: rgba(6, 31, 54, 0.34);\n\t.wrapper {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\t.network-operators {\n\t\t\twidth: 100%;\n\t\t\tflex: 1;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\t.echart-wrapper {\n\t\t\t\tposition: relative;\n\t\t\t\twidth: 55%;\n\t\t\t\theight: 100%;\n\t\t\t\t.echart-container {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t}\n\t\t\t\t.center-text {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 50%;\n\t\t\t\t\tleft: 50%;\n\t\t\t\t\ttransform: translate(-50%, -50%);\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tp:nth-child(1) {\n\t\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\t\tcolor: #9dd1d7;\n\t\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\t}\n\t\t\t\t\tp:nth-child(2) {\n\t\t\t\t\t\tfont-size: 30px;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\tcolor: #feeb48;\n\t\t\t\t\t\tmargin: 10% 0 5%;\n\t\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\t}\n\t\t\t\t\tp:nth-child(3) {\n\t\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\t\tcolor: #feeb48;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t.legend {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\tjustify-content: space-around;\n\t\t\t\tpadding: 10px;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\twidth: 45%;\n\t\t\t\theight: 100%;\n\t\t\t\tp {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\tfont-weight: 400;\n\t\t\t\t\tcolor: #9dd1d7;\n\t\t\t\t\tline-height: 14px;\n\t\t\t\t\t// margin-top: 18px;\n\t\t\t\t\t//&:nth-child(1) {\n\t\t\t\t\t//\tmargin-top: 0;\n\t\t\t\t\t//}\n\t\t\t\t\t.icon {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\twidth: 8px;\n\t\t\t\t\t\theight: 8px;\n\t\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\t\tmargin-right: 8px;\n\t\t\t\t\t}\n\t\t\t\t\t.num {\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t.operators-total {\n\t\t\tmargin: 0 5%;\n\t\t\theight: 14.2%;\n\t\t\tpadding-bottom: 6px;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tborder-top: 1px solid #0e5b7c;\n\t\t\tfont-weight: bold;\n\t\t\t.title {\n\t\t\t\tfont-size: 14px;\n\t\t\t\tcolor: rgba(0, 246, 255, 0.5);\n\t\t\t}\n\t\t\t.click-area {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t\t.nums {\n\t\t\t\tfont-size: 16px;\n\t\t\t\tcolor: #00f6ff;\n\t\t\t}\n\t\t\t.unit {\n\t\t\t\tfont-size: 14px;\n\t\t\t\tcolor: #00f6ff;\n\t\t\t}\n\t\t\ti.iconfont {\n\t\t\t\tcolor: #038794;\n\t\t\t\tmargin-left: 10px;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t}\n\t}\n}\n\n@media screen and (width: 1920px) and (height: 1080px) {\n\t.operators {\n\t\t.wrapper .network-operators {\n\t\t\t.legend {\n\t\t\t\tpadding: 20px 10px;\n\t\t\t}\n\t\t}\n\t}\n}\n@media screen and (min-width: 3000px) {\n\t.operators {\n\t\t.wrapper {\n\t\t\t.network-operators {\n\t\t\t\t.echart-wrapper {\n\t\t\t\t\t.center-text {\n\t\t\t\t\t\t//p:nth-child(1) {\n\t\t\t\t\t\t//  font-size: 25px;\n\t\t\t\t\t\t//}\n\t\t\t\t\t\t//p:nth-child(2) {\n\t\t\t\t\t\t//  font-size: 47px;\n\t\t\t\t\t\t//}\n\t\t\t\t\t\t//p:nth-child(3) {\n\t\t\t\t\t\t//  font-size: 19px;\n\t\t\t\t\t\t//}\n\t\t\t\t\t\tp:nth-child(1) {\n\t\t\t\t\t\t\tfont-size: 22px;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tp:nth-child(2) {\n\t\t\t\t\t\t\tfont-size: 45px;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tp:nth-child(3) {\n\t\t\t\t\t\t\tfont-size: 18px;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t.legend {\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tp {\n\t\t\t\t\t\tfont-size: 22px;\n\t\t\t\t\t\tline-height: 40px;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t.operators-total {\n\t\t\t\t.title,\n\t\t\t\t.nums {\n\t\t\t\t\tfont-size: 24px;\n\t\t\t\t}\n\t\t\t\t.unit {\n\t\t\t\t\tfont-size: 20px;\n\t\t\t\t}\n\t\t\t\ti.iconfont {\n\t\t\t\t\tfont-size: 20px;\n\t\t\t\t\tmargin-left: 20px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.operators .wrapper .network-operators .echart-wrapper .echart-container {\n\t\twidth: 88%;\n\t\theight: 88%;\n\t\tmargin: 6% 0 0 6%;\n\t}\n}\n\n/deep/ .el-loading-spinner {\n\toverflow: hidden;\n\t.iconfont {\n\t\tdisplay: block;\n\t\tfont-size: 40px;\n\t\tcolor: #00f6ff;\n\t\tanimation: loading 1.25s linear infinite;\n\t\tmargin-top: 24px;\n\t\tmargin-left: 8px;\n\t}\n}\n</style>\n\n<style lang=\"scss\">\n.custom-tooltip-panel {\n\tbox-shadow: none !important;\n\t&.el-tooltip__popper {\n\t\tpadding-bottom: 5px;\n\t}\n\t.tooltip-box {\n\t\twidth: 285px;\n\t\theight: 134px;\n\t\tbox-sizing: border-box;\n\t\tposition: relative;\n\t\t// padding: 9px 30px 20px;\n\t\tfont-size: 14px;\n\t\tcolor: #6dc1cb;\n\t\t.bg-style {\n\t\t\tposition: absolute;\n\t\t\ttop: -10px;\n\t\t\tleft: -10px;\n\t\t\tright: -10px;\n\t\t\tbottom: -20px;\n\t\t\tz-index: 0;\n\t\t\tbackground: url('../../../assets/images/overview/bg-tooltip.png') no-repeat;\n\t\t\tbackground-size: 100% 100%;\n\t\t\tbox-sizing: border-box;\n\t\t}\n\t\t.content-wrapper {\n\t\t\theight: 100%;\n\t\t\tbox-sizing: border-box;\n\t\t\tpadding: 15px 0 0 15px;\n\t\t\tposition: relative;\n\t\t\tdisplay: flex;\n\t\t\tflex-wrap: wrap;\n\t\t\talign-content: center;\n\t\t\talign-items: center;\n\t\t\t> p {\n\t\t\t\tposition: relative;\n\t\t\t\twidth: 50%;\n\t\t\t\theight: 14px;\n\t\t\t\tmargin-bottom: 15px;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tfont-weight: 400;\n\t\t\t\tcolor: #9dd1d7;\n\t\t\t\tspan {\n\t\t\t\t\tcolor: #00f3fc;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/overview/modules/operators-16.vue"],"mappings":"AAmDA","sourceRoot":""}
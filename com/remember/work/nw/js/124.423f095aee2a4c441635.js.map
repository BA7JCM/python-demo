{"version":3,"file":"static/js/124.423f095aee2a4c441635.js","sources":["webpack:///src/recycle-bin/农场详情页-左列表-经营情况tab-归档.vue"],"sourcesContent":["<template>\r\n\t<div class=\"tabs-container\">\r\n\t\t<div class=\"tabs-wrap\">\r\n\t\t\t<el-tabs value=\"farmIntro\" @tab-click=\"handleTabs\">\r\n\t\t\t\t<el-tab-pane label=\"基地介绍\" name=\"farmIntro\">\r\n\t\t\t\t\t<div class=\"farm-intro\" v-if=\"generateFarmIntro\">\r\n\t\t\t\t\t\t<div class=\"farm-intro-container\" ref=\"farmIntroContainer\">\r\n\t\t\t\t\t\t\t<div class=\"farm-intro-wrap\">\r\n\t\t\t\t\t\t\t\t<p class=\"info-item\"><b>基地简介：</b>{{ generateFarmIntro.farmIntro.farmDesc }}</p>\r\n\t\t\t\t\t\t\t\t<p class=\"info-item\" v-if=\"!!businessCategoryStr\"><b>经营类目：</b>{{ businessCategoryStr || '' }}</p>\r\n\t\t\t\t\t\t\t\t<p class=\"info-item\"><b>经营主体：</b>{{ generateFarmIntro.companyInfo.companyName }}</p>\r\n\t\t\t\t\t\t\t\t<p class=\"info-item\">\r\n\t\t\t\t\t\t\t\t\t<b>主体类型：</b\r\n\t\t\t\t\t\t\t\t\t>{{\r\n\t\t\t\t\t\t\t\t\t\tgenerateFarmIntro.companyInfo &&\r\n\t\t\t\t\t\t\t\t\t\t\tgenerateFarmIntro.companyInfo.companyCategoryVO &&\r\n\t\t\t\t\t\t\t\t\t\t\tgenerateFarmIntro.companyInfo.companyCategoryVO.companyCategoryName\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p class=\"info-item\"><b>法人代表（负责人）：</b>{{ generateFarmIntro.companyInfo.legalPerson }}</p>\r\n\t\t\t\t\t\t\t\t<p class=\"info-item\"><b>联系方式：</b>{{ generateFarmIntro.companyInfo.legalPersonPhone }}</p>\r\n\t\t\t\t\t\t\t\t<p class=\"info-item clearfix\">\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t<b>主体唯一标识：</b><i style=\"font-style: normal;\">{{ generateFarmIntro.companyInfo.enterpriseCreditCode }}</i>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p class=\"info-item clearfix\" v-if=\"generateFarmIntro.farmIntro.landRightStartDate || generateFarmIntro.farmIntro.landRightEndDate\">\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t<b>土地承包期限：</b>\r\n\t\t\t\t\t\t\t\t\t\t<i style=\"font-style: normal;\" v-if=\"generateFarmIntro.farmIntro.landRightStartDate\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{ generateFarmIntro.farmIntro.landRightStartDate | dateFormat('yyyy.MM.dd') }}~{{\r\n\t\t\t\t\t\t\t\t\t\t\t\tgenerateFarmIntro.farmIntro.landRightEndDate | dateFormat('yyyy.MM.dd')\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t</i>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t<span class=\"icon-pic-wrap f-right\" v-if=\"generateFarmIntro.farmIntro.landRightImgUrl\" @click=\"showCompanyIcon = true\">\r\n\t\t\t\t\t\t\t\t\t\t<i class=\"iconfont icon-pic\"></i>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p class=\"info-item\">\r\n\t\t\t\t\t\t\t\t\t<b>基地位置与规模：</b>基地位于{{ generateFarmIntro.farmIntro.cityName }}{{ generateFarmIntro.farmIntro.countyName\r\n\t\t\t\t\t\t\t\t\t}}{{ generateFarmIntro.farmIntro.farmAddress }}\r\n\t\t\t\t\t\t\t\t\t<span v-if=\"generateFarmIntro.farmIntro.farmAcre\"\r\n\t\t\t\t\t\t\t\t\t\t>，占地{{ generateFarmIntro.farmIntro.farmAcre | toFloat }}{{ generateFarmIntro.farmIntro.farmAcreUnit | areaUnit }}。</span\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<div class=\"info-item\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"head-item\">\r\n\t\t\t\t\t\t\t\t\t\t<b>检测与认证</b>\r\n\t\t\t\t\t\t\t\t\t\t<i v-if=\"checkAuthCount\">共{{ checkAuthCount }}份</i>\r\n\t\t\t\t\t\t\t\t\t\t<i v-else>无</i>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"content-item\" v-if=\"farminfo.inspectVOS.length\">\r\n\t\t\t\t\t\t\t\t\t\t<ul class=\"content-lists\">\r\n\t\t\t\t\t\t\t\t\t\t\t<li class=\"list\" v-if=\"farminfo.inspectVOS.length\" v-for=\"(item, index) in farminfo.inspectVOS\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<el-tooltip class=\"item\" effect=\"dark\" :content=\"item.reportName\" placement=\"top-start\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"list-name\">{{ item.reportName }}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</el-tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"list-line\"></span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"list-des\" @click=\"openViews(item.inspectReportImages)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"iconfont icon-pic\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ item.inspectReportImages.length }}张\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-tab-pane>\r\n\t\t\t\t<!--<el-tab-pane label=\"经营情况\" name=\"busiCond\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclass=\"busi-cond\"\r\n\t\t\t\t\t\tv-loading=\"!generateFarmIntro\"\r\n\t\t\t\t\t\telement-loading-text=\"数据加载中...\"\r\n\t\t\t\t\t\telement-loading-spinner=\"el-icon-loading\"\r\n\t\t\t\t\t\telement-loading-background=\"rgba(0, 0, 0, 0)\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div class=\"busi-cond-container\" ref=\"busiCondContainer\" v-if=\"generateFarmIntro\">\r\n\t\t\t\t\t\t\t<div class=\"busi-cond-wrap\">\r\n\t\t\t\t\t\t\t\t&lt;!&ndash; 未来预计产量 &ndash;&gt;\r\n\t\t\t\t\t\t\t\t<div class=\"bar-item\">\r\n\t\t\t\t\t\t\t\t\t<el-select\r\n\t\t\t\t\t\t\t\t\t\tv-if=\"estimateGoodsSubjectList.length > 1\"\r\n\t\t\t\t\t\t\t\t\t\tv-model=\"estimateYieldSubject\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"请选择\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"subject-select\"\r\n\t\t\t\t\t\t\t\t\t\tref=\"cropSearch\"\r\n\t\t\t\t\t\t\t\t\t\t@change=\"loadEstimateYieldEchart\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<el-option v-for=\"(item, index) in estimateGoodsSubjectList\" :key=\"index\" :label=\"item.name\" :value=\"item.id\"> </el-option>\r\n\t\t\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t\t\t\t<div class=\"chart\" ref=\"estimateYield\"></div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t&lt;!&ndash; 近半年的实际产量 &ndash;&gt;\r\n\t\t\t\t\t\t\t\t<div class=\"bar-item\">\r\n\t\t\t\t\t\t\t\t\t&lt;!&ndash; v-if=\"goodsSubjectList.length > 1\" &ndash;&gt;\r\n\t\t\t\t\t\t\t\t\t<el-select\r\n\t\t\t\t\t\t\t\t\t\tv-if=\"goodsSubjectList.length > 1\"\r\n\t\t\t\t\t\t\t\t\t\tv-model=\"yieldSubject\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"请选择\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"subject-select\"\r\n\t\t\t\t\t\t\t\t\t\tref=\"cropSearch\"\r\n\t\t\t\t\t\t\t\t\t\t@change=\"loadYieldBar\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<el-option v-for=\"(item, index) in goodsSubjectList\" :key=\"index\" :label=\"item.name\" :value=\"item.id\"> </el-option>\r\n\t\t\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t\t\t\t<div class=\"chart\" ref=\"yield\"></div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t&lt;!&ndash; 近半年的销售额 &ndash;&gt;\r\n\t\t\t\t\t\t\t\t<div class=\"bar-item\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"chart\" ref=\"sales\"></div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-tab-pane>-->\r\n\t\t\t\t<el-tab-pane label=\"农事操作\" name=\"input\">\r\n\t\t\t\t\t<div class=\"farmword-container\" v-if=\"generateFarmIntro\">\r\n\t\t\t\t\t\t<div ref=\"farmRecordScroll\" class=\"farmword-wrap\">\r\n\t\t\t\t\t\t\t<farm-record :companyId=\"farminfo.companyVO.id\" :farmId=\"farmId\"></farm-record>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-tab-pane>\r\n\t\t\t</el-tabs>\r\n\t\t</div>\r\n\t\t<views :pics=\"[generateFarmIntro.farmIntro.landRightImgUrl || '']\" v-if=\"showCompanyIcon\" @viewerListen=\"showCompanyIcon = false\"></views>\r\n\t\t<views :pics=\"viewPics\" v-if=\"showViews\" @viewerListen=\"showViews = false\"></views>\r\n\t\t<!--未来预计产量-->\r\n\t\t<estimate-yield-model\r\n\t\t\tv-if=\"showEstimateYieldModel\"\r\n\t\t\t:show-model.sync=\"showEstimateYieldModel\"\r\n\t\t\t:goods-subject-unit=\"estimateGoodsSubjectUnit\"\r\n\t\t\t:estimate-yield-subject-model=\"estimateYieldSubjectModel\"\r\n\t\t\t:goods-subject-list-model=\"estimateGoodsSubjectList\"\r\n\t\t></estimate-yield-model>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport {deepCopy, _initBScroll, dateFormat, maxDecimalPlaces, unitTranslate} from '@/common/fn';\r\nimport farmRecord from '@/components/plotlist/farm-record';\r\n// 图片查看\r\nimport views from '@/components/common/viewPics';\r\nimport estimateYieldModel from '@/components/farmdetail/estimateYieldModel';\r\nimport farmIncome from '@/common/data/jiujiang-data.js'; // 九江 测试服正式服 需用的假数据\r\n// const inputs = [{inputDate: 1292083200000, missionInputVOList: [{agriResName: '哈哈哈', totalAmount: '200', specUnit: '公斤', productor: '厂家名称',},],},];\r\nconst color = ['#F0C87B', '#A6D889', '#DD90CB', '#9173FE', '#4DCBFF', '#1DE9B6', '#ca8622', '#bda29a', '#6e7074', '#546570', '#c4ccd3'];\r\nconst sales = [];\r\nconst xData = ['一月', '二月', '三月', '四月', '五月', '六月'];\r\nconst data = [220, 182, 191, 234, 290, 330];\r\nconst barData = xData.map((item, index) => {\r\n\treturn {\r\n\t\tname: item,\r\n\t\tvalue: data[index],\r\n\t\titemStyle: {\r\n\t\t\tcolor: color[index]\r\n\t\t}\r\n\t};\r\n});\r\nconst barOption = {\r\n\ttooltip: {\r\n\t\tshow: true,\r\n\t\ttrigger: 'item',\r\n\t\ttextStyle: {\r\n\t\t\tfontSize: 12,\r\n\t\t\tcolor: '#ffffff'\r\n\t\t}\r\n\t},\r\n\ttitle: {\r\n\t\ttext: '近半年销售额',\r\n\t\ttextStyle: {\r\n\t\t\tcolor: '#02E4EE',\r\n\t\t\tfontSize: 16,\r\n\t\t\tfontWeight: 'bold'\r\n\t\t},\r\n\t\tsubtextStyle: {\r\n\t\t\tcolor: '#6DC1CB',\r\n\t\t\tfontSize: 12,\r\n\t\t\tfontWeight: 400\r\n\t\t},\r\n\t\tleft: 'center',\r\n\t\tpadding: [17, 0, 0, 0],\r\n\t\titemGap: 10,\r\n\t\ttextVerticalAlign: 'top' // subtext: '单位：万元'\r\n\t},\r\n\tgrid: {\r\n\t\tshow: true,\r\n\t\ttop: 66,\r\n\t\tright: 24,\r\n\t\theight: 130,\r\n\t\twidth: 270,\r\n\t\tborderColor: '#0D394A'\r\n\t},\r\n\tcolor: color,\r\n\txAxis: {\r\n\t\tdata: xData,\r\n\t\tscale: true,\r\n\t\taxisLabel: {\r\n\t\t\ttextStyle: {\r\n\t\t\t\tcolor: '#6DC1CB',\r\n\t\t\t\tfontSize: 12\r\n\t\t\t},\r\n\t\t\talign: 'center'\r\n\t\t},\r\n\t\taxisTick: {\r\n\t\t\tshow: false\r\n\t\t},\r\n\t\taxisLine: {\r\n\t\t\tshow: true,\r\n\t\t\tlineStyle: {\r\n\t\t\t\tcolor: '#0D394A'\r\n\t\t\t}\r\n\t\t},\r\n\t\tz: 10\r\n\t},\r\n\tyAxis: {\r\n\t\tnameTextStyle: {\r\n\t\t\tfontSize: 12,\r\n\t\t\tcolor: '#6DC1CB',\r\n\t\t\tpadding: [0, 0, 0, 0]\r\n\t\t},\r\n\t\taxisLine: {\r\n\t\t\tshow: false,\r\n\t\t\tlineStyle: {\r\n\t\t\t\tcolor: '#0D394A'\r\n\t\t\t}\r\n\t\t},\r\n\t\taxisTick: {\r\n\t\t\tshow: false\r\n\t\t},\r\n\t\tsplitLine: {\r\n\t\t\tshow: true,\r\n\t\t\tlineStyle: {\r\n\t\t\t\tcolor: '#0D394A'\r\n\t\t\t}\r\n\t\t},\r\n\t\taxisLabel: {\r\n\t\t\ttextStyle: {\r\n\t\t\t\tcolor: '#6DC1CB',\r\n\t\t\t\tfontSize: 12\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tseries: [\r\n\t\t{\r\n\t\t\ttype: 'bar',\r\n\t\t\tbarWidth: 24,\r\n\t\t\tdata: barData\r\n\t\t}\r\n\t]\r\n};\r\n/* 冗余代码坐等测试批准删除🔪 */\r\nconst _farmIncome = (() => {\r\n\tconst _o = {};\r\n\tfor (const [key, value] of Object.entries(farmIncome)) {\r\n\t\tconst o = {};\r\n\t\tvalue.forEach(item => {\r\n\t\t\to[item.incomeDateStr] = item;\r\n\t\t});\r\n\t\t_o[key] = o;\r\n\t}\r\n\treturn _o;\r\n})();\r\n\r\nexport default {\r\n\tname: 'farmDetailsTabs',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// 销售额\r\n\t\t\tsales: null,\r\n\t\t\tsalesBar: deepCopy(barOption), // 产量\r\n\t\t\tyield: null,\r\n\t\t\tyieldBar: deepCopy(barOption),\r\n\t\t\tfarmRecordList: [],\r\n\t\t\testimateYield: null,\r\n\t\t\testimateYieldBar: deepCopy(barOption),\r\n\t\t\tgenerateFarmIntro: {\r\n\t\t\t\t// 基地信息\r\n\t\t\t\tfarmIntro: {}, // 公司信息\r\n\t\t\t\tcompanyInfo: {}, // 基地过去六个月的收入总计\r\n\t\t\t\tfarmIncomeVOS: [], // 基地过去六个月的采收总计\r\n\t\t\t\tgovPickVOList: [],\r\n\t\t\t\tbusinessCategoryList: []\r\n\t\t\t},\r\n\t\t\tfarmIntroContainer: null,\r\n\t\t\tfarmRecordScroll: null,\r\n\t\t\tshowCompanyIcon: false,\r\n\t\t\tviewPics: [],\r\n\t\t\tshowViews: false,\r\n\t\t\tgoodsSubjectUnit: null,\r\n\t\t\testimateGoodsSubjectUnit: null, // 实际产品大类列表\r\n\t\t\tgoodsSubjectList: [\r\n\t\t\t\t/* { name: '农业', id: 'agri' }, { name: '林业', id: 'forestry' }, { name: '畜牧业', id: 'animal' }, { name: '渔业', id: 'fishery' } */\r\n\t\t\t],\r\n\t\t\testimateGoodsSubjectList: [],\r\n\t\t\tyieldSubject: 'agri',\r\n\t\t\testimateYieldSubject: 'agri',\r\n\t\t\testimateYieldSubjectModel: 'agri',\r\n\t\t\tshowEstimateYieldModel: false,\r\n\t\t\tcurDate: null, // 经营主体 better-scroll实例\r\n\t\t\tbusiCondContainer: null\r\n\t\t};\r\n\t},\r\n\tprops: ['farminfo', 'farmId'],\r\n\tcomputed: {\r\n\t\tbusinessCategoryStr() {\r\n\t\t\t//农场经营类目\r\n\t\t\tif (\r\n\t\t\t\tthis.generateFarmIntro.businessCategoryList.length &&\r\n\t\t\t\tthis.generateFarmIntro.farmIntro.businessCategoryIdList &&\r\n\t\t\t\tthis.generateFarmIntro.farmIntro.businessCategoryIdList.length\r\n\t\t\t) {\r\n\t\t\t\tvar nowFarmCateList = this.generateFarmIntro.farmIntro.businessCategoryIdList;\r\n\t\t\t\tvar catelist = this.generateFarmIntro.businessCategoryList;\r\n\t\t\t\tvar catenames = [];\r\n\t\t\t\tcatelist.map(cate => {\r\n\t\t\t\t\tnowFarmCateList.includes(cate['id']) && catenames.push(cate['bizCategoryName']);\r\n\t\t\t\t});\r\n\t\t\t\treturn catenames.join('，');\r\n\t\t\t} else {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tthis.initData();\r\n\t},\r\n\tasync mounted() {\r\n\t\tconsole.log(this.generateFarmIntro);\r\n\t\tawait this.getCropSubject(); // tab1 获取实际作物大类列表\r\n\t\tthis.$nextTick(async () => {\r\n\t\t\tthis.farmIntroContainer = _initBScroll(this.$refs.farmIntroContainer, {\r\n\t\t\t\tscrollX: false,\r\n\t\t\t\tfreeScroll: false,\r\n\t\t\t\tclick: false\r\n\t\t\t});\r\n\t\t\tthis.farmRecordScroll = _initBScroll(this.$refs.farmRecordScroll, {\r\n\t\t\t\tscrollX: false,\r\n\t\t\t\tfreeScroll: false,\r\n\t\t\t\tclick: false\r\n\t\t\t});\r\n\t\t\t/*this.busiCondContainer = _initBScroll(this.$refs.busiCondContainer, {\r\n\t\t\t\tscrollX: false,\r\n\t\t\t\tfreeScroll: false,\r\n\t\t\t\tclick: false\r\n\t\t\t});*/\r\n\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\tinitData() {\r\n\t\t\t// 获取基地介绍\r\n\t\t\tthis.generateFarmIntro = {\r\n\t\t\t\t// 基地信息\r\n\t\t\t\tfarmIntro: this.farminfo.farmDetailVO, // 公司信息\r\n\t\t\t\tcompanyInfo: this.farminfo.companyVO || {}, // 基地过去六个月的收入总计\r\n\t\t\t\tfarmIncomeVOS: this.farminfo.farmIncomeVOS, // 基地过去六个月的采收总计\r\n\t\t\t\tgovPickVOList: this.farminfo.govPickVOList,\r\n\t\t\t\tbusinessCategoryList: this.farminfo.businessCategoryList\r\n\t\t\t};\r\n\t\t\tthis.checkAuthCount = this.farminfo.inspectVOS.length; // 检测认证数量\r\n\t\t\t// 农事记录 列表\r\n\t\t},\r\n\r\n\t\t// 初始化 tab2\r\n\t\tasync initTabWtwo() {\r\n\t\t\tawait this.processEstimateCropSubject(); // tab2 未来预计产量\r\n\t\t\tthis.loadSalesBar(); // tab2 近半年销售额\r\n\t\t\tawait this.loadYieldBar(this.yieldSubject); // tab2 实际产量\r\n\t\t\tthis.loadEstimateYieldEchart(this.estimateYieldSubject); // 初始化未来预计产量\r\n\t\t},\r\n\r\n\t\t// 监测大类是否需要需要换算单位\r\n\t\tcheckSubjectChangeUnit(subject) {\r\n\t\t\tconst mapping = {\r\n\t\t\t\tagri: true,\r\n\t\t\t\tforestry: false,\r\n\t\t\t\tanimal: false,\r\n\t\t\t\tfishery: true\r\n\t\t\t};\r\n\t\t\treturn mapping[subject];\r\n\t\t},\r\n\t\tyieldXAxis(mode, format = 'yyyy.MM') {\r\n\t\t\tconst curDateTimestamp = new Date(this.curDate).setDate(1);\r\n\t\t\tlet curM = new Date(curDateTimestamp).getMonth();\r\n\t\t\tconst xAxis = [];\r\n\t\t\tfor (let i = 0; i < 6; i++) {\r\n\t\t\t\txAxis.push(mode === 'add' ? dateFormat(new Date(curDateTimestamp).setMonth(curM++), format) : dateFormat(new Date(curDateTimestamp).setMonth(--curM), format));\r\n\t\t\t}\r\n\t\t\t// console.log(dateFormat(curDate.setMonth(11), 'yyyy.MM'));\r\n\t\t\treturn xAxis;\r\n\t\t},\r\n\r\n\t\t// 获取实际作物大类列表\r\n\t\tasync getCropSubject() {\r\n\t\t\treturn this.$ajax\r\n\t\t\t\t.post(this.$api.public.farmCropSubject, {\r\n\t\t\t\t\tfarmId: this.farmId\r\n\t\t\t\t})\r\n\t\t\t\t.then(({data: res}) => {\r\n\t\t\t\t\tthis.curDate = res.curDate;\r\n\t\t\t\t\tif (res.respCode === 0) {\r\n\t\t\t\t\t\tthis.goodsSubjectUnit = {};\r\n\t\t\t\t\t\tif (res.obj.list.length === 0) return false;\r\n\t\t\t\t\t\tthis.goodsSubjectList = res.obj.list.map(item => {\r\n\t\t\t\t\t\t\tthis.goodsSubjectUnit[item.cropSubjectIdentifier] =\r\n\t\t\t\t\t\t\t\titem.cropSubjectIdentifier === 'forestry' || item.cropSubjectIdentifier === 'animal' ? item.cropCategoryUnitAll : '吨';\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tname: item.cropSubjectNickname,\r\n\t\t\t\t\t\t\t\tid: item.cropSubjectIdentifier\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.yieldSubject = res.obj.list[0].cropSubjectIdentifier;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 获取预计作物大类列表\r\n\t\tgetEstimateCropSubject() {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tthis.$ajax\r\n\t\t\t\t\t.post(this.$api.public.getEstimateFarmCropSubject, {\r\n\t\t\t\t\t\tfarmId: this.farmId\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(({data: res}) => {\r\n\t\t\t\t\t\tif (res.respCode === 0) {\r\n\t\t\t\t\t\t\tresolve(res.obj);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\treject(err);\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 未来预计产量\r\n\t\tasync processEstimateCropSubject() {\r\n\t\t\tconst res = await this.getEstimateCropSubject();\r\n\t\t\tthis.estimateGoodsSubjectUnit = {};\r\n\t\t\tif (res.list.length === 0) return false;\r\n\t\t\tthis.estimateGoodsSubjectList = res.list.map(item => {\r\n\t\t\t\tthis.estimateGoodsSubjectUnit[item.cropSubjectIdentifier] =\r\n\t\t\t\t\titem.cropSubjectIdentifier === 'forestry' || item.cropSubjectIdentifier === 'animal' ? item.cropCategoryUnitAll : '吨';\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: item.cropSubjectNickname,\r\n\t\t\t\t\tid: item.cropSubjectIdentifier\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\tthis.estimateYieldSubject = res.list[0].cropSubjectIdentifier;\r\n\t\t},\r\n\r\n\t\t// 获取近半年的产量\r\n\t\tgetOutput(subjectIdentifier) {\r\n\t\t\treturn this.$ajax\r\n\t\t\t\t.post(this.$api.farmDetail.getOutputListByFarmId, {\r\n\t\t\t\t\tdateList: this.yieldXAxis('minus', 'yyyy-MM-dd').reverse(),\r\n\t\t\t\t\tfarmId: this.farmId,\r\n\t\t\t\t\tsubjectIdentifier\r\n\t\t\t\t})\r\n\t\t\t\t.then(({data: res}) => {\r\n\t\t\t\t\tif (res.respCode === 0) {\r\n\t\t\t\t\t\treturn res.obj;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 获取未来预计产量数据表\r\n\t\tgetEstimateYieldEchartsData() {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tthis.$ajax\r\n\t\t\t\t\t.post(this.$api.farmDetail.getPickForecastMonthByFarmId, {\r\n\t\t\t\t\t\tfarmId: this.$route.params.farmid,\r\n\t\t\t\t\t\tsubjectIdentifier: this.estimateYieldSubject\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(({data: res}) => {\r\n\t\t\t\t\t\tif (res.respCode === 0) {\r\n\t\t\t\t\t\t\tresolve(res.obj);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\treject(new Error(err));\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 近半年销售额\r\n\t\tloadSalesBar() {\r\n\t\t\tconst unit = '万元';\r\n\t\t\tconst fakeData = _farmIncome[this.generateFarmIntro.farmIntro.farmId];\r\n\t\t\tthis.salesBar.title.text = '近半年销售额';\r\n\t\t\tthis.salesBar.title.subtext = `单位：${unit}`;\r\n\t\t\tthis.salesBar.xAxis.data = this.generateFarmIntro.farmIncomeVOS.map(item => {\r\n\t\t\t\treturn dateFormat(item.incomeDate, 'yyyy.MM');\r\n\t\t\t});\r\n\t\t\tthis.salesBar.xAxis.axisLabel.formatter = v => v; // `${v.split('.')[1]}\\n${v.split('.')[0]}`;\r\n\t\t\tthis.salesBar.series[0].data = this.generateFarmIntro.farmIncomeVOS.map((item, index) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: dateFormat(item.incomeDate, 'yyyy.MM'),\r\n\t\t\t\t\tvalue: (() => {\r\n\t\t\t\t\t\tif (fakeData) {\r\n\t\t\t\t\t\t\treturn fakeData[item.incomeDateStr]\r\n\t\t\t\t\t\t\t\t? maxDecimalPlaces({\r\n\t\t\t\t\t\t\t\t\t\tvalue: fakeData[item.incomeDateStr].totalAmount / Math.pow(10, 4)\r\n\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t: 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn maxDecimalPlaces({\r\n\t\t\t\t\t\t\tvalue: item.totalAmount / Math.pow(10, 4)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})(),\r\n\t\t\t\t\titemStyle: {\r\n\t\t\t\t\t\tcolor: color[index]\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\tthis.salesBar.tooltip.formatter = v =>\r\n\t\t\t\t`${v.name}<br/>${\r\n\t\t\t\t\tunitTranslate({\r\n\t\t\t\t\t\tvalue: v.value,\r\n\t\t\t\t\t\tunit: '元',\r\n\t\t\t\t\t\tbase: 10000\r\n\t\t\t\t\t}).formatter\r\n\t\t\t\t}`;\r\n\t\t\tthis.salesBar.yAxis.axisLabel.formatter = v => unitTranslate({value: v}).formatter;\r\n\t\t\tthis.sales = this.$echarts.init(this.$refs.sales);\r\n\t\t\tthis.sales.setOption(this.salesBar);\r\n\t\t},\r\n\r\n\t\t// 初始化实际产量\r\n\t\tasync loadYieldBar(subjectIdentifier) {\r\n\t\t\tconst unit = this.goodsSubjectUnit[subjectIdentifier] || '吨';\r\n\t\t\tconst res = await this.getOutput(subjectIdentifier);\r\n\t\t\tthis.yieldBar.title.text = '近半年实际产量';\r\n\t\t\tthis.yieldBar.xAxis.data = res.map(item => {\r\n\t\t\t\treturn dateFormat(item.pickTime, 'yyyy.MM');\r\n\t\t\t});\r\n\t\t\tthis.yieldBar.yAxis.name = `单位：${unit}`;\r\n\t\t\tthis.yieldBar.xAxis.axisLabel.formatter = v => v;\r\n\t\t\tthis.yieldBar.series[0].data = res.map((item, index) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: dateFormat(item.pickTime, 'yyyy.MM'),\r\n\t\t\t\t\tvalue: maxDecimalPlaces({value: this.checkSubjectChangeUnit(subjectIdentifier) ? item.sumPickOutput / Math.pow(10, 3) : item.sumPickOutput}), // 公斤 - 吨\r\n\t\t\t\t\titemStyle: {\r\n\t\t\t\t\t\tcolor: color[index]\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\tthis.yieldBar.yAxis.axisLabel.formatter = v => unitTranslate({value: v}).formatter;\r\n\t\t\tthis.yieldBar.tooltip.formatter = v =>\r\n\t\t\t\t`${v.name}<br/>${\r\n\t\t\t\t\tunitTranslate({\r\n\t\t\t\t\t\tvalue: v.value,\r\n\t\t\t\t\t\tunit\r\n\t\t\t\t\t}).formatter\r\n\t\t\t\t}`;\r\n\t\t\t// console.log(this.$refs.yield);\r\n\t\t\tthis.yield = this.$echarts.init(this.$refs.yield);\r\n\t\t\tthis.yield.setOption(this.yieldBar);\r\n\t\t},\r\n\r\n\t\t// 初始化未来预计产量\r\n\t\tasync loadEstimateYieldEchart(subjectIdentifier) {\r\n\t\t\tconst res = await this.getEstimateYieldEchartsData();\r\n\t\t\tconst unit = this.estimateGoodsSubjectUnit[subjectIdentifier] || '吨';\r\n\t\t\tthis.estimateYieldBar.title.text = '未来预计产量';\r\n\t\t\tthis.estimateYieldBar.xAxis.data = res.total.map(item => {\r\n\t\t\t\treturn dateFormat(new Date(`${item.pickMonthStr}-01`), 'yyyy.MM');\r\n\t\t\t});\r\n\t\t\tthis.estimateYieldBar.series[0].data = res.total.map((item, index) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: dateFormat(new Date(`${item.pickMonthStr}-01`), 'yyyy.MM'),\r\n\t\t\t\t\tvalue: maxDecimalPlaces({value: this.checkSubjectChangeUnit(subjectIdentifier) ? item.sumTotal / Math.pow(10, 3) : item.sumTotal}), // 公斤 - 吨\r\n\t\t\t\t\titemStyle: {\r\n\t\t\t\t\t\tcolor: color[index]\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\tthis.estimateYieldBar.yAxis.name = `单位：${unit}`;\r\n\t\t\tthis.estimateYieldBar.xAxis.axisLabel.formatter = v => v;\r\n\t\t\tthis.estimateYieldBar.yAxis.axisLabel.formatter = v => unitTranslate({value: v}).formatter;\r\n\t\t\tthis.estimateYieldBar.tooltip.formatter = v =>\r\n\t\t\t\t`${v.name}<br/>${\r\n\t\t\t\t\tunitTranslate({\r\n\t\t\t\t\t\tvalue: v.value,\r\n\t\t\t\t\t\tunit\r\n\t\t\t\t\t}).formatter\r\n\t\t\t\t}`;\r\n\t\t\tthis.estimateYield = this.$echarts.init(this.$refs.estimateYield);\r\n\t\t\tthis.estimateYield.setOption(this.estimateYieldBar);\r\n\t\t\t// 检测与认证趋势图click事件\r\n\t\t\tthis.estimateYield.on('click', r => {\r\n\t\t\t\t// 触发父级关闭弹框等交互\r\n\t\t\t\tthis.$emit('closeAllDialogEv');\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t// 防止弹框重叠的情况\r\n\t\t\t\t\tthis.estimateYieldSubjectModel = this.estimateYieldSubject;\r\n\t\t\t\t\tthis.showEstimateYieldModel = true;\r\n\t\t\t\t}, 200);\r\n\t\t\t});\r\n\t\t},\r\n\t\thandleTabs(tar) {\r\n\t\t\t// tab2 初始化\r\n\t\t\t/*if (!this.initTabWtwo.init) {\r\n\t\t\t\tthis.initTabWtwo.init = true;\r\n\t\t\t\tthis.initTabWtwo();\r\n\t\t\t}*/\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tif (tar.name === 'busiCond') {\r\n\t\t\t\t\t//this.busiCondContainer.refresh();\r\n\t\t\t\t} else if (tar.name === 'input') {\r\n\t\t\t\t\tthis.farmRecordScroll.refresh();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\topenViews(p) {\r\n\t\t\tthis.showViews = true;\r\n\t\t\tthis.viewPics = p;\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tfarmRecord,\r\n\t\tviews,\r\n\t\testimateYieldModel\r\n\t}\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n@import '~styles/selectSkin_default';\r\n@import '~styles/tabsSkin_default';\r\n@import '~styles/scrollbarSkin_default';\r\n@import '~styles/tooltipSkin_default';\r\n@keyframes showani {\r\n\t0% {\r\n\t\topacity: 0;\r\n\t\tmargin-top: calc(50vh - 169px);\r\n\t}\r\n\t100% {\r\n\t\topacity: 1;\r\n\t\tmargin-top: calc(50vh - 269px);\r\n\t}\r\n}\r\n.tabs-container {\r\n\tposition: absolute;\r\n\topacity: 0;\r\n\tmargin-top: calc(50vh - 369px);\r\n\tmargin-left: 2px;\r\n\tanimation: showani 0.5s 0.3s;\r\n\tanimation-fill-mode: forwards;\r\n}\r\n.farm-intro {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbox-sizing: border-box;\r\n\tpadding: 15px 18px 10px;\r\n\t.farm-intro-container {\r\n\t\theight: 100%;\r\n\t\toverflow: hidden;\r\n\t\t.farm-intro-wrap {\r\n\t\t\t> .info-item {\r\n\t\t\t\tpadding: 15px;\r\n\t\t\t\tbackground-color: #061f36;\r\n\t\t\t\tfont-size: 14px;\r\n\t\t\t\tline-height: 24px;\r\n\t\t\t\tcolor: #6dc1cb;\r\n\t\t\t\tfont-weight: 400;\r\n\t\t\t\tb {\r\n\t\t\t\t\tcolor: #a1eff8;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t}\r\n\t\t\t\t.icon-pic-wrap {\r\n\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t\tcolor: #15e9fc;\r\n\t\t\t\t\t.iconfont {\r\n\t\t\t\t\t\tfont-size: 18px;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t+ .info-item {\r\n\t\t\t\t\tmargin-top: 10px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdiv {\r\n\t\t\t\t&.info-item {\r\n\t\t\t\t\tpadding: 0;\r\n\t\t\t\t\t.head-item {\r\n\t\t\t\t\t\theight: 42px;\r\n\t\t\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\t\t\tpadding: 0 16px;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.content-item {\r\n\t\t\t\t\t\tpadding: 0 15px;\r\n\t\t\t\t\t\tborder-top: 2px solid #044c64;\r\n\t\t\t\t\t\t.content-lists {\r\n\t\t\t\t\t\t\tpadding: 20px 0 15px;\r\n\t\t\t\t\t\t\t.list {\r\n\t\t\t\t\t\t\t\tmargin: 15px 0;\r\n\t\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\t\t\t&:first-child {\r\n\t\t\t\t\t\t\t\t\tmargin-top: 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t&:last-child {\r\n\t\t\t\t\t\t\t\t\tmargin-bottom: 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t.list-name {\r\n\t\t\t\t\t\t\t\t\tcolor: #6dc1cb;\r\n\t\t\t\t\t\t\t\t\tfont-size: 14px;\r\n\t\t\t\t\t\t\t\t\tline-height: 16px;\r\n\t\t\t\t\t\t\t\t\tmax-width: 150px;\r\n\t\t\t\t\t\t\t\t\tmin-width: 0;\r\n\t\t\t\t\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t\t\t\t\t\tmargin-top: -3px;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t.list-line {\r\n\t\t\t\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\t\t\t\theight: 2px;\r\n\t\t\t\t\t\t\t\t\tbackground: url('~@/assets/images/dotted-line-bg.png') repeat-x;\r\n\t\t\t\t\t\t\t\t\tmargin: 0 5px;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t.list-des {\r\n\t\t\t\t\t\t\t\t\tfont-size: 14px;\r\n\t\t\t\t\t\t\t\t\tcolor: #15e9fc;\r\n\t\t\t\t\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t\t\t\t\t\t.iconfont {\r\n\t\t\t\t\t\t\t\t\t\tfont-size: 20px;\r\n\t\t\t\t\t\t\t\t\t\tmargin-right: 0px;\r\n\t\t\t\t\t\t\t\t\t\tvertical-align: -2px;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n.busi-cond {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbox-sizing: border-box;\r\n\tpadding: 25px 18px 15px;\r\n\t.busi-cond-container {\r\n\t\theight: 100%;\r\n\t\toverflow: hidden;\r\n\t\t.busi-cond-wrap {\r\n\t\t\t& > .bar-item {\r\n\t\t\t\twidth: 346px;\r\n\t\t\t\theight: 228px;\r\n\t\t\t\tbackground-color: rgba(6, 31, 54, 1);\r\n\t\t\t\tposition: relative;\r\n\t\t\t\t+ .bar-item {\r\n\t\t\t\t\tmargin-top: 22px;\r\n\t\t\t\t}\r\n\t\t\t\t.subject-select {\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\ttop: 28px;\r\n\t\t\t\t\tright: 15px;\r\n\t\t\t\t\tmax-width: 120px;\r\n\t\t\t\t\theight: 30px;\r\n\t\t\t\t\tz-index: 10;\r\n\t\t\t\t\t/deep/ .el-input__inner {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\ttext-align: right;\r\n\t\t\t\t\t\tborder: 0 none !important;\r\n\t\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\t\tfont-size: 12px;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t&:hover {\r\n\t\t\t\t\t\tborder: 0 none;\r\n\t\t\t\t\t\t/deep/ .el-input__inner {\r\n\t\t\t\t\t\t\tborder: 0 none !important;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t.chart {\r\n\t\t\t\t\twidth: 346px;\r\n\t\t\t\t\theight: 228px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n.farmword-container {\r\n\twidth: 346px;\r\n\theight: calc(100% - 30px);\r\n\tmargin: 15px auto 15px;\r\n\tbox-sizing: border-box;\r\n\t.farmword-wrap {\r\n\t\theight: 100%;\r\n\t\toverflow: hidden;\r\n\t}\r\n}\r\n/deep/ .bscroll-vertical-scrollbar {\r\n\tright: 6px !important;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/recycle-bin/农场详情页-左列表-经营情况tab-归档.vue"],"mappings":"AAoJA","sourceRoot":""}
{"version":3,"file":"static/js/101.8e248f789c7ae9d1dccf.js","sources":["webpack:///src/components/sannongHeader.vue"],"sourcesContent":["<template>\r\n\t<div class=\"sannong-header\">\r\n\t\t<div class=\"logo-img\">\r\n\t\t\t<!-- <img src=\"~@/assets/images/common/szny-logo.png\" alt=\"\" /> -->\r\n\t\t\t<p>数字三农</p>\r\n\t\t</div>\r\n\t\t<div class=\"logo-nav\">\r\n\t\t\t<a href=\"http://nw.remember5.top/#/\" target=\"_self\"><span>首页</span></a>\r\n\t\t\t<a href=\"http://nw.remember5.top/#/beauty\" target=\"_self\"><span>美丽家园</span></a>\r\n\t\t\t<a href=\"http://nw.remember5.top/#/happiness\" target=\"_self\"><span>幸福乐园</span></a>\r\n\t\t\t<a href=\"javascript:void(0);\" @click=\"switchPage('overview')\"><span>绿色田园</span></a>\r\n\t\t</div>\r\n\t\t<div class=\"two-level-header\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li v-for=\"nav in navList.slice(0, 5)\" :key=\"nav.name\" :class=\"{active: nav.selected}\" @click=\"switchPage(nav.name)\">\r\n\t\t\t\t\t<span>{{ nav.text }}</span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport UserCenter from '@/components/common/user-center.vue';\r\nimport {getStorage} from '@/utils/storage';\r\nimport asyncRouter from '@/router/asyncRouter.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tnavList: [],\r\n\t\t\ttitlename: '',\r\n\t\t\tpoweredBy: '',\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tnavSplitNum() {\r\n\t\t\treturn Math.ceil(this.navList.length / 2) || 0;\r\n\t\t},\r\n\t},\r\n\tcreated() {\r\n\t\tthis.checkLogin();\r\n\t\tthis.initNavListfn();\r\n\t\tthis.refreshPage();\r\n\t},\r\n\tmethods: {\r\n\t\tinitNavListfn() {\r\n\t\t\tvar navs = [];\r\n\t\t\tlet someRouterMap = JSON.parse(JSON.stringify(asyncRouter[0]['children']));\r\n\t\t\tvar onlyShowList = ['planting', 'vegetables', 'fisheries', 'animalHusbandryManage', 'safeSupervise'];\r\n\t\t\tsomeRouterMap.forEach(item => {\r\n\t\t\t\tif (item['headerTitle'] && item['name'] !== 'overview' && onlyShowList.includes(item['name'])) {\r\n\t\t\t\t\tnavs.push({\r\n\t\t\t\t\t\tid: item['key'],\r\n\t\t\t\t\t\tname: item['name'],\r\n\t\t\t\t\t\tselected: false,\r\n\t\t\t\t\t\ttext: item['headerTitle'],\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t//总览\t种植业\t蔬菜管理\t渔业管理\t畜牧管理\t安全监管\r\n\t\t\t//256\t4096\t8192\t  16384\t      65536\t     1024\r\n\t\t\tconst flag = getStorage('govGovernmentSubjectVO').showMenuType;\r\n\t\t\tthis.navList = navs.filter(nav => {\r\n\t\t\t\treturn (flag & nav.id) === nav.id;\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 切换页面效果\r\n\t\tswitchPage(pagename) {\r\n\t\t\tif (pagename === 'animalHusbandryManage') return;\r\n\t\t\tthis.$router.push({name: pagename, query: {isSannongLink: '1'}});\r\n\t\t\tthis.navList.forEach(item => {\r\n\t\t\t\titem.selected = pagename === item.name;\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 刷新选中不跳\r\n\t\trefreshPage() {\r\n\t\t\tlet routerName = this.$route.name;\r\n\t\t\tvar twoMenuToMain = {\r\n\t\t\t\t//二级页面 映射到 一级页面\r\n\t\t\t\tplotlist: 'landSource',\r\n\t\t\t};\r\n\t\t\trouterName = twoMenuToMain[routerName] || routerName;\r\n\t\t\tthis.navList.forEach(item => {\r\n\t\t\t\titem.selected = routerName === item.name;\r\n\t\t\t});\r\n\t\t},\r\n\t\tcheckLogin() {\r\n\t\t\tif (!getStorage('accessToken')) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tconst userInfo = getStorage('govGovernmentUserVO');\r\n\t\t\tthis.getShowLogo(userInfo.governmentSubjectId);\r\n\t\t},\r\n\t\tdoLoginOut() {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.checkLogin();\r\n\t\t\t}, 500);\r\n\t\t},\r\n\t\t// show logo\r\n\t\tgetShowLogo(id) {\r\n\t\t\tthis.$ajax\r\n\t\t\t\t.post(this.$api.login.showLogo, {\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t})\r\n\t\t\t\t.then(({data: res}) => {\r\n\t\t\t\t\tconst obj = res.obj;\r\n\t\t\t\t\tif (res.respCode === 0) {\r\n\t\t\t\t\t\tthis.titlename = getStorage('govGovernmentSubjectVO').subjectName; // 获取区域名称\r\n\t\t\t\t\t\tthis.poweredBy = getStorage('govGovernmentSubjectVO').poweredBy;\r\n\t\t\t\t\t\t// this.isShowFlag = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tlogoClickfn() {\r\n\t\t\tif (!this.canShowLogoHref()) return;\r\n\t\t\t// window.location.href = 'http://10.121.226.94:81/ncny_fsj';\r\n\t\t\twindow.location.href = 'http://10.121.226.68/ypt';\r\n\t\t},\r\n\t\tcanShowLogoHref() {\r\n\t\t\t/*\r\n\t\t\t 头部点击后跳转链接的主体id\r\n\t\t\t 测试服：103 （上海）\r\n\t\t\t 正式服：49（闵行）、57（嘉定）、74（上海）\r\n\t\t\t */\r\n\t\t\tvar canshow = false;\r\n\t\t\tvar subjectvo = getStorage('govGovernmentSubjectVO');\r\n\t\t\tif (window.location.href.indexOf('govtest') !== -1) {\r\n\t\t\t\tif ([103].includes(subjectvo.id)) {\r\n\t\t\t\t\tcanshow = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//正式服\r\n\t\t\tif (window.location.href.indexOf('gov.snkoudai') !== -1) {\r\n\t\t\t\tif ([49, 57, 74].includes(subjectvo.id)) {\r\n\t\t\t\t\tcanshow = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (window.location.href.indexOf('192.168') !== -1 || window.location.href.indexOf('127.0') !== -1) {\r\n\t\t\t\tcanshow = true;\r\n\t\t\t}\r\n\t\t\treturn canshow;\r\n\t\t},\r\n\t},\r\n\tcomponents: {\r\n\t\tUserCenter,\r\n\t},\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.sannong-header {\r\n\tposition: relative;\r\n\twidth: 100%;\r\n\theight: 130px;\r\n\ttext-align: center;\r\n\tbackground: url('../assets/images/common/szny-title-bg.png') no-repeat top center;\r\n\tbackground-size: 100% 125px;\r\n\tbox-sizing: border-box;\r\n\t.logo-img {\r\n\t\tdisplay: inline-block;\r\n\t\tline-height: 60px;\r\n\t\tp {\r\n\t\t\tfont-size: 28px;\r\n\t\t\tline-height: 60px;\r\n\t\t\tcolor: #fff;\r\n\t\t\ttext-align: center;\r\n\t\t\tfont-weight: bold;\r\n\t\t}\r\n\t}\r\n\t.logo-nav {\r\n\t\twidth: 68%;\r\n\t\theight: 46px;\r\n\t\tposition: absolute;\r\n\t\ttop: 18px;\r\n\t\tleft: 50%;\r\n\t\ttransform: translateX(-50%);\r\n\t\ta {\r\n\t\t\tdisplay: inline-block;\r\n\t\t\twidth: 12.5%;\r\n\t\t\theight: 100%;\r\n\t\t\tline-height: 46px;\r\n\t\t\ttransform: skew(-24deg);\r\n\t\t\tcursor: pointer;\r\n\t\t\tspan {\r\n\t\t\t\tfont-size: 20px;\r\n\t\t\t\tfont-family: Microsoft YaHei;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\ttransform: skew(24deg);\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t}\r\n\t\t\t&:nth-child(1) {\r\n\t\t\t\tfloat: left;\r\n\t\t\t\ttransform: skew(24deg);\r\n\t\t\t\tspan {\r\n\t\t\t\t\ttransform: skew(-24deg);\r\n\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t&:nth-child(2) {\r\n\t\t\t\tfloat: left;\r\n\t\t\t\ttransform: skew(24deg);\r\n\t\t\t\tspan {\r\n\t\t\t\t\ttransform: skew(-24deg);\r\n\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t&:nth-child(3) {\r\n\t\t\t\tfloat: right;\r\n\t\t\t}\r\n\t\t\t&:nth-child(4) {\r\n\t\t\t\tfloat: right;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.two-level-header {\r\n\t\tposition: absolute;\r\n\t\twidth: 27%;\r\n\t\tbackground: content-box;\r\n\t\ttransform: translateX(-50%);\r\n\t\tbottom: 7px;\r\n\t\tleft: 50%;\r\n\t\tmargin-left: -3px;\r\n\t\tul {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-around;\r\n\t\t\talign-items: center;\r\n\t\t\tli {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\twidth: 20%;\r\n\t\t\t\tfont-size: 18px;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\theight: 50px;\r\n\t\t\t\tline-height: 50px;\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tposition: relative;\r\n\t\t\t\t&.active {\r\n\t\t\t\t\tcolor: #00fcff;\r\n\t\t\t\t\t&:after {\r\n\t\t\t\t\t\tcontent: '.';\r\n\t\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\tbottom: 6px;\r\n\t\t\t\t\t\tleft: 50%;\r\n\t\t\t\t\t\tmargin-left: -58px;\r\n\t\t\t\t\t\tfont-size: 0;\r\n\t\t\t\t\t\twidth: 116px;\r\n\t\t\t\t\t\theight: 2px;\r\n\t\t\t\t\t\tbackground: url('../assets/images/common/sannong-header-line.png') no-repeat top center;\r\n\t\t\t\t\t\tbackground-size: 67% auto;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n@media screen and (max-width: 1680px) {\r\n}\r\n@media screen and (min-width: 1900px) {\r\n}\r\n@media screen and (min-width: 3000px) {\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/sannongHeader.vue"],"mappings":"AA2BA","sourceRoot":""}
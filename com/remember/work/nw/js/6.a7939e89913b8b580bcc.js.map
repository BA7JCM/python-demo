{"version":3,"file":"static/js/6.a7939e89913b8b580bcc.js","sources":["webpack:///src/pages/safeSupervise/safeSupervise-left.vue"],"sourcesContent":["<template>\n\t<div class=\"safeSupervise-left\">\n\t\t<div class=\"cert-analysis-box\">\n\t\t\t<LayoutBox>\n\t\t\t\t<template slot=\"default\">\n\t\t\t\t\t<BoxItem title=\"绿色认证分析\" :showSubTitle=\"true\" @hand-sub-title=\"handSubTitle\">\n\t\t\t\t\t\t<div slot=\"default\" class=\"cert-analysis\">\n\t\t\t\t\t\t\t<CircleLine :options=\"options\"></CircleLine>\n\t\t\t\t\t\t\t<div class=\"type-cert-analysis-title\">\n\t\t\t\t\t\t\t\t各类别绿色认证分析\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"type-cert-analysis\">\n\t\t\t\t\t\t\t\t<div class=\"type-cert-analysis-box\">\n\t\t\t\t\t\t\t\t\t<div class=\"type-cert-analysis-item\">\n\t\t\t\t\t\t\t\t\t\t<img src=\"@/assets/images/safe-supervise/bg-stuff-cert.png\" />\n\t\t\t\t\t\t\t\t\t\t<div class=\"type-cert-analysis-text\">\n\t\t\t\t\t\t\t\t\t\t\t<span>粮油类认证率</span>\n\t\t\t\t\t\t\t\t\t\t\t<span>{{ certAnalysis.grainAndOilCertifiRate ? certAnalysis.grainAndOilCertifiRate : 0 }}%</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"type-cert-analysis-item\">\n\t\t\t\t\t\t\t\t\t\t<img src=\"@/assets/images/safe-supervise/bg-fruits-cert.png\" />\n\t\t\t\t\t\t\t\t\t\t<div class=\"type-cert-analysis-text\">\n\t\t\t\t\t\t\t\t\t\t\t<span>鲜果类认证率</span>\n\t\t\t\t\t\t\t\t\t\t\t<span>{{ certAnalysis.fruitCertifiRate ? certAnalysis.fruitCertifiRate : 0 }}%</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"type-cert-analysis-item\">\n\t\t\t\t\t\t\t\t\t\t<img src=\"@/assets/images/safe-supervise/bg-waterm-cert.png\" />\n\t\t\t\t\t\t\t\t\t\t<div class=\"type-cert-analysis-text\">\n\t\t\t\t\t\t\t\t\t\t\t<span>西甜瓜类认证率</span>\n\t\t\t\t\t\t\t\t\t\t\t<span>{{ certAnalysis.melonCertifiRate ? certAnalysis.melonCertifiRate : 0 }}%</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"type-cert-analysis-box\">\n\t\t\t\t\t\t\t\t\t<div class=\"type-cert-analysis-item\">\n\t\t\t\t\t\t\t\t\t\t<img src=\"@/assets/images/safe-supervise/bg-vege-cert.png\" />\n\t\t\t\t\t\t\t\t\t\t<div class=\"type-cert-analysis-text\">\n\t\t\t\t\t\t\t\t\t\t\t<span>蔬菜类认证率</span>\n\t\t\t\t\t\t\t\t\t\t\t<span>{{ certAnalysis.vegetablesCertifiRate ? certAnalysis.vegetablesCertifiRate : 0 }}%</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"type-cert-analysis-item\">\n\t\t\t\t\t\t\t\t\t\t<img src=\"@/assets/images/safe-supervise/bg-breed-cert.png\" />\n\t\t\t\t\t\t\t\t\t\t<div class=\"type-cert-analysis-text\">\n\t\t\t\t\t\t\t\t\t\t\t<span>养殖类认证率</span>\n\t\t\t\t\t\t\t\t\t\t\t<span>{{ certAnalysis.breedCertifiRate ? certAnalysis.breedCertifiRate : 0 }}%</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"type-cert-analysis-item\">\n\t\t\t\t\t\t\t\t\t\t<!-- 占位布局 -->\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</BoxItem>\n\t\t\t\t</template>\n\t\t\t</LayoutBox>\n\t\t</div>\n\n\t\t<div class=\"area-cert\">\n\t\t\t<LayoutBox>\n\t\t\t\t<div class=\"area-cert-box\" slot=\"default\">\n\t\t\t\t\t<BoxItem title=\"各区绿色认证率\">\n\t\t\t\t\t\t<template slot=\"default\">\n\t\t\t\t\t\t\t<div class=\"area-cert-chart\" v-loading=\"loading\" element-loading-spinner=\"iconfont icon-loading1\" element-loading-background=\"rgba(0, 0, 0, 0)\">\n\t\t\t\t\t\t\t\t<div class=\"echart-container\" ref=\"EContainer\" v-show=\"hasData\"></div>\n\t\t\t\t\t\t\t\t<div class=\"no-data\" v-show=\"!hasData\"><span>暂无数据</span></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</BoxItem>\n\t\t\t\t</div>\n\t\t\t</LayoutBox>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport CircleLine from '@/components/common/circle-line.vue';\nimport LayoutBox from '@/components/common/LayoutBox.vue';\nimport BoxItem from '@/components/common/BoxItem.vue';\n\nimport {areaLevelCorAreaId, maxDecimalPlaces} from '@/common/fn';\n\nconst barOption = {\n\tgrid: {\n\t\tshow: true,\n\t\tborderColor: '#0D394A',\n\t\ttop: 40,\n\t\tbottom: 40,\n\t\tleft: 45,\n\t\tright: 20\n\t},\n\ttooltip: {\n\t\tshow: true,\n\t\ttrigger: 'item',\n\t\tbackgroundColor: '#043250',\n\t\tpadding: [13, 14, 13, 11],\n\t\ttextStyle: {\n\t\t\tfontSize: 12,\n\t\t\tcolor: '#9ED2D8'\n\t\t},\n\t\tformatter(a) {\n\t\t\treturn `${a.name}：${a.value}%`;\n\t\t}\n\t},\n\t/*  dataZoom: [\n    /!* {\n      show: false,\n      start: 0,\n      end: 90\n    },\n    {\n      type: 'inside',\n      xAxisIndex: [0],\n      start: 0,\n      end: 90\n    } *!/\n  ], */\n\txAxis: {\n\t\tdata: [],\n\t\taxisLabel: {\n\t\t\tinterval: 0,\n\t\t\ttextStyle: {\n\t\t\t\tcolor: '#6EC2CB',\n\t\t\t\tfontSize: 12,\n\t\t\t\tlineHeight: 14\n\t\t\t\t// width: 30\n\t\t\t},\n\t\t\talign: 'center'\n\t\t\t// rotate: -40,\n\t\t\t// margin: 25,\n\t\t\t// formatter(name) {\n\t\t\t// \treturn name.split('').join('\\n');\n\t\t\t// }\n\t\t},\n\t\taxisTick: {\n\t\t\tshow: false\n\t\t},\n\t\taxisLine: {\n\t\t\tshow: true,\n\t\t\tlineStyle: {\n\t\t\t\t// color: '#0D394A'\n\t\t\t\tcolor: 'rgba(109,193,203,0.2)'\n\t\t\t}\n\t\t}\n\t},\n\tyAxis: {\n\t\tname: '绿色认证率（%）',\n\t\tnameTextStyle: {\n\t\t\tfontSize: 12,\n\t\t\tcolor: '#6DC1CB',\n\t\t\tpadding: [0, 0, 3, 50]\n\t\t},\n\t\taxisLine: {\n\t\t\tshow: false,\n\t\t\tlineStyle: {\n\t\t\t\tcolor: '#0D394A'\n\t\t\t}\n\t\t},\n\t\taxisTick: {\n\t\t\tshow: false\n\t\t},\n\t\tsplitLine: {\n\t\t\tshow: true,\n\t\t\tlineStyle: {\n\t\t\t\t// color: '#0D394A'\n\t\t\t\tcolor: 'rgba(109,193,203,0.2)'\n\t\t\t}\n\t\t},\n\t\taxisLabel: {\n\t\t\ttextStyle: {\n\t\t\t\tcolor: '#6DC1CB',\n\t\t\t\tfontSize: 12\n\t\t\t}\n\t\t}\n\t},\n\tseries: [\n\t\t{\n\t\t\ttype: 'bar',\n\t\t\tbarWidth: '40%',\n\t\t\tbarMinHeight: 5,\n\t\t\tdata: [],\n\t\t\tlabel: {\n\t\t\t\tshow: true,\n\t\t\t\tposition: 'top',\n\t\t\t\tcolor: '#FEEB48',\n\t\t\t\tfontSize: 12,\n\t\t\t\tformatter: params => {\n\t\t\t\t\treturn parseFloat(params.value.toFixed(2));\n\t\t\t\t}\n\t\t\t},\n\t\t\tz: 10,\n\t\t\titemStyle: {\n\t\t\t\tcolor: {\n\t\t\t\t\ttype: 'linear',\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0,\n\t\t\t\t\tx2: 0,\n\t\t\t\t\ty2: 1,\n\t\t\t\t\tcolorStops: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toffset: 0,\n\t\t\t\t\t\t\tcolor: '#00F6FF' // 0% 处的颜色\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toffset: 1,\n\t\t\t\t\t\t\tcolor: '#01C1FF' // 100% 处的颜色\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tglobal: false // 缺省为 false\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t]\n};\n\nexport default {\n\tprops: {\n\t\tfarmAreaInfo: {\n\t\t\ttype: Object,\n\t\t\tdefault() {\n\t\t\t\treturn areaLevelCorAreaId();\n\t\t\t}\n\t\t},\n\t\tareaData: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tchartInstance: null,\n\t\t\thasData: true,\n\t\t\tloading: true,\n\t\t\toptions: {\n\t\t\t\tleftNum: '',\n\t\t\t\trightNum: '',\n\t\t\t\tcenterNum: '',\n\t\t\t\tleftTitle: '绿色认证面积',\n\t\t\t\trightTitle: '农用地面积',\n\t\t\t\tcenterTitle: '绿色认证率'\n\t\t\t},\n\t\t\tcertAnalysis: {\n\t\t\t\tbreedCertifiRate: '',\n\t\t\t\tfruitCertifiRate: '',\n\t\t\t\tgrainAndOilCertifiRate: '',\n\t\t\t\tprocessedProductsCertifiRate: '',\n\t\t\t\tvegetablesCertifiRate: '',\n\t\t\t\tmelonCertifiRate: ''\n\t\t\t}\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.getGreenCertifiByArea();\n\t\tthis.getAllCateByArea();\n\t},\n\tmounted() {\n\t\tthis.$nextTick(() => {\n\t\t\tthis.initMoudle();\n\t\t});\n\t\twindow.addEventListener('resize', this.adaptationChart);\n\t\tthis.$once('hook:beforeDestroy', function() {\n\t\t\twindow.removeEventListener('resize', this.adaptationChart);\n\t\t});\n\t},\n\tmethods: {\n\t\tinitMoudle() {\n\t\t\tthis.refreshChart(this._initEcharts(this.$refs.EContainer, barOption));\n\t\t},\n\t\trefreshRender() {\n\t\t\tif (this.chartInstance) {\n\t\t\t\tthis.chartInstance.resize();\n\t\t\t}\n\t\t},\n\t\thandSubTitle() {\n\t\t\tthis.$router.push('/greenCertList');\n\t\t},\n\t\t// 绿色认证分析柱状图数据\n\t\tgetListGreenCertifiRate(ids) {\n\t\t\treturn this.$ajax\n\t\t\t\t.post(this.$api.safeSupervise.listGreenCertifiRate, {\n\t\t\t\t\tfarmAreaId: ids,\n\t\t\t\t\tfarmAreaType: 3\n\t\t\t\t})\n\t\t\t\t.then(({data}) => {\n\t\t\t\t\tif (data.respCode === 0) {\n\t\t\t\t\t\treturn data.obj;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(e => {\n\t\t\t\t\tconsole.log(new Error('获取在田种类统计error'), e);\n\t\t\t\t});\n\t\t},\n\t\t// 绿色认证相关\n\t\tasync getGreenCertifiByArea() {\n\t\t\tconst res = await this.$ajax.post(this.$api.safeSupervise.getGreenCertifiByArea, {\n\t\t\t\tfarmAreaId: [this.farmAreaInfo.farmAreaId],\n\t\t\t\tfarmAreaType: this.farmAreaInfo.farmAreaType\n\t\t\t});\n\t\t\tif (res.data.respCode === 0) {\n\t\t\t\tthis.options.leftNum = res.data.obj.greenCertifiArea ? res.data.obj.greenCertifiArea + '万亩' : '0万亩';\n\t\t\t\tthis.options.centerNum = res.data.obj.greenCertifiRate ? res.data.obj.greenCertifiRate + '%' : '0%';\n\t\t\t\tthis.options.rightNum = res.data.obj.productionLandArea ? res.data.obj.productionLandArea + '万亩' : '0万亩';\n\t\t\t}\n\t\t},\n\t\t// 各绿色认证分析\n\t\tasync getAllCateByArea() {\n\t\t\tconst res = await this.$ajax.post(this.$api.safeSupervise.allCateByArea, {\n\t\t\t\tfarmAreaId: [this.farmAreaInfo.farmAreaId],\n\t\t\t\tfarmAreaType: this.farmAreaInfo.farmAreaType\n\t\t\t});\n\t\t\tif (res.data.respCode === 0) {\n\t\t\t\tthis.certAnalysis = res.data.obj;\n\t\t\t}\n\t\t},\n\t\t_initEcharts(el, option) {\n\t\t\tconst chart = this.$echarts.init(el);\n\t\t\tchart.setOption(option);\n\t\t\treturn chart;\n\t\t},\n\t\tasync refreshChart(chartInstance) {\n\t\t\tlet ids = [];\n\t\t\tthis.areaData.forEach(ele => {\n\t\t\t\tids.push(ele.id);\n\t\t\t});\n\n\t\t\tconst res = await this.getListGreenCertifiRate(ids);\n\t\t\t// if (res.length === 0) {\n\t\t\t// \tthis.hasData = false;\n\t\t\t// \tthis.loading = false;\n\t\t\t// \treturn;\n\t\t\t// }\n\t\t\t// 平铺\n\t\t\tlet tiledArr = [];\n\t\t\tif (res.length === 0) {\n\t\t\t\tthis.areaData.forEach(ele => {\n\t\t\t\t\ttiledArr.push({greenCertifiRate: 0});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.areaData.forEach(ele => {\n\t\t\t\t\tlet filterTemp = res.filter(i => i.areaId === ele.id);\n\t\t\t\t\tif (filterTemp.length) {\n\t\t\t\t\t\ttiledArr.push(filterTemp[0]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar greenCertifiRateList = tiledArr.map(info => {\n\t\t\t\tif (info.greenCertifiRate > 0) {\n\t\t\t\t\treturn parseFloat(info.greenCertifiRate.toFixed(2));\n\t\t\t\t} else {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst chartOpts = {\n\t\t\t\txAxis: {\n\t\t\t\t\tdata: this.areaData.map(info => info.areaName)\n\t\t\t\t},\n\t\t\t\tseries: [\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: greenCertifiRateList\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\t\t\tthis.chartInstance = chartInstance;\n\t\t\tchartInstance.setOption(chartOpts);\n\t\t\tthis.adaptationChart();\n\t\t\tthis.hasData = true;\n\t\t\tthis.loading = false;\n\t\t},\n\t\tadaptationChart() {\n\t\t\tconst htmlWidth = document.documentElement.clientWidth || document.body.clientWidth;\n\t\t\tconst opts = {\n\t\t\t\tseries: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: {\n\t\t\t\t\t\t\tfontSize: 12\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\t\t\tif (htmlWidth > 3000) {\n\t\t\t\topts.series[0].label.fontSize = 18;\n\t\t\t\tif (this.chartInstance) {\n\t\t\t\t\tthis.chartInstance.setOption(opts);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\topts.series[0].label.fontSize = 12;\n\t\t\t\tif (this.chartInstance) {\n\t\t\t\t\tthis.chartInstance.setOption(opts);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tcomponents: {\n\t\tCircleLine,\n\t\tLayoutBox,\n\t\tBoxItem\n\t}\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.safeSupervise-left {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tz-index: 100;\n\tdisplay: flex;\n\tflex-direction: column;\n\twidth: 21.875vw;\n\tmin-width: 400px;\n\tmax-width: calc(420px * 2);\n\theight: 100%;\n\tmin-height: 770px;\n}\n.cert-analysis-box {\n\twidth: 100%;\n\theight: 62%;\n\tbox-sizing: border-box;\n\n\t.cert-analysis {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tpadding: 0 20px 0;\n\t\tbox-sizing: border-box;\n\t}\n\n\t.type-cert-analysis-title {\n\t\twidth: 100%;\n\t\theight: 35px;\n\t\tmargin-top: 15px;\n\t\tbackground-color: #042940;\n\t\tfont-size: 16px;\n\t\tcolor: #67bbcd;\n\t\ttext-align: center;\n\t\tfont-weight: bold;\n\t\tline-height: 35px;\n\t}\n\n\t.type-cert-analysis {\n\t\tflex: 1;\n\t\theight: 100%;\n\t\tdisplay: flex;\n\n\t\t.type-cert-analysis-box {\n\t\t\tflex: 1;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\talign-items: center;\n\t\t\tjustify-content: space-around;\n\t\t\tpadding-top: 5px;\n\n\t\t\t.type-cert-analysis-item {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\theight: 44px;\n\t\t\t\twidth: 155px;\n\t\t\t\t// width: 100%;\n\t\t\t\t// margin-bottom: 15px;\n\n\t\t\t\t.type-cert-analysis-text {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\talign-items: flex-start;\n\t\t\t\t\tmargin-left: 10px;\n\n\t\t\t\t\tspan:nth-child(1) {\n\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\tfont-family: Microsoft YaHei;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\tcolor: #71ccde;\n\t\t\t\t\t}\n\t\t\t\t\tspan:nth-child(2) {\n\t\t\t\t\t\tmargin-top: 10px;\n\t\t\t\t\t\tfont-size: 18px;\n\t\t\t\t\t\tfont-family: Microsoft YaHei;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\tcolor: #feeb48;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.type-cert-analysis-item:last-child {\n\t\t\t\tmargin-bottom: 0;\n\t\t\t}\n\t\t}\n\t}\n}\n\n.area-cert {\n\theight: 38%;\n\t// flex: 3;\n\tmargin-top: 15px;\n\n\t.area-cert-box {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\theight: 100%;\n\t\tbox-sizing: border-box;\n\n\t\t.area-cert-chart {\n\t\t\tflex: 1;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\n\t\t\t.echart-container {\n\t\t\t\t// width: 100%;\n\t\t\t\theight: 100%;\n\t\t\t}\n\t\t\t.no-data {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tcolor: #00f6ff;\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\t\t}\n\t}\n\n\t/deep/ .el-loading-spinner {\n\t\toverflow: hidden;\n\t\tmargin-top: -45px;\n\t\t.iconfont {\n\t\t\tdisplay: block;\n\t\t\tfont-size: 40px;\n\t\t\tcolor: #00f6ff;\n\t\t\tanimation: loading 1.25s linear infinite;\n\t\t\tmargin-top: 24px;\n\t\t\tmargin-left: 8px;\n\t\t}\n\t}\n}\n/* 32:9超宽屏幕适配 */\n@media screen and (min-width: 3000px) {\n\t.cert-analysis-box .type-cert-analysis .type-cert-analysis-box .type-cert-analysis-item {\n\t\twidth: 50%;\n\t}\n\t.cert-analysis-box .type-cert-analysis .type-cert-analysis-box .type-cert-analysis-item .type-cert-analysis-text span[data-v-40a2b6c8]:nth-child(1) {\n\t\tfont-size: 18px;\n\t}\n\t.cert-analysis-box .type-cert-analysis .type-cert-analysis-box .type-cert-analysis-item .type-cert-analysis-text span[data-v-40a2b6c8]:nth-child(2) {\n\t\tfont-size: 20px;\n\t}\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/safeSupervise/safeSupervise-left.vue"],"mappings":"AAqFA","sourceRoot":""}
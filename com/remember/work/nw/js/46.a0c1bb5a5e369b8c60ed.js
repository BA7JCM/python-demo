webpackJsonp([46],{a0rM:function(e,t){},wjt2:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("xk5x"),o=r("VCTt"),n=r("VKKs");var i={title:{show:!1,text:"暂无数据",textStyle:{fontSize:12,color:"#6DC1CB"},left:"center",top:"center"},grid:{show:!0,borderColor:"#0D394A",bottom:40,top:40},tooltip:{show:!0,trigger:"axis",formatter:function(e){var t=e.map(function(e){return null!==e.value?e.seriesName+"："+Object(o.j)({value:e.value})+"元/公斤":""});return e[0].axisValue+"<br/>"+t.join("<br />")},backgroundColor:"#043250",padding:[13,14,13,11],textStyle:{fontSize:12,color:"#9ED2D8"}},legend:{show:!0,type:"plain",textStyle:{color:"#6DC1CB",fontSize:12},backgroundColor:"rgba(255, 255, 255, 0)",top:3,right:"8.5%",itemWidth:30,itemHeight:10,height:20,data:[{name:(new Date).getFullYear()-1+"年",icon:"image://"+r("Zg+v")},{name:(new Date).getFullYear()+"年",icon:"image://"+r("IG9e")}]},xAxis:{data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],boundaryGap:!1,axisLabel:{textStyle:{color:"#6DC1CB",fontSize:12},align:"center"},axisTick:{show:!1},axisLine:{show:!0,lineStyle:{color:"rgba(109,193,203,0.2)"}},z:10},yAxis:{name:"(元/公斤)",nameTextStyle:{fontSize:12,color:"#6DC1CB",padding:[4,8,5,35]},axisLine:{show:!1,lineStyle:{color:"#0D394A"}},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"rgba(109,193,203,0.2)"}},axisLabel:{textStyle:{color:"#6DC1CB",fontSize:12}}},series:[{data:[],type:"line",smooth:!0,symbolSize:0,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(0, 162, 255, 0.5)"},{offset:1,color:"rgba(60, 105, 217, 0)"}],global:!1}},lineStyle:{color:"#00FFFF"}},{data:[],type:"line",smooth:!0,symbolSize:0,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(212, 167, 84, 0.5)"},{offset:1,color:"rgba(212, 167, 84, 0)"}],global:!1}},lineStyle:{color:"#D4A452"}}]},c=Object(n.b)("govGovernmentSubjectVO"),l={name:"price-trend-6",data:function(){return{priceTrendChart:null,priceLoading:!1,vegetableVariety:[],vegetable:null}},props:{farmAreaInfo:{type:Object,default:function(){return Object(o.b)()}}},mounted:function(){var e=this;this.$nextTick(function(){e.initMoudle()})},methods:{initMoudle:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.priceTrendChart=t._initEcharts(t.eContainerRef,i),e.next=3,t.getCropList();case 3:t.getCropPriceTable(t.vegetable);case 4:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(o,n){try{var i=t[o](n),c=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(c).then(function(e){a("next",e)},function(e){a("throw",e)});e(c)}("next")})})()},refreshRender:function(){this.priceTrendChart&&this.priceTrendChart.resize()},_initEcharts:function(e,t){var r=this.$echarts.init(e);return r.setOption(t),r},checkCropReload:function(){var e=Object(n.b)("cropTime");if(!e)return!0;e=Number(e);var t=new Date(e).getMonth();return new Date(e).setMonth(t+1,1)>=(new Date).getTime()},getCropList:function(){var e=this;return this.priceLoading=!0,new Promise(function(t,r){var a=Object(n.b)("vegetableVariety");if(e.checkCropReload()&&a&&a.length)return e.vegetableVariety=a.map(function(e){return{crop:e.ncCropName,cropId:e.id}}),e.vegetable=a[0].id,t();e.$ajax.post(e.$api.market.cropList,{areaId:c.provinceId,keyword:"",pageNo:1,pageSize:1e4}).then(function(r){var a=r.data,o=a.obj;0===a.respCode?(Object(n.c)("cropTime",a.curDate),Object(n.c)("vegetableVariety",o.list),e.vegetableVariety=o.list.map(function(e){return{crop:e.ncCropName,cropId:e.id}}),e.vegetable=e.vegetableVariety[0]?e.vegetableVariety[0].cropId:null,t(!0)):t(!1)})})},selectCrop:function(e){var t=this;this.priceLoading=!0,this.priceTrendChart.setOption({series:[{data:[]},{data:[]}]}),this.getCropPriceTable(e),this.$nextTick(function(){t.$refs.cropSearch.blur()})},getCropPriceTable:function(e){var t=this,r=(new Date).getFullYear(),a=(new Date).getMonth(),n=Object(o.h)({startTime:r+"-01-01",howMonth:a}),i=r-1,l=Object(o.h)({startTime:i+"-01-01"});this.$ajax.all([this.$ajax.post(this.$api.market.cropPrice,{dateListStr:n,nccropId:e,proviceId:c.provinceId}),this.$ajax.post(this.$api.market.cropPrice,{dateListStr:l,nccropId:e,proviceId:c.provinceId})]).then(function(e,a){if(e){var n=e[0].data,c=e[1].data,l=0,s=0;0===n.respCode&&n.obj.forEach(function(e){l+=e.price}),0===c.respCode&&c.obj.forEach(function(e){s+=e.price});var p=0!==l||0!==s;t.priceTrendChart.setOption({tooltip:{show:p},title:{show:!p},yAxis:{show:!0},xAxis:{show:p},series:p?[{name:Object(o.c)(i+"-01-01","yyyy年"),data:0===c.respCode?c.obj.map(function(e){return{name:e.ncCropName,value:e.price}}):[],symbol:"circle",symbolSize:2,color:"#00F6FF"},{name:Object(o.c)(r+"-01-01","yyyy年"),data:0===n.respCode?n.obj.map(function(e){return{name:e.ncCropName,value:e.price}}):[],symbol:"circle",symbolSize:2,color:"#FBC02D"}]:[{data:[]},{data:[]}]}),t.priceLoading=!1}})}},computed:{eContainerRef:function(){return this.$refs.EContainer}},components:{areaPanel:a.default}},s=r("W5g0");var p=function(e){r("a0rM")},u=Object(s.a)(l,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"gov-area-panel"},[r("area-panel",{attrs:{"area-title":"价格走势"}},[r("div",{staticClass:"head-sub-title",attrs:{slot:"subTitle"},slot:"subTitle"},[r("el-select",{ref:"cropSearch",staticClass:"vegetable-select",attrs:{placeholder:"请选择",filterable:""},on:{change:e.selectCrop},model:{value:e.vegetable,callback:function(t){e.vegetable=t},expression:"vegetable"}},e._l(e.vegetableVariety,function(e,t){return r("el-option",{key:t,attrs:{label:e.crop,value:e.cropId}})}),1)],1),e._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.priceLoading,expression:"priceLoading"}],ref:"EContainer",staticClass:"echart-container",attrs:{slot:"panelMain","element-loading-spinner":"iconfont icon-loading1","element-loading-background":"rgba(0, 0, 0, 0.2)"},slot:"panelMain"})])],1)},[],!1,p,"data-v-008853aa",null);t.default=u.exports}});
//# sourceMappingURL=46.a0c1bb5a5e369b8c60ed.js.map
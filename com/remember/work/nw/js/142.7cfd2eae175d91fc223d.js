webpackJsonp([142,63],{EEh8:function(t,e){t.exports="https://snkoudai.oss-cn-hangzhou.aliyuncs.com/goverment/static/img/arrow.e222673.png"},"G+AQ":function(t,e){},UvDY:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAB8ElEQVRIid3VzYuOYRQG8J8Z3nxsbJSvUpqiYccslLJgykpjMWq2KJQhJoaVnW9jMkTyF5gZH7HwVchyiExGamJD/gSZemNxnyfv+8w9T40dp+7Oec65r+vq/njOzb9uc4qg9+VYrl5DV4xNWI4pfMVb3MX9yDXZ0JYOMLdCfCfOoy0jujZGDybRjzs5kpZMrhXnAtCGCRxFO+bHaI/cRMwZDUxrmSy3gjM4hh/ow03Uo/YEC7EZH3EFB3AJx2NOf5VAd5BPYQeeleqdpe86ruITHobIGEaKCY1bVMNAxH0Z8ip7Km0ZDAbXNIFurMQHXJ8FeWE3ArsCu3ICXeFv+bPns7F6YBu5mgQ6wj/+C/LCHoXfmBNYGv7zDODclS5bgV2WAxV/468ZwLvDf6kQqJUTjQLfw6/OABfjdMT9mXphq0pcTQLvw2/PAE9hCV5huEJgW/jXOYF74feY/sv3SLfkUAV5K/aWuJoEhqUuuR77MwJdeFchsC+w3zSssnzIfREPYGtD7bnUCmayTlyO+Ah+5gTgNi5Kt+GBtJKq69mCgyFewwWlM8qBT0gNbIHUMsZxGGswD4uwLnLjGAryazhZJsu16zp68QJnpd4/WLGKySAeyRWrXrRRaZu6pddtg9TISAf5Rnoyh2WezP/HfgPKqmKxtqt8rwAAAABJRU5ErkJggg=="},VR0t:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{}},props:{dialogVisible:{default:!1,type:Boolean},title:{default:"",type:String},loading:{default:!1,type:Boolean},dialogTop:{default:"15vh",type:String},modal:{default:!0,type:Boolean}},computed:{dialog:{get:function(){return this.dialogVisible},set:function(t){this.$emit("update:dialogVisible",t)}}}},o=a("W5g0");var r=function(t){a("utE/")},s=Object(o.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{ref:"plotlist",attrs:{modal:t.modal,visible:t.dialog,center:t.ture,"modal-append-to-body":!1,"close-on-click-modal":!1,"custom-class":"dialog-normal","show-close":!1,top:t.dialogTop,"destroy-on-close":!0},on:{"update:visible":function(e){t.dialog=e}}},[a("div",{staticClass:"popclose",on:{click:function(e){t.dialog=!1}}}),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"dialog-con",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0)"}},[a("div",{staticClass:"dialog-header"},[t._v(t._s(t.title))]),t._v(" "),a("div",{staticClass:"dialog-body"},[t._t("default")],2)])])},[],!1,r,"data-v-fe9a0e46",null);e.default=s.exports},gdKI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("c65A"),o=a("VR0t");var r={data:function(){return{loading:!0,viewImgDialog:!1,circleData:[{name:"累计监管",totalCount:"-",qualifiedNum:"-",percentage:"--",percentColor:"#3fe490"},{name:"本年监管",totalCount:"--",qualifiedNum:"--",percentage:"--",percentColor:"#3fe490"},{name:"本月监管",totalCount:"--",qualifiedNum:"--",percentage:"--",percentColor:"#3fe490"}],allRecordList:[],activeRecord:-1,activeViewImg:0,statisticsData:{},checkTypeMap:["未知","日常巡查","三品一标"],checkNameMap:["未知","优","良","合格","不合格"],checkResutClassMap:["status_wz","status_a","status_b","status_c","status_d"],recordListScrollTopTemp:0}},props:{regulatoryVisible:{default:!1,type:Boolean},lawSupervisionId:{default:"",type:String},modal:{default:!0,type:Boolean}},computed:{dialog:{get:function(){return this.regulatoryVisible},set:function(t){this.$emit("update:regulatoryVisible",t)}}},created:function(){var t,e=this;return(t=regeneratorRuntime.mark(function t(){var a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.lawSupervisionId||(e.loading=!1),t.next=3,e.getRefulatoryList(e.lawSupervisionId);case 3:if(a=t.sent){t.next=6;break}return t.abrupt("return");case 6:return e.allRecordList=a.list,t.next=9,e.getStatisticsList(e.lawSupervisionId);case 9:if(i=t.sent){t.next=12;break}return t.abrupt("return");case 12:e.statisticsData=i,e.circleData[0].totalCount=e.statisticsData.totalCount,e.circleData[0].qualifiedNum=e.statisticsData.totalCountQualified,e.circleData[0].percentage=e.percentHander(e.statisticsData.totalCount,e.statisticsData.totalCountQualified),e.circleData[0].percentColor=100!==e.circleData[0].percentage?"#e4d23f":"#3fe490",e.circleData[1].totalCount=e.statisticsData.yearTotalCount,e.circleData[1].qualifiedNum=e.statisticsData.yearTotalCountQualified,e.circleData[1].percentage=e.percentHander(e.statisticsData.yearTotalCount,e.statisticsData.yearTotalCountQualified),e.circleData[1].percentColor=100!==e.circleData[1].percentage?"#e4d23f":"#3fe490",e.circleData[2].totalCount=e.statisticsData.monthTotalPatrolCount,e.circleData[2].qualifiedNum=e.statisticsData.monthTotalPatrolQualifiedCount,e.circleData[2].percentage=e.percentHander(e.statisticsData.monthTotalPatrolCount,e.statisticsData.monthTotalPatrolQualifiedCount),e.circleData[2].percentColor=100!==e.circleData[2].percentage?"#e4d23f":"#3fe490",e.$nextTick(function(){e.recordListScrollInit(),e.circleData.map(function(t,a){return e.initCircleChart("circle"+a,t.percentage,t.percentColor)}),e.loading=!1});case 26:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(o,r){try{var s=e[o](r),l=s.value}catch(t){return void a(t)}if(!s.done)return Promise.resolve(l).then(function(t){i("next",t)},function(t){i("throw",t)});t(l)}("next")})})()},methods:{initCircleChart:function(t,e,a){e="--"===(e=e||0)||"-"===e?0:e;var i={animation:!0,tooltip:{show:!1},color:[a,"#215a7c"],textStyle:{color:"#9DD1D7",fontSize:14,fontWeight:"400",lineHeight:14},series:[{name:"监管",type:"pie",radius:["84%","100%"],avoidLabelOverlap:!0,minAngle:0,startAngle:90,label:{normal:{show:!1}},labelLine:{normal:{show:!1}},hoverAnimation:!1,data:[]}]};i.series[0].data=[e,100-e],this.$echarts.init(this.$refs[t][0]).setOption(i)},recordListScrollInit:function(){this.allRecordList<2||$(this.$refs.recordingList).niceScroll({cursorcolor:"rgba(0, 247, 255 ,0.4)",cursorwidth:"3px",cursorborder:"",autohidemode:!0,railpadding:{top:0,right:8,left:0,bottom:0}})},showRecordDetailfn:function(t){var e=this;-1!==this.activeRecord?($(this.$refs.recordDetail).getNiceScroll().remove(),this.activeRecord=-1,$(this.$refs.recordingList).niceScroll({cursorcolor:"rgba(0, 247, 255 ,0.4)",cursorwidth:"3px",cursorborder:"",autohidemode:!0,railpadding:{top:0,right:8,left:0,bottom:0}}),$(this.$refs.recordingList).getNiceScroll(0).doScrollTop(this.recordListScrollTopTemp,0)):(this.activeRecord=t,this.recordListScrollTopTemp=$(this.$refs.recordingList).scrollTop(),$(this.$refs.recordingList).getNiceScroll().remove(),this.$nextTick(function(){$(e.$refs.recordingList).getNiceScroll().hide(),e.allRecordList[e.activeRecord].govZfRecordDetailVoList.length<=5||$(e.$refs.recordDetail).niceScroll({cursorcolor:"rgba(0, 247, 255 ,0.4)",cursorwidth:"3px",cursorborder:"",autohidemode:!0,railpadding:{top:0,right:8,left:0,bottom:0}})}))},getRefulatoryList:function(t){var e=this;return new Promise(function(a){e.$ajax.post(e.$api.govPatrol.recordlist,{zhiFaCompanyId:t}).then(function(t){var e=t.status,i=t.data;200===e&&0===i.respCode&&a(i.obj),a(!1)})})},getStatisticsList:function(t){var e=this;return new Promise(function(a){e.$ajax.post(e.$api.govPatrol.statisticsByCompanyId,{zhiFaCompanyId:t}).then(function(t){var e=t.status,i=t.data;200===e&&0===i.respCode&&a(i.obj),a(!1)})})},percentHander:function(t,e){var a=0;return-1===t||0===t?"--":(t>0&&(t||0===t)&&(a=Number(String(e/t*100).split(".").map(function(t,e){return 0===e?t:t.substr(0,1)}).join("."))),a)},imgloadedfn:function(t){var e=t.path[0].parentNode.className;e=e.replace("loading",""),t.path[0].parentNode.className=e}},components:{Dialog:o.default,Views:i.default}},s=a("W5g0");var l=function(t){a("G+AQ")},n=Object(s.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Dialog",{attrs:{dialogVisible:t.dialog,modal:t.modal,title:"安全监管记录",loading:t.loading,dialogTop:"calc(50vh - 268px)"},on:{"update:dialogVisible":function(e){t.dialog=e},"update:dialog-visible":function(e){t.dialog=e}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"regulatory-con"},[i("div",{staticClass:"statistics"},t._l(t.circleData,function(e,a){return i("div",{key:e.name,staticClass:"statistics-item"},[i("div",{staticClass:"echart-circle"},[i("div",{ref:"circle"+a,refInFor:!0,staticClass:"echart"}),t._v(" "),i("div",{staticClass:"echart-info"},[i("p",{class:{textindent:"--"!==e.percentage},style:{color:e.percentColor}},[t._v(t._s(e.percentage)),"--"!==e.percentage?i("span",[t._v("%")]):t._e()]),t._v(" "),i("p",[t._v("合格率")])])]),t._v(" "),i("div",{staticClass:"statictics-info"},[i("p",[t._v(t._s(e.name))]),t._v(" "),i("p",[t._v("监管次数："+t._s(-1===e.totalCount?"--":e.totalCount))]),t._v(" "),i("p",[t._v("合格次数："+t._s(-1===e.qualifiedNum?"--":e.qualifiedNum))])])])}),0),t._v(" "),i("div",{ref:"recordingList",staticClass:"recording-list"},[t.allRecordList.length>0?i("div",{staticClass:"list-ul"},t._l(t.allRecordList,function(e,o){return i("div",{staticClass:"list-item"},[i("div",{directives:[{name:"show",rawName:"v-show",value:-1===t.activeRecord||t.activeRecord===o,expression:"activeRecord === -1 || activeRecord === index"}],staticClass:"list-item-con"},[i("div",{staticClass:"record-header"},[i("span",{staticClass:"date"},[i("img",{attrs:{src:a("UvDY"),alt:""}}),t._v(t._s(t._f("dateFormat")(e.createdDate,"yyyy.MM.dd")))]),t._v(" "),i("span",{staticClass:"type"},[t._v("类型："+t._s(t.checkTypeMap[e.patrolType]||"-"))]),t._v(" "),t.checkNameMap[e.patrolResult]?i("span",{staticClass:"fraction",class:[t.checkResutClassMap[e.patrolResult]]},[t._v(t._s(t.checkNameMap[e.patrolResult])),e.patrolResult?i("i",[t._v(t._s(e.patrolValue)+"分")]):t._e()]):t._e(),t._v(" "),e.patrolResult?i("span",{staticClass:"arrow",class:{showarrow:t.activeRecord===o},on:{click:function(e){return t.showRecordDetailfn(o)}}},[i("img",{attrs:{src:a("EEh8"),alt:""}})]):t._e()]),t._v(" "),t.activeRecord===o?i("div",{staticClass:"record-detail"},[e.photoList&&e.photoList.length>0?i("div",{staticClass:"detail-imgs"},t._l(e.photoList.slice(0,6),function(a,o){return i("div",{staticClass:"img loading",class:{"last-img":5===o&&e.photoList.length>6},on:{click:function(){t.activeViewImg=o,t.viewImgDialog=!0}}},[i("img",{attrs:{src:a,alt:""},on:{load:function(e){t.imgloadedfn(e)}}}),t._v(" "),e.photoList.length>6?i("i",[t._v("共"+t._s(e.photoList.length)+"张")]):t._e()])}),0):t._e(),t._v(" "),i("div",{ref:"recordDetail",refInFor:!0,staticClass:"detail-list"},[i("ul",t._l(e.govZfRecordDetailVoList,function(e,a){return i("li",{key:a},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(a+1)+"."+t._s(e.scoreDesc)),i("span",{staticClass:"fr"},[t._v(t._s(e.detailValue)+"分")])])}),0)])]):t._e()])])}),0):t._e(),t._v(" "),0===t.allRecordList.length?i("div",{staticClass:"nodata",staticStyle:{"font-size":"20px",color:"rgba(0, 246, 255, 0.4)","line-height":"446px"}},[t._v("\n\t\t\t\t\t\t暂无监管记录\n\t\t\t\t\t")]):t._e()])])]),t._v(" "),t.viewImgDialog?i("views",{attrs:{"show-arrow":!0,pics:t.allRecordList[t.activeRecord]&&t.allRecordList[t.activeRecord].photoList||[],index:t.activeViewImg},on:{viewerListen:function(e){t.viewImgDialog=!1}}}):t._e()],1)},[],!1,l,"data-v-7b855108",null);e.default=n.exports},"utE/":function(t,e){}});
//# sourceMappingURL=142.7cfd2eae175d91fc223d.js.map
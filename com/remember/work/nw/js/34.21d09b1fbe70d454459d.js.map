{"version":3,"file":"static/js/34.21d09b1fbe70d454459d.js","sources":["webpack:///src/components/overview/modules/land-distributed-8.vue"],"sourcesContent":["<template>\n\t<!-- 生产用地类型统计 -->\n\t<div class=\"gov-area-panel\" v-loading=\"mainLoading\" element-loading-spinner=\"iconfont icon-loading1\" element-loading-background=\"rgba(0, 0, 0, 0.2)\">\n\t\t<area-panel area-title=\"生产用地类型统计\" :show-sub-title=\"false\">\n\t\t\t<div slot=\"panelMain\" class=\"charts-container\">\n\t\t\t\t<div class=\"charts-content l-charts-content\" ref=\"chartsLeft\"></div>\n\t\t\t\t<ul class=\"menus-axis\" v-show=\"menusAxis.length > 0\">\n\t\t\t\t\t<li class=\"menu-name\" v-for=\"(item, index) in menusAxis\" :key=\"index\">\n\t\t\t\t\t\t<span>{{ item }}</span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<div class=\"charts-content r-charts-content\" ref=\"chartsRight\"></div>\n\t\t\t\t<div class=\"no-data\" v-show=\"!mainLoading && menusAxis.length === 0\"><span>暂无数据</span></div>\n\t\t\t</div>\n\t\t</area-panel>\n\t</div>\n</template>\n\n<script>\nimport areaPanel from '@/components/overview/area-panel';\nimport {deepMerge, deepCopy, maxDecimalPlaces, areaLevelCorAreaId} from '@/common/fn';\n\n// echarts 超级变量含义 {a} series.name, {b} data.name {c} data.value {d} data%\nconst barOption = {\n\ttitle: {\n\t\t// text: '地块数（个）:20',\n\t\ttop: '0',\n\t\tleft: '10',\n\t\ttextStyle: {\n\t\t\tcolor: '#6DC1CB',\n\t\t\tfontSize: 12\n\t\t}\n\t},\n\tgrid: {\n\t\tshow: false,\n\t\tright: '0',\n\t\ttop: 'center',\n\t\theight: '80%',\n\t\twidth: '75%'\n\t},\n\ttooltip: {\n\t\tshow: true,\n\t\ttrigger: 'item',\n\t\tformatter(a) {\n\t\t\treturn `${a.value[0]}：${Math.abs(a.value[1])}万亩`;\n\t\t},\n\t\tbackgroundColor: '#043250',\n\t\tpadding: [13, 14, 13, 11],\n\t\ttextStyle: {\n\t\t\tfontSize: 12,\n\t\t\tcolor: '#9ED2D8'\n\t\t}\n\t},\n\txAxis: {\n\t\tshow: false,\n\t\taxisLabel: {\n\t\t\tinterval: 0,\n\t\t\ttextStyle: {\n\t\t\t\tcolor: '#6EC2CB',\n\t\t\t\tfontSize: 12,\n\t\t\t\tlineHeight: 14\n\t\t\t},\n\t\t\talign: 'center'\n\t\t},\n\t\taxisTick: {\n\t\t\tshow: false\n\t\t},\n\t\taxisLine: {\n\t\t\tshow: false\n\t\t}\n\t},\n\tyAxis: {\n\t\tshow: false,\n\t\ttype: 'category',\n\t\tname: '单位：',\n\t\tnameTextStyle: {\n\t\t\tfontSize: 14,\n\t\t\tcolor: '#6DC1CB',\n\t\t\tpadding: [0, 0, 10, 0]\n\t\t},\n\t\taxisLine: {\n\t\t\tshow: false,\n\t\t\tlineStyle: {\n\t\t\t\tcolor: '#0D394A'\n\t\t\t}\n\t\t},\n\t\taxisTick: {\n\t\t\tshow: false\n\t\t},\n\t\tsplitLine: {\n\t\t\tshow: true,\n\t\t\tlineStyle: {\n\t\t\t\tcolor: '#0D394A'\n\t\t\t}\n\t\t},\n\t\taxisLabel: {\n\t\t\ttextStyle: {\n\t\t\t\tcolor: '#6DC1CB',\n\t\t\t\tfontSize: 12\n\t\t\t}\n\t\t}\n\t},\n\tdataset: {\n\t\tsource: [\n\t\t\t// ['landType', 'landCount']\n\t\t]\n\t},\n\tseries: [\n\t\t{\n\t\t\ttype: 'bar',\n\t\t\tbarWidth: '40%',\n\t\t\tbarMinHeight: 5,\n\t\t\tlabel: {\n\t\t\t\tshow: true,\n\t\t\t\tposition: 'left',\n\t\t\t\tcolor: '#00F5FF',\n\t\t\t\tfontSize: 12,\n\t\t\t\tformatter(a) {\n\t\t\t\t\t// console.log(a);\n\t\t\t\t\treturn Math.abs(a.value[1]);\n\t\t\t\t},\n\t\t\t\toffset: [-2, 0]\n\t\t\t},\n\t\t\tz: 10,\n\t\t\titemStyle: {\n\t\t\t\tcolor: {\n\t\t\t\t\ttype: 'linear',\n\t\t\t\t\tx: 1,\n\t\t\t\t\ty: 0,\n\t\t\t\t\tx2: 0,\n\t\t\t\t\ty2: 0,\n\t\t\t\t\tcolorStops: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toffset: 0,\n\t\t\t\t\t\t\tcolor: '#01C1FF' // 0% 处的颜色\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toffset: 1,\n\t\t\t\t\t\t\tcolor: '#00F6FF' // 100% 处的颜色\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tglobal: false // 缺省为 false\n\t\t\t\t}\n\t\t\t},\n\t\t\tencode: {\n\t\t\t\tx: 'landCount',\n\t\t\t\ty: 'landType'\n\t\t\t}\n\t\t}\n\t]\n};\nexport default {\n\tname: 'land-distributed-8',\n\tprops: {\n\t\tfarmAreaInfo: {\n\t\t\ttype: Object,\n\t\t\tdefault() {\n\t\t\t\treturn areaLevelCorAreaId();\n\t\t\t}\n\t\t},\n\t\t// 集团标识  0 非集团  1集团\n\t\tgroupFlag: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmenusAxis: [],\n\t\t\tmainLoading: true,\n\t\t\tchartsInstance: null\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.$nextTick(() => {\n\t\t\tthis.initMoudle();\n\t\t});\n\t},\n\tmethods: {\n\t\tinitMoudle() {\n\t\t\tthis.refreshChart([\n\t\t\t\tthis._initEcharts(this.chartsLeftRef, barOption),\n\t\t\t\tthis._initEcharts(\n\t\t\t\t\tthis.chartsRightRef,\n\t\t\t\t\tdeepMerge(deepCopy(barOption), {\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t// text: '面积（万亩）:247.34',\n\t\t\t\t\t\t\tright: '10',\n\t\t\t\t\t\t\tleft: 'auto'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgrid: {\n\t\t\t\t\t\t\tleft: '0',\n\t\t\t\t\t\t\tright: 'auto'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdataset: {\n\t\t\t\t\t\t\tsource: [['landType', 'landAcre']]\n\t\t\t\t\t\t},\n\t\t\t\t\t\tseries: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: {\n\t\t\t\t\t\t\t\t\tcolor: '#E5E467',\n\t\t\t\t\t\t\t\t\tposition: 'right'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\titemStyle: {\n\t\t\t\t\t\t\t\t\tcolor: {\n\t\t\t\t\t\t\t\t\t\tcolorStops: [\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\toffset: 0,\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: '#E6E768' // 0% 处的颜色\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\toffset: 1,\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: '#D29C50' // 100% 处的颜色\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tencode: {\n\t\t\t\t\t\t\t\t\tx: 'landAcre',\n\t\t\t\t\t\t\t\t\ty: 'landType'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t]);\n\t\t},\n\t\trefreshRender() {\n\t\t\tif (this.chartsInstance) {\n\t\t\t\tthis.chartsInstance.forEach(chart => {\n\t\t\t\t\tchart.resize();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t// 获取用地类型\n\t\tgetPlotTypeStatistical() {\n\t\t\treturn this.$ajax\n\t\t\t\t.post(this.$api.plotlist.landTypeDistributionlist, {})\n\t\t\t\t.then(({data}) => {\n\t\t\t\t\tif (data.respCode === 0) {\n\t\t\t\t\t\treturn data.obj;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(e => {\n\t\t\t\t\tconsole.log(new Error('获取用地类型'), e);\n\t\t\t\t});\n\t\t},\n\t\t// 获取用地类型---非集团版本\n\t\tgetAreaLandTypeDistribution() {\n\t\t\treturn this.$ajax\n\t\t\t\t.post(this.$api.public.areaLandTypeDistribution, {\n\t\t\t\t\tfarmAreaId: [this.farmAreaInfo.farmAreaId],\n\t\t\t\t\tfarmAreaType: this.farmAreaInfo.farmAreaType\n\t\t\t\t})\n\t\t\t\t.then(({data}) => {\n\t\t\t\t\tif (data.respCode === 0) {\n\t\t\t\t\t\treturn data.obj;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(e => {\n\t\t\t\t\tconsole.log(new Error('获取用地类型---非集团版本'), e);\n\t\t\t\t});\n\t\t},\n\t\t_initEcharts(el, option) {\n\t\t\tconst chart = this.$echarts.init(el);\n\t\t\tchart.setOption(option);\n\t\t\treturn chart;\n\t\t},\n\t\tasync refreshChart(chartsInstance) {\n\t\t\t// 集团版本和非集团版本 调用不同接口\n\t\t\tconst res = await (!this.groupFlag ? this.getAreaLandTypeDistribution : this.getPlotTypeStatistical)();\n\t\t\tres.list.reverse();\n\t\t\tconst plotNumData = res.list.map(info => [info.landType, -info.landNum]);\n\t\t\tconst plotAcreData = res.list.map(info => [\n\t\t\t\tinfo.landType,\n\t\t\t\tmaxDecimalPlaces({\n\t\t\t\t\tvalue: info.landAcre / 10000\n\t\t\t\t})\n\t\t\t]);\n\t\t\tplotNumData.unshift(['landType', 'landCount']);\n\t\t\tplotAcreData.unshift(['landType', 'landAcre']);\n\t\t\tthis.menusAxis = res.list.map(info => info.landType).reverse();\n\n\t\t\tthis.chartsInstance = chartsInstance;\n\t\t\tchartsInstance[0].setOption({\n\t\t\t\ttitle: {\n\t\t\t\t\tshow: this.menusAxis.length > 0,\n\t\t\t\t\ttext: `地块数（个）： ${res.list.reduce((total, info) => {\n\t\t\t\t\t\treturn total + info.landNum;\n\t\t\t\t\t}, 0)}`\n\t\t\t\t},\n\t\t\t\tdataset: {\n\t\t\t\t\tsource: plotNumData\n\t\t\t\t},\n\t\t\t\ttooltip: {\n\t\t\t\t\tformatter(a) {\n\t\t\t\t\t\treturn `${a.value[0]}：${Math.abs(a.value[1])}个`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tchartsInstance[1].setOption({\n\t\t\t\ttitle: {\n\t\t\t\t\tshow: this.menusAxis.length > 0,\n\t\t\t\t\ttext: `面积（万亩）：${maxDecimalPlaces({\n\t\t\t\t\t\tvalue:\n\t\t\t\t\t\t\tres.list.reduce((total, info) => {\n\t\t\t\t\t\t\t\treturn total + info.landAcre;\n\t\t\t\t\t\t\t}, 0) / 10000\n\t\t\t\t\t})}`\n\t\t\t\t},\n\t\t\t\tdataset: {\n\t\t\t\t\tsource: plotAcreData\n\t\t\t\t},\n\t\t\t\ttooltip: {\n\t\t\t\t\tformatter(a) {\n\t\t\t\t\t\treturn `${a.value[0]}：${Math.abs(a.value[1])}万亩`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.mainLoading = false;\n\t\t}\n\t},\n\tcomputed: {\n\t\tchartsLeftRef() {\n\t\t\treturn this.$refs.chartsLeft;\n\t\t},\n\t\tchartsRightRef() {\n\t\t\treturn this.$refs.chartsRight;\n\t\t}\n\t},\n\tcomponents: {\n\t\tareaPanel\n\t}\n};\n</script>\n\n<style scoped lang=\"less\">\n.gov-area-panel {\n\twidth: 100%;\n\theight: 100%;\n\t/*min-width: 364px;\n    min-height: 295px;*/\n\tbackground-color: fade(#061f36, 34%);\n\t.charts-container {\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\t@xAxisWidth: 50px;\n\t\tposition: relative;\n\t\t.charts-content {\n\t\t\twidth: calc((100% - (@xAxisWidth + 4px)) / 2);\n\t\t\theight: 100%;\n\t\t\t&.l-charts-content {\n\t\t\t\t/*transform: rotate(180deg);*/\n\t\t\t}\n\t\t}\n\t\t.menus-axis {\n\t\t\twidth: @xAxisWidth;\n\t\t\tbackground-color: #032337;\n\t\t\tbox-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.41);\n\t\t\tborder-radius: 4px;\n\t\t\tpadding: 2px 0;\n\t\t\theight: 80%;\n\t\t\tbox-sizing: border-box;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tjustify-content: center;\n\t\t\talign-content: center;\n\t\t\t.menu-name {\n\t\t\t\tflex: 1;\n\t\t\t\ttext-align: center;\n\t\t\t\tpadding: 0 2px;\n\t\t\t\tfont-size: 12px;\n\t\t\t\t/*line-height: 22px;*/\n\t\t\t\tcolor: #6dc1cb;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tspan {\n\t\t\t\t\twidth: @xAxisWidth;\n\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\t\tline-height: 18px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t.no-data {\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tfont-size: 14px;\n\t\t\tcolor: #00f6ff;\n\t\t\tfont-weight: bold;\n\t\t}\n\t}\n\t/deep/ .el-loading-spinner {\n\t\toverflow: hidden;\n\t\t.iconfont {\n\t\t\tdisplay: block;\n\t\t\tfont-size: 40px;\n\t\t\tcolor: #00f6ff;\n\t\t\tanimation: loading 1.25s linear infinite;\n\t\t\tmargin-top: 24px;\n\t\t\tmargin-left: 8px;\n\t\t}\n\t}\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/overview/modules/land-distributed-8.vue"],"mappings":"AAuBA","sourceRoot":""}
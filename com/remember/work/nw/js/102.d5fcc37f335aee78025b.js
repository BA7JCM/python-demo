webpackJsonp([102],{"5tEK":function(t,o){},az1w:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("VCTt");var r={name:"gmap",data:function(){return{gmap:null,allPolygon:[],isFeatureClick:!1,adCodes:[1e5],sub:!0}},mounted:function(){var t=this;this.$nextTick(function(){t._initMap()})},methods:{_initMap:function(){var t=this;this.gmap=L.map(this.gmapEl,{center:[0,0],zoom:9,zoomSnap:.1,layers:[],zoomControl:!1,attributionControl:!1,dragging:!0,touchZoom:!1,scrollWheelZoom:!0,doubleClickZoom:!1,boxZoom:!1,tap:!1,keyboard:!1,maxZoom:21,minZoom:5}).on("click",function(o){t.isFeatureClick||t.drawPolygon(t.removeCode()),t.isFeatureClick=!1}),this.drawPolygon(this.adCodes[0])},drawPolygon:function(t){var o=this;return function(t){return function(){var o=t.apply(this,arguments);return new Promise(function(t,e){return function n(r,a){try{var i=o[r](a),s=i.value}catch(t){return void e(t)}if(!i.done)return Promise.resolve(s).then(function(t){n("next",t)},function(t){n("throw",t)});t(s)}("next")})}}(regeneratorRuntime.mark(function e(){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.g)({areaId:t});case 2:r=e.sent,a=r.features,o.sub=r.sub,o.allPolygon.forEach(function(t){t.remove()}),o.allPolygon=[],a.forEach(function(t,e){o.allPolygon[e]=L.geoJSON(t,{style:function(){return{color:"#ffc777",fillColor:"#47473b",fillOpacity:.6,fillRule:"evenodd",className:"polygonbox",lineJoin:"miter",weight:1}}}).on("click",function(t){t.latlng;var e=t.layer;o.isFeatureClick=!0,o.drawPolygon(e.feature.properties.adcode),o.addAdCode(e.feature.properties.adcode)}).addTo(o.gmap)}),o.drawProvinceFn();case 9:case"end":return e.stop()}},e,o)}))()},drawProvinceFn:function(){var t,o,e=[],n=void 0;this.allPolygon.forEach(function(t){var o=t.getBounds();e.push([o._southWest.lat,o._southWest.lng]),e.push([o._northEast.lat,o._northEast.lng])}),n=L.polygon(e,{}).getBounds(),t=this.gmap.getBoundsZoom(n),o=n.getCenter(),this.gmap.setView(o,t)},addAdCode:function(t){if(!this.sub)return!1;this.adCodes=[].concat(function(t){if(Array.isArray(t)){for(var o=0,e=Array(t.length);o<t.length;o++)e[o]=t[o];return e}return Array.from(t)}(this.adCodes),[t])},removeCode:function(){return this.adCodes.length>1?(this.adCodes.pop(),this.adCodes.slice(-1)[0]):this.adCodes[0]}},computed:{gmapEl:function(){return this.$refs.gmap}}},a=e("W5g0");var i=function(t){e("5tEK")},s=Object(a.a)(r,function(){var t=this.$createElement,o=this._self._c||t;return o("div",[o("div",{ref:"gmap",staticClass:"gmap",attrs:{id:"gmap"}})])},[],!1,i,"data-v-7598fb0d",null);o.default=s.exports}});
//# sourceMappingURL=102.d5fcc37f335aee78025b.js.map
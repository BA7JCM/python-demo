webpackJsonp([43],{a7NR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("xk5x"),r=n("VCTt");var i={title:{left:"center",top:"35%",textStyle:{color:"#9ED2D8",fontSize:12,lineHeight:22},subtextStyle:{color:"#00F6FF",fontSize:24,lineHeight:34,fontWeight:"bold"},itemGap:0},tooltip:{show:!0,trigger:"item",formatter:"{b}：{c}家",backgroundColor:"#043250",padding:[13,14,13,11],textStyle:{fontSize:12,color:"#9ED2D8"}},color:["#FFA37E","#3CC8FF","#61D9CB","#FFCE7E","#7E94FF","#DFF247","#F087B1","#46F262","#9CE9E8","#BB97FB"],textStyle:{color:"#9DD1D7",fontSize:14,fontWeight:"400",lineHeight:14},series:[{name:"经营主体类型统计",type:"pie",radius:["60%","75%"],avoidLabelOverlap:!0,minAngle:15,startAngle:80,label:{normal:{show:!0,fontSize:12,position:"outside",lineHeight:16,formatter:["{nameS|{b}}","{valueS|{c}家}"].join("："),rich:{nameS:{color:"#9ED2D8"},valueS:{color:"#00F6FF"}}}},labelLine:{normal:{show:!0,length:20,length2:10}},hoverAnimation:!0,selectedMode:"multiple",selectedOffset:2,data:[]},{type:"pie",radius:["55%","56%"],minAngle:15,startAngle:80,animation:!0,labelLine:{show:!1},hoverAnimation:!1,z:3,tooltip:{show:!1},label:{show:!1},selectedMode:"multiple",selectedOffset:4,data:[]}]},o={name:"business-category-5",props:{farmAreaInfo:{type:Object,default:function(){return Object(r.b)()}}},data:function(){return{chartInstance:null,mainLoading:!0}},mounted:function(){var e=this;this.$nextTick(function(){e.initMoudle()})},methods:{initMoudle:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.mainLoading=!0,t.chartInstance||(t.chartInstance=t._initEcharts(t.eContainerRef,i)),e.next=4,t.getBusinessScale();case 4:return n=e.sent,e.next=7,t.getOperatorsTypeNum();case 7:a=e.sent,t.setEchart(t.chartInstance,n,a),t.adaptationChart(),t.mainLoading=!1;case 11:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(r,i){try{var o=t[r](i),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}("next")})})()},refreshRender:function(){this.chartInstance&&(this.chartInstance.resize(),this.adaptationChart())},getOperatorsTypeNum:function(){return this.$ajax.post(this.$api.overview.getOperatorsTypeNum,{farmAreaId:[this.farmAreaInfo.farmAreaId],farmAreaType:this.farmAreaInfo.farmAreaType}).then(function(e){var t=e.data;if(0===t.respCode)return t.obj}).catch(function(e){console.log(new Error("经营主体数量分布error"),e)})},getBusinessScale:function(){return this.$ajax.post(this.$api.overview.getBusinessCategory,{farmAreaId:[this.farmAreaInfo.farmAreaId],farmAreaType:this.farmAreaInfo.farmAreaType}).then(function(e){var t=e.data;if(0===t.respCode)return t.obj}).catch(function(e){console.log(new Error("获取经营类目统计error"),e)})},_initEcharts:function(e,t){var n=this.$echarts.init(e);return n.setOption(t),n},setEchart:function(e,t,n){var a=t.filter(function(e){return e.count>0}).map(function(e){return{name:e.name,value:e.count,selected:!1}}),r=(a.length,{title:{text:"经营主体(家)",subtext:""+n.count,left:"center",top:"center"},series:[{data:a},{data:a}]});e.setOption(r)},adaptationChart:function(){var e=this.eContainerRef.clientHeight,t=Object(r.j)({value:.088*e,places:0}),n=Object(r.j)({value:.136*e,places:0}),a=Object(r.j)({value:.048*e,places:0}),i=Object(r.j)({value:.064*e,places:0});t=t>22?t:22,n=n>34?n:34,a=a>12?a:12,i=i>16?i:16,this.chartInstance.setOption({title:{top:this.eContainerRef.clientHeight/2-(t+n)/2,textStyle:{fontSize:a,lineHeight:t},subtextStyle:{fontSize:2*a,lineHeight:n}},series:[{label:{normal:{lineHeight:i,rich:{nameS:{fontSize:a},valueS:{fontSize:a}}}},labelLine:{normal:{length:Object(r.j)({value:.04*e,places:0}),length2:Object(r.j)({value:.06*e,places:0})}}}]})},handlePage:function(){this.$emit("handleClick","operateSubjectList","经营类目统计")}},computed:{eContainerRef:function(){return this.$refs.EContainer}},components:{areaPanel:a.default}},s=n("W5g0");var l=function(e){n("wRut")},c=Object(s.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:this.mainLoading,expression:"mainLoading"}],staticClass:"gov-area-panel",attrs:{"element-loading-spinner":"iconfont icon-loading1","element-loading-background":"rgba(0, 0, 0, 0.2)"}},[t("area-panel",{attrs:{"area-title":"经营类目统计"},on:{"hand-sub-title":this.handlePage}},[t("div",{ref:"EContainer",staticClass:"echart-container",attrs:{slot:"panelMain"},slot:"panelMain"})])],1)},[],!1,l,"data-v-168f3b6f",null);t.default=c.exports},wRut:function(e,t){}});
//# sourceMappingURL=43.69c0446d0b6acdf6cb5d.js.map
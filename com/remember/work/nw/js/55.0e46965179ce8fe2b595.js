webpackJsonp([55,68,86,87,120],{"1K34":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("h7qT"),r={props:{data:{type:Object}},data:function(){return{onoff3:[{class:"stop",label:"关",value:"2"},{class:"pause",label:"停",value:"3"},{class:"open",label:"开",value:"1"}],onoff2:[{class:"stop",label:"关",value:"0"},{class:"open",label:"开",value:"1"}]}},computed:{currentOnoff:function(){var t=this.data,e=this.onoff3,i=this.onoff2;return t.isEnum?3===t.specsEnumList.length?e:i:null}},components:{IconNum:a.default},methods:{controlOnoff:function(){this.$message({type:"warning",message:"您不是该基地的成员，无法控制设备",center:!0})}}},s=i("W5g0");var o=function(t){i("OxzQ")},n=Object(s.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"controller-container"},[i("div",{staticClass:"controller-logo-name"},[i("div",{staticClass:"logo"},[i("img",{staticClass:"controller-logo",attrs:{src:t.data.productLogo}})]),t._v(" "),i("div",{staticClass:"client-name hidetext-twoline"},[t._v("\n\t\t\t"+t._s(t.data.clientDisplayName)+"\n\t\t")])]),t._v(" "),i("div",{staticClass:"controller-data"},[t.data.isOnline?[t.data.isEnum?[i("ul",{staticClass:"switch-box",class:"switch-onoff"+t.data.specsEnumList.length},t._l(t.currentOnoff,function(e){return i("li",{key:e.value,class:[e.class,t.data.value===e.value?"active":""],on:{click:t.controlOnoff}},[t._v(t._s(e.label))])}),0)]:[t.data.value?i("IconNum",{attrs:{fsize:24,num:t.data.value}}):t._e()]]:[i("div",{staticClass:"offline"},[t._v("离线")])]],2)])},[],!1,o,"data-v-d7213dc8",null);e.default=n.exports},"2l3z":function(t,e){},"8Brt":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={props:{icon:{type:String,default:"icon-shexiangtou"},title:{type:String,default:"视频监控"},primaryColor:{type:String,default:"#1DE9B6"},bgColor:{type:String,default:"#041A2D"}}},r=i("W5g0");var s=function(t){i("Ylx9")},o=Object(r.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-box",style:{"background-color":t.bgColor}},[i("div",{staticClass:"header-box",style:{color:t.primaryColor}},[i("div",{staticClass:"iconfont header-icon",class:t.icon}),t._v(" "),i("div",[t._v(t._s(t.title))])]),t._v(" "),t._t("container")],2)},[],!1,s,"data-v-d602d05a",null);e.default=o.exports},"9MB4":function(t,e){},Ixl8:function(t,e){t.exports="https://snkoudai.oss-cn-hangzhou.aliyuncs.com/goverment/static/img/station_bg.19aea01.png"},JOYD:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("mOB5"),r=i("Ndy7"),s=i("AQ5S"),o=i("8Brt"),n=i("vT1+"),l=i("1K34"),c=i("tI6/"),u=i("44dg"),d=i("84iU"),v=i.n(d),p=i("oAV5"),f=i("VCTt"),h=(i("VKKs"),i("TXSd")),m=i.n(h),y=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],a=!0,r=!1,s=void 0;try{for(var o,n=t[Symbol.iterator]();!(a=(o=n.next()).done)&&(i.push(o.value),!e||i.length!==e);a=!0);}catch(t){r=!0,s=t}finally{try{!a&&n.return&&n.return()}finally{if(r)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function g(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function a(r,s){try{var o=e[r](s),n=o.value}catch(t){return void i(t)}if(!o.done)return Promise.resolve(n).then(function(t){a("next",t)},function(t){a("throw",t)});t(n)}("next")})}}var _={icon:"icon-shexiangtou",label:"视频监控",refName:"videoMain"},b={icon:"icon-chuanganshebei",label:"环境监测",refName:"sensorMain"},C={icon:"icon-kongzhishebei",label:"远程控制",refName:"controllerMain"},L={icon:"icon-qixiangzhan",label:"气象监测",refName:"stationMain"},S={data:function(){return{farmList:[],currentFarmid:0,title:"",loading:!1,allDeviceNumber:0,videoList:[],sensorListHasGroup:[],controllerListHasGroup:[],stationList:[],activeSensorGroupIndex:0,activeControllerGroupIndex:0,activeStation:0,bsScroll:null,globalLoding:!0,noData:!1,noSearch:!1,farmTotal:0,farmPageNo:1,farmPageSize:100,keyword:"",historyCurrentData:{clientDisplayName:"",identifier:null,deviceId:null,numberUnit:null,isEnum:!1},historyDataLength:0,historyDialogVisible:!1,historyisLoad:!0,currentCancel:null,historyEnumList:[],slideDeviceTypeList:[],activeSlide:0,slideClickActive:!1}},computed:{},mounted:function(){var t=this;return g(regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.currentFarmid=parseInt(t.$route.params.baseid),t.title=t.$route.query.farmName,t.init(),i=t.onResize,window.addEventListener("resize",i);case 5:case"end":return e.stop()}},e,t)}))()},methods:{init:function(){var t=this;return g(regeneratorRuntime.mark(function e(){var i,a,r,s,o,n,l,c,u,d,v,p,h,y,g,S;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.globalLoding=!0,i=t.getFarmList,a=t.getAllIotData,r=t.handleSensorData,s=t.handleControllerData,o=t.handleStationData,n=t.handleSortedData,l=t._mathDeviceTypeFromTopHeight,t._refreshScroll,c=t.slideScrollOnWatch,i(),e.next=5,a(t.currentFarmid);case 5:u=e.sent,d=u.obj,v=d.cameraList,p=d.sensorList,h=d.controllerList,y=d.stationList,t.allDeviceNumber=v.length+p.length+h.length+y.length,t.sensorListHasGroup=[],t.controllerListHasGroup=[],t.slideDeviceTypeList=[],t.videoList=[],t.activeSensorGroupIndex=0,t.activeControllerGroupIndex=0,t.activeStation=0,v.length>0&&t.slideDeviceTypeList.push(_),p.length>0&&t.slideDeviceTypeList.push(b),h.length>0&&t.slideDeviceTypeList.push(C),y.length>0&&t.slideDeviceTypeList.push(L),m()(),g=r(p),S=s(h),t.stationList=o(y),t.videoList=t.handleVideoData(v),n(g,t.sensorListHasGroup),n(S,t.controllerListHasGroup),t.globalLoding=!1,t.$nextTick(function(){!t.bsScroll&&t.$refs.scroll&&(t.bsScroll=t.$refs.scroll&&Object(f.a)(t.$refs.scroll),t.bsScroll&&t.bsScroll.on("scroll",c)),l()});case 32:case"end":return e.stop()}},e,t)}))()},onResize:function(){this.bsScroll&&(this.bsScroll.refresh(),this._mathDeviceTypeFromTopHeight())},back:function(){this.$router.go(-1)},select:function(t){this.title=t.farmName,this.currentFarmid=t.farmId,this.$router.replace({path:"/iotDevice/"+t.farmId+"?farmName="+t.farmName}),this.bsScroll&&this.bsScroll.scrollTo(0,0,0),this.init()},search:function(t){this.loading=!0,this.keyword=t,this.farmPageNo=1,this.getFarmList()},onchange:function(t){var e=this;return g(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e.loading=!0,e.keyword=t,e.farmPageNo=1,e.loading=!0,i.next=6,e.getFarmListData();case 6:if(0!==(a=i.sent).respCode){i.next=13;break}if(e.keyword===t){i.next=10;break}return i.abrupt("return");case 10:e.farmList=a.obj.list,e.loading=!1,e.farmTotal=a.obj.totalCount;case 13:case"end":return i.stop()}},i,e)}))()},scrollToEnd:function(){var t=this;return g(regeneratorRuntime.mark(function e(){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Math.ceil(t.farmTotal/t.farmPageSize),!(t.farmTotal>t.farmPageSize)){e.next=9;break}if(!(t.farmPageNo>=i)){e.next=4;break}return e.abrupt("return");case 4:return t.farmPageNo++,e.next=7,t.getFarmListData();case 7:0===(a=e.sent).respCode&&(a.obj.list.forEach(function(e){0!==e.totalCount&&t.farmList.push(e)}),t.$nextTick(function(){t.$refs.drop.refresh()}));case 9:case"end":return e.stop()}},e,t)}))()},getFarmListData:function(){var t=this,e=Object(p.c)();return new Promise(function(i,a){t.$ajax.post(t.$api.operators.listByAreaAndZaiotKeyNotNull,{farmAreaId:[e.farmId],farmAreaType:e.level,keyword:t.keyword?t.keyword:null,pageNo:t.farmPageNo,pageSize:t.farmPageSize}).then(function(t){i(t.data)}).catch(function(t){a(t)})})},getAllIotData:function(t){var e=this;return new Promise(function(i,a){e.$ajax.post(e.$api.farmDetail.getIotAll,{farmId:t}).then(function(t){var e=t.data;0===e.respCode?i(e):a(e.respDesc)}).catch(function(t){a(t)})})},getFarmList:function(){var t=this;return g(regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.getFarmListData();case 3:0===(i=e.sent).respCode&&(t.farmList=i.obj.list,t.loading=!1,t.farmTotal=i.obj.totalCount);case 5:case"end":return e.stop()}},e,t)}))()},handleVideoData:function(t){return t.map(function(t,e){return{id:t.id,hlsUrl:t.hlsUrl,hlsUrlHd:t.hlsUrlHd,displayName:t.displayName,autoplay:e<6}})},handleSortedData:function(t,e){var i={};for(var a in t){i[t[a].sort]=t[a]}for(var r in i)e.push(i[r]);return e},handleSensorData:function(t){var e={},i=0;return t.forEach(function(t){var a=t.clientDisplayName,r=t.deviceGroupId,s=t.deviceGroupVO,o=t.productVO.productLogo,n=t.devicePropertyDTOList;e[r]||(e[r]={list:[],sort:i},i++);var l=y(n,1)[0],c=l.specsEnumList,u=l.specsNumber,d=l.identifier,v=l.deviceId,p=l.propertyValue,f=l.valueLastTime,h=l.specs;e[r].groupName=s?s.groupName:"未分区",e[r].id=r,e[r].list.push({groupId:r,groupName:s?s.groupName:"未分区",clientDisplayName:a,productLogo:o||"https://zaiot.oss-cn-hangzhou.aliyuncs.com/wechat/img/icon_eq_default.png",isEnum:!!c,value:c?p&&JSON.parse(h)[p]:p,numberUnit:u?u.unit:"",specs:h,identifier:d,deviceId:v,valueLastTime:f})}),e},handleChangeSensorGroup:function(t){this.activeSensorGroupIndex=t},handleChangeControllerGroup:function(t){this.activeControllerGroupIndex=t},handleChangeStation:function(t){this.activeStation=t},getHistoryData:function(t){var e=this,i=t.deviceId,a=t.identifier,r=this,s=this.currentFarmid;this._toolHistoryDataLoaded(!0);var o=v.a.CancelToken;return new Promise(function(t,n){e.$ajax.post(e.$api.farmDetail.getDeviceHistory,{farmId:s,deviceId:i,identifier:a},{cancelToken:new o(function(t){r.currentCancel=t})}).then(function(i){var a=i.data;e._toolHistoryDataLoaded(!1),0===a.respCode?t(a.obj):n(a.respDesc)}).catch(function(t){n(t)})})},handleControllerData:function(t){var e={},i=0;return t.forEach(function(t){var a=t.clientDisplayName,r=t.deviceGroupId,s=t.deviceGroupVO,o=t.controllerCategoryVO.categoryLogo,n=t.deviceState,l=t.devicePropertyDTOList;e[r]||(e[r]={list:[],sort:i},i++);var c=y(l,1)[0],u=c.specsEnumList,d=(c.specsNumber,c.identifier),v=c.deviceId,p=c.propertyValue,f=c.valueLastTime;c.specs;e[r].groupName=s?s.groupName:"未分区",e[r].id=r,e[r].list.push({isOnline:"ONLINE"===n,groupId:r,groupName:s?s.groupName:"未分区",clientDisplayName:a,productLogo:o||"https://zaiot.oss-cn-hangzhou.aliyuncs.com/wechat/img/icon_eq_default.png",isEnum:!!u,value:p,specsEnumList:u,identifier:d,deviceId:v,valueLastTime:f})}),e},handleStationData:function(t){return t.map(function(t){var e=t.clientDisplayName,i={};return t.devicePropertyDTOList.forEach(function(t){var e=t.name,a=t.specs,r=t.identifier,s=t.specsNumber,o=t.specsEnumList,n=t.propertyValue;i[r]={isEnum:!!o,value:o?n&&JSON.parse(a)[n]:n,unit:s?s.unit:"",proName:e}}),{clientDisplayName:e,devicePropertys:i}})},handleSensorHistory:function(t){var e=this,i=t.deviceId,a=t.identifier,r=t.clientDisplayName,s=t.numberUnit,o=t.isEnum,n=t.specs;return g(regeneratorRuntime.mark(function t(){var l,c,u,d,v,p,h,m,y,g,_;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return l=e._toolHistoryDialogVisible,c=e._toolGetHistoryDataLength,u=e._initHistoryEcharts,d=e._toolHistoryNumberData,v=e._toolHistoryEnumData,e.historyCurrentData={deviceId:i,identifier:a,clientDisplayName:r,numberUnit:s,isEnum:o},l(!0),c(0),t.next=6,e.getHistoryData({deviceId:i,identifier:a});case 6:p=t.sent,h=p.historyList,c(h.length),o?h.length>0&&(_=v(h,n),e.historyEnumList=_,e.$nextTick(function(){Object(f.a)(e.$refs.historyEnumDevice)})):(m=d(h),y=m.xData,g=m.yData,e.$nextTick(function(){h.length>0&&u(e.$refs.historyEchart,e._getChartOption({xData:y,yData:g}))}));case 10:case"end":return t.stop()}},t,e)}))()},_toolHistoryNumberData:function(t){var e=[],i=[];return t.forEach(function(t){e.push(Object(f.c)(t.timestamp,"MM.dd hh:mm")),i.push(Number(t.value))}),{xData:e,yData:i}},_toolHistoryEnumData:function(t,e){var i=JSON.parse(e);return t.map(function(t){return{time:Object(f.n)(t.timestamp,"MM.dd"),value:i[t.value]}})},_toolHistoryDialogVisible:function(t){this.historyDialogVisible=t},_toolHistoryDataLoaded:function(t){this.historyisLoad=t},_toolGetHistoryDataLength:function(t){this.historyDataLength=t},_initHistoryEcharts:function(t,e){var i=this.$echarts.init(t);return i.setOption(e),i},_getChartOption:function(t){var e=t.xData,i=t.yData,a=this.historyCurrentData.numberUnit,r={grid:{containLabel:!0,top:"15%",left:"2.5%",right:"3%",bottom:"4%"},color:["#34C6A2"],tooltip:{show:!0,trigger:"axis",backgroundColor:"#00838F",formatter:"{b0}<br>数值：{c0}"+(a||""),textStyle:{color:"#FFFFFF"},axisPointer:{lineStyle:{color:"#34C6A2"}},padding:[5,15],extraCssText:"text-align:center;"},xAxis:{type:"category",boundaryGap:!1,min:0,nameTextStyle:{fontSize:12,color:"#597A8A"},axisLabel:{interval:23,rotate:0,align:"center",formatter:function(t,e){return t.split(" ")[0]+"\n"+t.split(" ")[1]}},axisLine:{show:!0,lineStyle:{color:"#587B94"}},data:e},yAxis:{name:"单位："+(a||"无"),type:"value",axisLine:{show:!0,lineStyle:{color:"#587B94"}},axisTick:{show:!1},splitLine:{lineStyle:{type:"solid",color:"rgba(52, 198, 162, 0.08)"}},axisLabel:{textStyle:{color:"#597A8A",fontSize:12},formatter:function(t,e){return t/1e3>=1&&t/1e4<1?(t/1e3).toFixed(1)+"k":t/1e4>=1&&t/1e6<1?(t/1e4).toFixed(1)+"w":t/1e6>=1?(t/1e6).toFixed(1)+"m":t/1e3<=-1&&t/1e4>-1?(t/1e3).toFixed(1)+"k":t/1e4<=-1&&t/1e6>-1?(t/1e4).toFixed(1)+"w":t/1e6<=-1?(t/1e6).toFixed(1)+"m":t}}},series:[{animation:!0,type:"line",symbolSize:1,showAllSymbol:!0,symbol:"circle",smooth:!0,data:i,laebel:{rich:{}},fontSize:13,itemStyle:{normal:{color:"#34C6A2",lineStyle:{color:"#00F6FF"}}},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(0, 246, 255, 0.4)"},{offset:.5,color:"rgba(0, 246, 255, 0.2)"},{offset:1,color:"rgba(0, 246, 255, 0)"}],global:!1}}}]};return a&&(r.yAxis.name="单位："+a),r},_mathDeviceTypeFromTopHeight:function(){var t=this;try{this.slideDeviceTypeList.forEach(function(e,i){var a=t.getElOffsetTop(e.refName);t.$set(e,"offsetTop",a)})}catch(t){console.error("计算失败")}},getElOffsetTop:function(t){return this.$refs[t]&&this.$refs[t].offsetTop},slideScrollToType:function(t,e){var i=this;this._toolSlideClickActive(!0),this.activeSlide=e,this.bsScroll&&this.bsScroll.scrollToElement(this.$refs[t],500);var a=setTimeout(function(){i._toolSlideClickActive(!1),clearTimeout(a)},700)},slideScrollOnWatch:function(t){t.x;var e=t.y,i=this.slideDeviceTypeList,a=this.slideClickActive,r=Math.abs(e);if(!a)if(i[0].offsetTop>r)this.activeSlide=0;else for(var s=0;s<i.length;s++){if(!i[s+1]){this.activeSlide=s;break}if(i[s].offsetTop<=r&&i[s+1].offsetTop>r){this.activeSlide=s;break}}},_toolSlideClickActive:function(t){this.slideClickActive=t},_refreshScroll:function(){var t=this;this.$nextTick(function(){t.bsScroll&&t.bsScroll.refresh()})}},destroyed:function(){var t=this.onResize;window.removeEventListener("resize",t),m()()},watch:{globalLoding:function(t){var e=this;t||this.$nextTick(function(){e.bsScroll&&e.$refs.scroll&&(e.bsScroll.destroy(),e.bsScroll=Object(f.a)(e.$refs.scroll),e.bsScroll&&e.bsScroll.on("scroll",e.slideScrollOnWatch))})},historyDialogVisible:function(t){t||this.currentCancel("不再请求剩下的历史数据")},activeSensorGroupIndex:function(){var t=this;this._refreshScroll(),this.$nextTick(function(){t._mathDeviceTypeFromTopHeight()})},activeControllerGroupIndex:function(){var t=this;this._refreshScroll(),this.$nextTick(function(){t._mathDeviceTypeFromTopHeight()})},activeStation:function(){var t=this;this._refreshScroll(),this.$nextTick(function(){t._mathDeviceTypeFromTopHeight()})}},components:{Nav:a.default,Dropdown:r.default,IotContainer:o.default,Video:s.default,Sensor:n.default,Controller:l.default,Station:c.default,Loading:u.default}},D=i("W5g0");var x=function(t){i("p6bP"),i("9MB4")},T=Object(D.a)(S,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"title",rawName:"v-title"}],staticClass:"iot-detail",attrs:{"data-title":"环境监控"}},[i("div",{staticClass:"nav-box"},[i("Nav",{ref:"navMain",on:{back:t.back}},[i("template",{slot:"center"},[i("Dropdown",{ref:"drop",attrs:{title:t.title,data:t.farmList,current:t.currentFarmid,loading:t.loading},on:{select:t.select,search:t.search,scrollToEnd:t.scrollToEnd,onchange:t.onchange}})],1),t._v(" "),i("div",{staticClass:"slot-right",attrs:{slot:"right"},slot:"right"})],2)],1),t._v(" "),t.globalLoding?i("div",{staticClass:"global-loading"},[i("Loading",{attrs:{show:!0,type:"element"}})],1):i("div",{ref:"scroll",staticClass:"iot-contain"},[i("div",{staticClass:"iot-main"},[i("div",{staticClass:"iot-container-box"},[i("ul",{staticClass:"iot-module-list"},[t.videoList.length>0?i("li",{ref:"videoMain"},[i("IotContainer",{attrs:{title:"视频监控"}},[i("div",{attrs:{slot:"container"},slot:"container"},[i("ul",{staticClass:"video-container-wrap",class:t.videoList.length>3?"be-left":""},t._l(t.videoList,function(e){return i("li",{key:e.id},[i("div",{staticClass:"video-title"},[i("span",[t._v(t._s(e.displayName))])]),t._v(" "),i("div",{staticClass:"box"},[i("div",{staticClass:"content"},[i("Video",{attrs:{"video-id":"video"+e.id,autoplay:!!e.autoplay,"video-quality":e}})],1)])])}),0)])])],1):t._e(),t._v(" "),t.sensorListHasGroup.length>0?i("li",{ref:"sensorMain"},[i("IotContainer",{attrs:{icon:"icon-chuanganshebei",title:"环境监测",primaryColor:"#00BAAD"}},[i("div",{staticClass:"sensor-container-wrap clearfix",attrs:{slot:"container"},slot:"container"},[t.sensorListHasGroup.length>1?i("ul",{staticClass:"group-list"},t._l(t.sensorListHasGroup,function(e,a){return i("li",{key:e.id,class:t.activeSensorGroupIndex===a?"active":"",on:{click:function(e){return t.handleChangeSensorGroup(a)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.groupName)+"\n\t\t\t\t\t\t\t\t\t")])}),0):t._e(),t._v(" "),t._l(t.sensorListHasGroup[t.activeSensorGroupIndex]&&t.sensorListHasGroup[t.activeSensorGroupIndex].list,function(e,a){return i("Sensor",{key:a,staticClass:"sensor-item",attrs:{data:e},on:{checkSensorHistory:t.handleSensorHistory}})})],2)])],1):t._e(),t._v(" "),t.controllerListHasGroup.length>0?i("li",{ref:"controllerMain"},[i("IotContainer",{attrs:{icon:"icon-kongzhishebei",title:"远程控制",primaryColor:"#6085E4"}},[i("div",{staticClass:"controller-container-wrap clearfix",attrs:{slot:"container"},slot:"container"},[t.controllerListHasGroup.length>1?i("ul",{staticClass:"group-list"},t._l(t.controllerListHasGroup,function(e,a){return i("li",{key:e.id,class:t.activeControllerGroupIndex===a?"active":"",on:{click:function(e){return t.handleChangeControllerGroup(a)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.groupName)+"\n\t\t\t\t\t\t\t\t\t")])}),0):t._e(),t._v(" "),t._l(t.controllerListHasGroup[t.activeControllerGroupIndex]&&t.controllerListHasGroup[t.activeControllerGroupIndex].list,function(t,e){return i("Controller",{key:e,staticClass:"controller-item",attrs:{data:t}})})],2)])],1):t._e(),t._v(" "),t.stationList.length>0?i("li",{ref:"stationMain"},[i("IotContainer",{attrs:{icon:"icon-qixiangzhan",title:"气象监测",primaryColor:"#008ADA"}},[i("div",{staticClass:"station-container-wrap clearfix",attrs:{slot:"container"},slot:"container"},[t.stationList.length>1?i("ul",{staticClass:"group-list"},t._l(t.stationList,function(e,a){return i("li",{key:e.id,class:t.activeStation===a?"active":"",on:{click:function(e){return t.handleChangeStation(a)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.clientDisplayName)+"\n\t\t\t\t\t\t\t\t\t")])}),0):t._e(),t._v(" "),i("Station",{attrs:{propertys:t.stationList[t.activeStation]&&t.stationList[t.activeStation].devicePropertys}})],1)])],1):t._e()])])]),t._v(" "),0===t.allDeviceNumber?i("div",{staticClass:"global-no-data"},[t._v("\n\t\t\t该基地暂未接入物联网设备\n\t\t")]):t._e()]),t._v(" "),i("el-dialog",{attrs:{"custom-class":t.historyCurrentData.isEnum?"history-enum-dialog":"history-number-dialog",title:t.historyCurrentData.clientDisplayName+"历史数据",visible:t.historyDialogVisible,width:t.historyCurrentData.isEnum?"550px":"910px",center:""},on:{"update:visible":function(e){t.historyDialogVisible=e}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.historyisLoad,expression:"historyisLoad"}],staticClass:"history-chart-wrap",attrs:{"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading"}},[t.historyCurrentData.isEnum?[!t.historyisLoad&&t.historyDataLength>0?i("div",{ref:"historyEnumDevice",staticClass:"history-enum-wrap"},[i("ul",{staticClass:"history-enum"},t._l(t.historyEnumList,function(e,a){return i("li",{key:a},[i("div",{staticClass:"iconfont icon-dot1"}),t._v(" "),i("div",{staticClass:"content-box"},[i("div",{staticClass:"time"},[t._v(t._s(e.time))]),t._v(" "),i("div",{staticClass:"value"},[t._v(t._s(e.value))])])])}),0)]):t._e()]:[!t.historyisLoad&&t.historyDataLength>0?i("div",{ref:"historyEchart",staticClass:"history-chart"}):t._e()],t._v(" "),t.historyisLoad||0!==t.historyDataLength?t._e():i("div",{staticClass:"history-no-data"},[t._v("近7天暂无历史数据")])],2)]),t._v(" "),!t.globalLoding&&t.slideDeviceTypeList.length>1?i("ul",{staticClass:"slide-list"},t._l(t.slideDeviceTypeList,function(e,a){return i("li",{key:a,class:a===t.activeSlide?"active":"",on:{click:function(i){return t.slideScrollToType(e.refName,a)}}},[i("div",{staticClass:"iconfont",class:e.icon}),t._v(" "),i("div",{staticClass:"device-type-name"},[t._v(t._s(e.label))])])}),0):t._e()],1)},[],!1,x,"data-v-4ac206e9",null);e.default=T.exports},OxzQ:function(t,e){},Ylx9:function(t,e){},p6bP:function(t,e){},"tI6/":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={props:{propertys:{type:Array}},filters:{toBeInt:function(t){return t?parseInt(t):"--"}}},r=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"station-image"},[e("img",{staticClass:"image",attrs:{src:i("Ixl8"),alt:"气象站"}})])}],s=i("W5g0");var o=function(t){i("zrkY")},n=Object(s.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"station-container"},[t._m(0),t._v(" "),i("ul",{staticClass:"propertys"},[t.propertys.Direction?i("li",{staticClass:"direction"},[i("div",[t._v(t._s(t.propertys.Direction.proName))]),t._v(" "),i("div",{staticClass:"value"},[t._v(t._s(t.propertys.Direction.value||"--")+t._s(t.propertys.Direction.value&&t.propertys.Direction.unit))])]):t._e(),t._v(" "),t.propertys.Light?i("li",{staticClass:"light"},[i("div",[t._v(t._s(t.propertys.Light.proName))]),t._v(" "),i("div",{staticClass:"value"},[t._v(t._s(t._f("toBeInt")(t.propertys.Light.value))+t._s(t.propertys.Light.value&&t.propertys.Light.unit))])]):t._e(),t._v(" "),t.propertys.PM25?i("li",{staticClass:"pm25"},[i("div",[t._v(t._s(t.propertys.PM25.proName))]),t._v(" "),i("div",{staticClass:"value"},[t._v(t._s(t.propertys.PM25.value||"--")+t._s(t.propertys.PM25.value&&t.propertys.PM25.unit))])]):t._e(),t._v(" "),t.propertys.Rain?i("li",{staticClass:"rain"},[i("div",[t._v(t._s(t.propertys.Rain.proName))]),t._v(" "),i("div",{staticClass:"value"},[t._v(t._s(t.propertys.Rain.value||"--")+t._s(t.propertys.Rain.value&&t.propertys.Rain.unit))])]):t._e(),t._v(" "),t.propertys.Speed?i("li",{staticClass:"speed"},[i("div",[t._v(t._s(t.propertys.Speed.proName))]),t._v(" "),i("div",{staticClass:"value"},[t._v(t._s(t.propertys.Speed.value||"--")+t._s(t.propertys.Speed.value&&t.propertys.Speed.unit))])]):t._e(),t._v(" "),t.propertys.Temp?i("li",{staticClass:"temp"},[i("div",[t._v(t._s(t.propertys.Temp.proName))]),t._v(" "),i("div",{staticClass:"value"},[t._v(t._s(t.propertys.Temp.value||"--")+t._s(t.propertys.Temp.value&&t.propertys.Temp.unit))])]):t._e(),t._v(" "),t.propertys.Humi?i("li",{staticClass:"humi"},[i("div",[t._v(t._s(t.propertys.Humi.proName))]),t._v(" "),i("div",{staticClass:"value"},[t._v(t._s(t.propertys.Humi.value||"--")+t._s(t.propertys.Humi.value&&t.propertys.Humi.unit))])]):t._e(),t._v(" "),t.propertys.Pressure?i("li",{staticClass:"pressure"},[i("div",[t._v(t._s(t.propertys.Pressure.proName))]),t._v(" "),i("div",{staticClass:"value"},[t._v(t._s(t.propertys.Pressure.value||"--")+t._s(t.propertys.Pressure.value&&t.propertys.Pressure.unit))])]):t._e()])])},r,!1,o,"data-v-e8d3473c",null);e.default=n.exports},"vT1+":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("h7qT"),r={props:{data:{type:Object}},components:{IconNum:a.default},filters:{mathNumberSize:function(t){return String(t).length>8?18:22}},methods:{checkSensorHistory:function(){var t=this.data,e=t.deviceId,i=t.identifier,a=t.clientDisplayName,r=t.numberUnit,s=t.isEnum,o=t.specs;this.$emit("checkSensorHistory",{deviceId:e,identifier:i,clientDisplayName:a,numberUnit:r,isEnum:s,specs:o})}}},s=i("W5g0");var o=function(t){i("2l3z")},n=Object(s.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sensor-container"},[i("div",{staticClass:"sensor-data"},[i("div",{staticClass:"sensor-name-logo"},[i("div",{staticClass:"logo"},[i("img",{staticClass:"sensor-logo",attrs:{src:t.data.productLogo}})]),t._v(" "),i("div",{staticClass:"client-name"},[t._v("\n\t\t\t\t"+t._s(t.data.clientDisplayName)+"\n\t\t\t")])]),t._v(" "),i("div",{staticClass:"sensor-value-unit"},[i("div",{staticClass:"value"},[t.data.isEnum?[i("div",{staticClass:"enum-value"},[t._v(t._s(t.data.value))])]:[t.data.value?i("IconNum",{attrs:{fsize:t._f("mathNumberSize")(t.data.value),num:t.data.value}}):i("div",{staticClass:"none-value"},[t._v("--")])]],2),t._v(" "),t.data.numberUnit&&t.data.value?i("div",{staticClass:"unit"},[t._v(t._s(t.data.numberUnit))]):t._e()])]),t._v(" "),i("div",{staticClass:"sensor-history"},[i("div",{staticClass:"history",on:{click:t.checkSensorHistory}},[i("span",{staticClass:"iconfont icon-lishiquxian"}),t._v(" "),i("span",[t._v("历史数据")])]),t._v(" "),t.data.valueLastTime?i("div",{staticClass:"last-time"},[t._v(t._s(t._f("upToNowTime")(t.data.valueLastTime))+"更新")]):t._e()])])},[],!1,o,"data-v-3eab41b4",null);e.default=n.exports},zrkY:function(t,e){}});
//# sourceMappingURL=55.0e46965179ce8fe2b595.js.map
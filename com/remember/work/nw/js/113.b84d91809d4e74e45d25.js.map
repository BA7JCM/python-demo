{"version":3,"file":"static/js/113.b84d91809d4e74e45d25.js","sources":["webpack:///src/components/farmdetail/farmDetailsTabs.vue"],"sourcesContent":["<template>\n\t<div class=\"tabs-container\">\n\t\t<div class=\"tabs-wrap\">\n\t\t\t<el-tabs value=\"farmIntro\" @tab-click=\"handleTabs\">\n\t\t\t\t<el-tab-pane label=\"基地介绍\" name=\"farmIntro\">\n\t\t\t\t\t<div class=\"farm-intro\" v-if=\"generateFarmIntro\">\n\t\t\t\t\t\t<div class=\"farm-intro-container\" ref=\"farmIntroContainer\">\n\t\t\t\t\t\t\t<div class=\"farm-intro-wrap\">\n\t\t\t\t\t\t\t\t<p class=\"info-item\"><b>基地简介：</b>{{ generateFarmIntro.farmIntro.farmDesc }}</p>\n\t\t\t\t\t\t\t\t<p class=\"info-item\" v-if=\"!!businessCategoryStr\"><b>经营类目：</b>{{ businessCategoryStr || '' }}</p>\n\t\t\t\t\t\t\t\t<p class=\"info-item\"><b>经营主体：</b>{{ generateFarmIntro.companyInfo.companyName }}</p>\n\t\t\t\t\t\t\t\t<p class=\"info-item\">\n\t\t\t\t\t\t\t\t\t<b>主体类型：</b\n\t\t\t\t\t\t\t\t\t>{{ generateFarmIntro.companyInfo && generateFarmIntro.companyInfo.companyCategoryVO && generateFarmIntro.companyInfo.companyCategoryVO.companyCategoryName }}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p class=\"info-item\"><b>法人代表（负责人）：</b>{{ generateFarmIntro.companyInfo.legalPerson }}</p>\n\t\t\t\t\t\t\t\t<p class=\"info-item\"><b>联系方式：</b>{{ generateFarmIntro.companyInfo.legalPersonPhone }}</p>\n\t\t\t\t\t\t\t\t<p class=\"info-item clearfix\">\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t<b>主体唯一标识：</b><i style=\"font-style: normal;\">{{ generateFarmIntro.companyInfo.enterpriseCreditCode }}</i>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p class=\"info-item clearfix\" v-if=\"generateFarmIntro.farmIntro.landRightStartDate || generateFarmIntro.farmIntro.landRightEndDate\">\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t<b>土地承包期限：</b>\n\t\t\t\t\t\t\t\t\t\t<i style=\"font-style: normal;\" v-if=\"generateFarmIntro.farmIntro.landRightStartDate\">\n\t\t\t\t\t\t\t\t\t\t\t{{ generateFarmIntro.farmIntro.landRightStartDate | dateFormat('yyyy.MM.dd') }}~{{\n\t\t\t\t\t\t\t\t\t\t\t\tgenerateFarmIntro.farmIntro.landRightEndDate | dateFormat('yyyy.MM.dd')\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"icon-pic-wrap f-right\" v-if=\"generateFarmIntro.farmIntro.landRightImgUrl\" @click=\"showCompanyIcon = true\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"iconfont icon-pic\"></i>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p class=\"info-item\">\n\t\t\t\t\t\t\t\t\t<b>基地位置与规模：</b>基地位于{{ generateFarmIntro.farmIntro.cityName }}{{ generateFarmIntro.farmIntro.countyName }}{{ generateFarmIntro.farmIntro.farmAddress }}\n\t\t\t\t\t\t\t\t\t<span v-if=\"generateFarmIntro.farmIntro.farmAcre\"\n\t\t\t\t\t\t\t\t\t\t>，占地{{ generateFarmIntro.farmIntro.farmAcre | toFloat }}{{ generateFarmIntro.farmIntro.farmAcreUnit | areaUnit }}。</span\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<div class=\"info-item\">\n\t\t\t\t\t\t\t\t\t<div class=\"head-item\">\n\t\t\t\t\t\t\t\t\t\t<b>检测与认证</b>\n\t\t\t\t\t\t\t\t\t\t<i v-if=\"checkAuthCount\">共{{ checkAuthCount }}份</i>\n\t\t\t\t\t\t\t\t\t\t<i v-else>无</i>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"content-item\" v-if=\"farminfo.inspectVOS.length\">\n\t\t\t\t\t\t\t\t\t\t<ul class=\"content-lists\">\n\t\t\t\t\t\t\t\t\t\t\t<li class=\"list\" v-if=\"farminfo.inspectVOS.length\" v-for=\"(item, index) in farminfo.inspectVOS\" :key=\"index\">\n\t\t\t\t\t\t\t\t\t\t\t\t<el-tooltip class=\"item\" effect=\"dark\" :content=\"item.reportName\" placement=\"top-start\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"list-name\">{{ item.reportName }}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t</el-tooltip>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"list-line\"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"list-des\" @click=\"openViews(item.inspectReportImages)\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"iconfont icon-pic\"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ item.inspectReportImages.length }}张\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</el-tab-pane>\n\t\t\t\t<el-tab-pane label=\"农事操作\" name=\"input\">\n\t\t\t\t\t<div class=\"farmword-container\" v-if=\"generateFarmIntro\">\n\t\t\t\t\t\t<div ref=\"farmRecordScroll\" class=\"farmword-wrap\">\n\t\t\t\t\t\t\t<farm-record :companyId=\"farminfo.companyVO.id\" :farmId=\"farmId\"></farm-record>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</el-tab-pane>\n\t\t\t</el-tabs>\n\t\t</div>\n\t\t<views :pics=\"[generateFarmIntro.farmIntro.landRightImgUrl || '']\" v-if=\"showCompanyIcon\" @viewerListen=\"showCompanyIcon = false\"></views>\n\t\t<views :pics=\"viewPics\" v-if=\"showViews\" @viewerListen=\"showViews = false\"></views>\n\t\t<!--未来预计产量-->\n\t\t<estimate-yield-model\n\t\t\tv-if=\"showEstimateYieldModel\"\n\t\t\t:show-model.sync=\"showEstimateYieldModel\"\n\t\t\t:goods-subject-unit=\"estimateGoodsSubjectUnit\"\n\t\t\t:estimate-yield-subject-model=\"estimateYieldSubjectModel\"\n\t\t\t:goods-subject-list-model=\"estimateGoodsSubjectList\"\n\t\t></estimate-yield-model>\n\t</div>\n</template>\n\n<script>\nimport {deepCopy, _initBScroll, dateFormat, maxDecimalPlaces, unitTranslate} from '@/common/fn';\nimport farmRecord from '@/components/plotlist/farm-record';\n// 图片查看\nimport views from '@/components/common/viewPics';\nimport estimateYieldModel from '@/components/farmdetail/estimateYieldModel';\nimport farmIncome from '@/common/data/jiujiang-data.js'; // 九江 测试服正式服 需用的假数据\nconst color = ['#F0C87B', '#A6D889', '#DD90CB', '#9173FE', '#4DCBFF', '#1DE9B6', '#ca8622', '#bda29a', '#6e7074', '#546570', '#c4ccd3'];\nconst sales = [];\nconst xData = ['一月', '二月', '三月', '四月', '五月', '六月'];\nconst data = [220, 182, 191, 234, 290, 330];\nconst barData = xData.map((item, index) => {\n\treturn {\n\t\tname: item,\n\t\tvalue: data[index],\n\t\titemStyle: {\n\t\t\tcolor: color[index]\n\t\t}\n\t};\n});\nconst barOption = {\n\ttooltip: {\n\t\tshow: true,\n\t\ttrigger: 'item',\n\t\ttextStyle: {\n\t\t\tfontSize: 12,\n\t\t\tcolor: '#ffffff'\n\t\t}\n\t},\n\ttitle: {\n\t\ttext: '近半年销售额',\n\t\ttextStyle: {\n\t\t\tcolor: '#02E4EE',\n\t\t\tfontSize: 16,\n\t\t\tfontWeight: 'bold'\n\t\t},\n\t\tsubtextStyle: {\n\t\t\tcolor: '#6DC1CB',\n\t\t\tfontSize: 12,\n\t\t\tfontWeight: 400\n\t\t},\n\t\tleft: 'center',\n\t\tpadding: [17, 0, 0, 0],\n\t\titemGap: 10,\n\t\ttextVerticalAlign: 'top' // subtext: '单位：万元'\n\t},\n\tgrid: {\n\t\tshow: true,\n\t\ttop: 66,\n\t\tright: 24,\n\t\theight: 130,\n\t\twidth: 270,\n\t\tborderColor: '#0D394A'\n\t},\n\tcolor: color,\n\txAxis: {\n\t\tdata: xData,\n\t\tscale: true,\n\t\taxisLabel: {\n\t\t\ttextStyle: {\n\t\t\t\tcolor: '#6DC1CB',\n\t\t\t\tfontSize: 12\n\t\t\t},\n\t\t\talign: 'center'\n\t\t},\n\t\taxisTick: {\n\t\t\tshow: false\n\t\t},\n\t\taxisLine: {\n\t\t\tshow: true,\n\t\t\tlineStyle: {\n\t\t\t\tcolor: '#0D394A'\n\t\t\t}\n\t\t},\n\t\tz: 10\n\t},\n\tyAxis: {\n\t\tnameTextStyle: {\n\t\t\tfontSize: 12,\n\t\t\tcolor: '#6DC1CB',\n\t\t\tpadding: [0, 0, 0, 0]\n\t\t},\n\t\taxisLine: {\n\t\t\tshow: false,\n\t\t\tlineStyle: {\n\t\t\t\tcolor: '#0D394A'\n\t\t\t}\n\t\t},\n\t\taxisTick: {\n\t\t\tshow: false\n\t\t},\n\t\tsplitLine: {\n\t\t\tshow: true,\n\t\t\tlineStyle: {\n\t\t\t\tcolor: '#0D394A'\n\t\t\t}\n\t\t},\n\t\taxisLabel: {\n\t\t\ttextStyle: {\n\t\t\t\tcolor: '#6DC1CB',\n\t\t\t\tfontSize: 12\n\t\t\t}\n\t\t}\n\t},\n\tseries: [\n\t\t{\n\t\t\ttype: 'bar',\n\t\t\tbarWidth: 24,\n\t\t\tdata: barData\n\t\t}\n\t]\n};\n/* 冗余代码坐等测试批准删除🔪 */\nconst _farmIncome = (() => {\n\tconst _o = {};\n\tfor (const [key, value] of Object.entries(farmIncome)) {\n\t\tconst o = {};\n\t\tvalue.forEach(item => {\n\t\t\to[item.incomeDateStr] = item;\n\t\t});\n\t\t_o[key] = o;\n\t}\n\treturn _o;\n})();\n\nexport default {\n\tname: 'farmDetailsTabs',\n\tdata() {\n\t\treturn {\n\t\t\t// 销售额\n\t\t\tsales: null,\n\t\t\tsalesBar: deepCopy(barOption), // 产量\n\t\t\tyield: null,\n\t\t\tyieldBar: deepCopy(barOption),\n\t\t\tfarmRecordList: [],\n\t\t\testimateYield: null,\n\t\t\testimateYieldBar: deepCopy(barOption),\n\t\t\tgenerateFarmIntro: {\n\t\t\t\t// 基地信息\n\t\t\t\tfarmIntro: {}, // 公司信息\n\t\t\t\tcompanyInfo: {}, // 基地过去六个月的收入总计\n\t\t\t\tfarmIncomeVOS: [], // 基地过去六个月的采收总计\n\t\t\t\tgovPickVOList: [],\n\t\t\t\tbusinessCategoryList: []\n\t\t\t},\n\t\t\tfarmIntroContainer: null,\n\t\t\tfarmRecordScroll: null,\n\t\t\tshowCompanyIcon: false,\n\t\t\tviewPics: [],\n\t\t\tshowViews: false,\n\t\t\tgoodsSubjectUnit: null,\n\t\t\testimateGoodsSubjectUnit: null, // 实际产品大类列表\n\t\t\tgoodsSubjectList: [\n\t\t\t\t/* { name: '农业', id: 'agri' }, { name: '林业', id: 'forestry' }, { name: '畜牧业', id: 'animal' }, { name: '渔业', id: 'fishery' } */\n\t\t\t],\n\t\t\testimateGoodsSubjectList: [],\n\t\t\tyieldSubject: 'agri',\n\t\t\testimateYieldSubject: 'agri',\n\t\t\testimateYieldSubjectModel: 'agri',\n\t\t\tshowEstimateYieldModel: false,\n\t\t\tcurDate: null // 经营主体 better-scroll实例\n\t\t};\n\t},\n\tprops: ['farminfo', 'farmId'],\n\tcomputed: {\n\t\tbusinessCategoryStr() {\n\t\t\t//农场经营类目\n\t\t\tif (this.generateFarmIntro.businessCategoryList.length && this.generateFarmIntro.farmIntro.businessCategoryIdList && this.generateFarmIntro.farmIntro.businessCategoryIdList.length) {\n\t\t\t\tvar nowFarmCateList = this.generateFarmIntro.farmIntro.businessCategoryIdList;\n\t\t\t\tvar catelist = this.generateFarmIntro.businessCategoryList;\n\t\t\t\tvar catenames = [];\n\t\t\t\tcatelist.map(cate => {\n\t\t\t\t\tnowFarmCateList.includes(cate['id']) && catenames.push(cate['bizCategoryName']);\n\t\t\t\t});\n\t\t\t\treturn catenames.join('，');\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.initData();\n\t},\n\tasync mounted() {\n\t\tawait this.getCropSubject(); // tab1 获取实际作物大类列表\n\t\tthis.$nextTick(async () => {\n\t\t\tthis.farmIntroContainer = _initBScroll(this.$refs.farmIntroContainer, {\n\t\t\t\tscrollX: false,\n\t\t\t\tfreeScroll: false,\n\t\t\t\tclick: false\n\t\t\t});\n\t\t\tthis.farmRecordScroll = _initBScroll(this.$refs.farmRecordScroll, {\n\t\t\t\tscrollX: false,\n\t\t\t\tfreeScroll: false,\n\t\t\t\tclick: false\n\t\t\t});\n\t\t});\n\t},\n\tmethods: {\n\t\tinitData() {\n\t\t\t// 获取基地介绍\n\t\t\tthis.generateFarmIntro = {\n\t\t\t\t// 基地信息\n\t\t\t\tfarmIntro: this.farminfo.farmDetailVO, // 公司信息\n\t\t\t\tcompanyInfo: this.farminfo.companyVO || {}, // 基地过去六个月的收入总计\n\t\t\t\tfarmIncomeVOS: this.farminfo.farmIncomeVOS, // 基地过去六个月的采收总计\n\t\t\t\tgovPickVOList: this.farminfo.govPickVOList,\n\t\t\t\tbusinessCategoryList: this.farminfo.businessCategoryList\n\t\t\t};\n\t\t\tthis.checkAuthCount = this.farminfo.inspectVOS.length; // 检测认证数量\n\t\t\t// 农事记录 列表\n\t\t},\n\n\t\t// 监测大类是否需要需要换算单位\n\t\tcheckSubjectChangeUnit(subject) {\n\t\t\tconst mapping = {\n\t\t\t\tagri: true,\n\t\t\t\tforestry: false,\n\t\t\t\tanimal: false,\n\t\t\t\tfishery: true\n\t\t\t};\n\t\t\treturn mapping[subject];\n\t\t},\n\t\tyieldXAxis(mode, format = 'yyyy.MM') {\n\t\t\tconst curDateTimestamp = new Date(this.curDate).setDate(1);\n\t\t\tlet curM = new Date(curDateTimestamp).getMonth();\n\t\t\tconst xAxis = [];\n\t\t\tfor (let i = 0; i < 6; i++) {\n\t\t\t\txAxis.push(mode === 'add' ? dateFormat(new Date(curDateTimestamp).setMonth(curM++), format) : dateFormat(new Date(curDateTimestamp).setMonth(--curM), format));\n\t\t\t}\n\t\t\t// console.log(dateFormat(curDate.setMonth(11), 'yyyy.MM'));\n\t\t\treturn xAxis;\n\t\t},\n\n\t\t// 获取实际作物大类列表\n\t\tasync getCropSubject() {\n\t\t\treturn this.$ajax\n\t\t\t\t.post(this.$api.public.farmCropSubject, {\n\t\t\t\t\tfarmId: this.farmId\n\t\t\t\t})\n\t\t\t\t.then(({data: res}) => {\n\t\t\t\t\tthis.curDate = res.curDate;\n\t\t\t\t\tif (res.respCode === 0) {\n\t\t\t\t\t\tthis.goodsSubjectUnit = {};\n\t\t\t\t\t\tif (res.obj.list.length === 0) return false;\n\t\t\t\t\t\tthis.goodsSubjectList = res.obj.list.map(item => {\n\t\t\t\t\t\t\tthis.goodsSubjectUnit[item.cropSubjectIdentifier] = item.cropSubjectIdentifier === 'forestry' || item.cropSubjectIdentifier === 'animal' ? item.cropCategoryUnitAll : '吨';\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tname: item.cropSubjectNickname,\n\t\t\t\t\t\t\t\tid: item.cropSubjectIdentifier\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.yieldSubject = res.obj.list[0].cropSubjectIdentifier;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\n\t\t// 获取预计作物大类列表\n\t\tgetEstimateCropSubject() {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.$ajax\n\t\t\t\t\t.post(this.$api.public.getEstimateFarmCropSubject, {\n\t\t\t\t\t\tfarmId: this.farmId\n\t\t\t\t\t})\n\t\t\t\t\t.then(({data: res}) => {\n\t\t\t\t\t\tif (res.respCode === 0) {\n\t\t\t\t\t\t\tresolve(res.obj);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t// 未来预计产量\n\t\tasync processEstimateCropSubject() {\n\t\t\tconst res = await this.getEstimateCropSubject();\n\t\t\tthis.estimateGoodsSubjectUnit = {};\n\t\t\tif (res.list.length === 0) return false;\n\t\t\tthis.estimateGoodsSubjectList = res.list.map(item => {\n\t\t\t\tthis.estimateGoodsSubjectUnit[item.cropSubjectIdentifier] = item.cropSubjectIdentifier === 'forestry' || item.cropSubjectIdentifier === 'animal' ? item.cropCategoryUnitAll : '吨';\n\t\t\t\treturn {\n\t\t\t\t\tname: item.cropSubjectNickname,\n\t\t\t\t\tid: item.cropSubjectIdentifier\n\t\t\t\t};\n\t\t\t});\n\t\t\tthis.estimateYieldSubject = res.list[0].cropSubjectIdentifier;\n\t\t},\n\n\t\t// 获取近半年的产量\n\t\tgetOutput(subjectIdentifier) {\n\t\t\treturn this.$ajax\n\t\t\t\t.post(this.$api.farmDetail.getOutputListByFarmId, {\n\t\t\t\t\tdateList: this.yieldXAxis('minus', 'yyyy-MM-dd').reverse(),\n\t\t\t\t\tfarmId: this.farmId,\n\t\t\t\t\tsubjectIdentifier\n\t\t\t\t})\n\t\t\t\t.then(({data: res}) => {\n\t\t\t\t\tif (res.respCode === 0) {\n\t\t\t\t\t\treturn res.obj;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\n\t\t// 获取未来预计产量数据表\n\t\tgetEstimateYieldEchartsData() {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.$ajax\n\t\t\t\t\t.post(this.$api.farmDetail.getPickForecastMonthByFarmId, {\n\t\t\t\t\t\tfarmId: this.$route.params.farmid,\n\t\t\t\t\t\tsubjectIdentifier: this.estimateYieldSubject\n\t\t\t\t\t})\n\t\t\t\t\t.then(({data: res}) => {\n\t\t\t\t\t\tif (res.respCode === 0) {\n\t\t\t\t\t\t\tresolve(res.obj);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\treject(new Error(err));\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t// 近半年销售额\n\t\tloadSalesBar() {\n\t\t\tconst unit = '万元';\n\t\t\tconst fakeData = _farmIncome[this.generateFarmIntro.farmIntro.farmId];\n\t\t\tthis.salesBar.title.text = '近半年销售额';\n\t\t\tthis.salesBar.title.subtext = `单位：${unit}`;\n\t\t\tthis.salesBar.xAxis.data = this.generateFarmIntro.farmIncomeVOS.map(item => {\n\t\t\t\treturn dateFormat(item.incomeDate, 'yyyy.MM');\n\t\t\t});\n\t\t\tthis.salesBar.xAxis.axisLabel.formatter = v => v; // `${v.split('.')[1]}\\n${v.split('.')[0]}`;\n\t\t\tthis.salesBar.series[0].data = this.generateFarmIntro.farmIncomeVOS.map((item, index) => {\n\t\t\t\treturn {\n\t\t\t\t\tname: dateFormat(item.incomeDate, 'yyyy.MM'),\n\t\t\t\t\tvalue: (() => {\n\t\t\t\t\t\tif (fakeData) {\n\t\t\t\t\t\t\treturn fakeData[item.incomeDateStr]\n\t\t\t\t\t\t\t\t? maxDecimalPlaces({\n\t\t\t\t\t\t\t\t\t\tvalue: fakeData[item.incomeDateStr].totalAmount / Math.pow(10, 4)\n\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t\t: 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn maxDecimalPlaces({\n\t\t\t\t\t\t\tvalue: item.totalAmount / Math.pow(10, 4)\n\t\t\t\t\t\t});\n\t\t\t\t\t})(),\n\t\t\t\t\titemStyle: {\n\t\t\t\t\t\tcolor: color[index]\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t});\n\t\t\tthis.salesBar.tooltip.formatter = v =>\n\t\t\t\t`${v.name}<br/>${\n\t\t\t\t\tunitTranslate({\n\t\t\t\t\t\tvalue: v.value,\n\t\t\t\t\t\tunit: '元',\n\t\t\t\t\t\tbase: 10000\n\t\t\t\t\t}).formatter\n\t\t\t\t}`;\n\t\t\tthis.salesBar.yAxis.axisLabel.formatter = v => unitTranslate({value: v}).formatter;\n\t\t\tthis.sales = this.$echarts.init(this.$refs.sales);\n\t\t\tthis.sales.setOption(this.salesBar);\n\t\t},\n\n\t\t// 初始化实际产量\n\t\tasync loadYieldBar(subjectIdentifier) {\n\t\t\tconst unit = this.goodsSubjectUnit[subjectIdentifier] || '吨';\n\t\t\tconst res = await this.getOutput(subjectIdentifier);\n\t\t\tthis.yieldBar.title.text = '近半年实际产量';\n\t\t\tthis.yieldBar.xAxis.data = res.map(item => {\n\t\t\t\treturn dateFormat(item.pickTime, 'yyyy.MM');\n\t\t\t});\n\t\t\tthis.yieldBar.yAxis.name = `单位：${unit}`;\n\t\t\tthis.yieldBar.xAxis.axisLabel.formatter = v => v;\n\t\t\tthis.yieldBar.series[0].data = res.map((item, index) => {\n\t\t\t\treturn {\n\t\t\t\t\tname: dateFormat(item.pickTime, 'yyyy.MM'),\n\t\t\t\t\tvalue: maxDecimalPlaces({value: this.checkSubjectChangeUnit(subjectIdentifier) ? item.sumPickOutput / Math.pow(10, 3) : item.sumPickOutput}), // 公斤 - 吨\n\t\t\t\t\titemStyle: {\n\t\t\t\t\t\tcolor: color[index]\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t});\n\t\t\tthis.yieldBar.yAxis.axisLabel.formatter = v => unitTranslate({value: v}).formatter;\n\t\t\tthis.yieldBar.tooltip.formatter = v =>\n\t\t\t\t`${v.name}<br/>${\n\t\t\t\t\tunitTranslate({\n\t\t\t\t\t\tvalue: v.value,\n\t\t\t\t\t\tunit\n\t\t\t\t\t}).formatter\n\t\t\t\t}`;\n\t\t\t// console.log(this.$refs.yield);\n\t\t\tthis.yield = this.$echarts.init(this.$refs.yield);\n\t\t\tthis.yield.setOption(this.yieldBar);\n\t\t},\n\n\t\t// 初始化未来预计产量\n\t\tasync loadEstimateYieldEchart(subjectIdentifier) {\n\t\t\tconst res = await this.getEstimateYieldEchartsData();\n\t\t\tconst unit = this.estimateGoodsSubjectUnit[subjectIdentifier] || '吨';\n\t\t\tthis.estimateYieldBar.title.text = '未来预计产量';\n\t\t\tthis.estimateYieldBar.xAxis.data = res.total.map(item => {\n\t\t\t\treturn dateFormat(new Date(`${item.pickMonthStr}-01`), 'yyyy.MM');\n\t\t\t});\n\t\t\tthis.estimateYieldBar.series[0].data = res.total.map((item, index) => {\n\t\t\t\treturn {\n\t\t\t\t\tname: dateFormat(new Date(`${item.pickMonthStr}-01`), 'yyyy.MM'),\n\t\t\t\t\tvalue: maxDecimalPlaces({value: this.checkSubjectChangeUnit(subjectIdentifier) ? item.sumTotal / Math.pow(10, 3) : item.sumTotal}), // 公斤 - 吨\n\t\t\t\t\titemStyle: {\n\t\t\t\t\t\tcolor: color[index]\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t});\n\t\t\tthis.estimateYieldBar.yAxis.name = `单位：${unit}`;\n\t\t\tthis.estimateYieldBar.xAxis.axisLabel.formatter = v => v;\n\t\t\tthis.estimateYieldBar.yAxis.axisLabel.formatter = v => unitTranslate({value: v}).formatter;\n\t\t\tthis.estimateYieldBar.tooltip.formatter = v =>\n\t\t\t\t`${v.name}<br/>${\n\t\t\t\t\tunitTranslate({\n\t\t\t\t\t\tvalue: v.value,\n\t\t\t\t\t\tunit\n\t\t\t\t\t}).formatter\n\t\t\t\t}`;\n\t\t\tthis.estimateYield = this.$echarts.init(this.$refs.estimateYield);\n\t\t\tthis.estimateYield.setOption(this.estimateYieldBar);\n\t\t\t// 检测与认证趋势图click事件\n\t\t\tthis.estimateYield.on('click', r => {\n\t\t\t\t// 触发父级关闭弹框等交互\n\t\t\t\tthis.$emit('closeAllDialogEv');\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t// 防止弹框重叠的情况\n\t\t\t\t\tthis.estimateYieldSubjectModel = this.estimateYieldSubject;\n\t\t\t\t\tthis.showEstimateYieldModel = true;\n\t\t\t\t}, 200);\n\t\t\t});\n\t\t},\n\t\thandleTabs(tar) {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tif (tar.name === 'input') {\n\t\t\t\t\tthis.farmRecordScroll.refresh();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\topenViews(p) {\n\t\t\tthis.showViews = true;\n\t\t\tthis.viewPics = p;\n\t\t}\n\t},\n\tcomponents: {\n\t\tfarmRecord,\n\t\tviews,\n\t\testimateYieldModel\n\t}\n};\n</script>\n<style scoped lang=\"scss\">\n@import '~styles/selectSkin_default';\n@import '~styles/tabsSkin_default';\n@import '~styles/scrollbarSkin_default';\n@import '~styles/tooltipSkin_default';\n@import '~styles/farmdetails/farmdetailstabs';\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/farmdetail/farmDetailsTabs.vue"],"mappings":"AA+FA","sourceRoot":""}
{"version":3,"file":"static/js/137.78c4508c7110495d41c1.js","sources":["webpack:///src/components/farmdetail/farmDetailsTabs-other.vue"],"sourcesContent":["<template>\n\t<div class=\"tabs-container\">\n\t\t<div class=\"tabs-wrap\">\n\t\t\t<el-tabs value=\"farmIntro\" @tab-click=\"handleTabs\">\n\t\t\t\t<el-tab-pane label=\"基地介绍\" name=\"farmIntro\">\n\t\t\t\t\t<div class=\"farm-intro\">\n\t\t\t\t\t\t<div class=\"farm-intro-container\" ref=\"farmIntroContainer\" v-if=\"!!generateFarmIntro\">\n\t\t\t\t\t\t\t<div class=\"farm-intro-wrap\">\n\t\t\t\t\t\t\t\t<div class=\"info-item\">\n\t\t\t\t\t\t\t\t\t<p class=\"info-collapse\" ref=\"collapse\" :class=\"{'info-collapse-active': isCollapse, 'info-collapse-has': hasCollapse}\">\n\t\t\t\t\t\t\t\t\t\t<b>基地简介：</b>\n\t\t\t\t\t\t\t\t\t\t<span>{{ generateFarmIntro.remark }}</span>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<template v-if=\"hasCollapse\">\n\t\t\t\t\t\t\t\t\t\t<p v-if=\"!isCollapse\" style=\"height: 15px\">\n\t\t\t\t\t\t\t\t\t\t\t<!-- 解决折叠后overflow下bottom没有padding -->\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-if=\"hasCollapse\">\n\t\t\t\t\t\t\t\t\t\t<p class=\"info-more\" v-if=\"!isCollapse\">\n\t\t\t\t\t\t\t\t\t\t\t<span @click=\"collapse\" class=\"info-more-text\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span>展开</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"el-icon-d-arrow-right\"></i>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<p class=\"info-item\"><b>经营主体：</b>{{ generateFarmIntro.name }}</p>\n\t\t\t\t\t\t\t\t<p class=\"info-item\"><b>主体类型：</b>{{ generateFarmIntro.type }}</p>\n\t\t\t\t\t\t\t\t<p class=\"info-item\"><b>法人代表（负责人）：</b>{{ generateFarmIntro.man1 }}</p>\n\t\t\t\t\t\t\t\t<p class=\"info-item\"><b>联系方式：</b>{{ generateFarmIntro.phone ? generateFarmIntro.phone : '' }}</p>\n\t\t\t\t\t\t\t\t<p class=\"info-item clearfix\">\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t<b>主体唯一标识：</b><i style=\"font-style: normal;\">{{ generateFarmIntro.creditCode }}</i>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p class=\"info-item\"><b>基地位置：</b>{{ generateFarmIntro.addr2 ? '基地位于' + generateFarmIntro.addr2 : '' }}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</el-tab-pane>\n\t\t\t\t<el-tab-pane label=\"农事操作\" name=\"input\">\n\t\t\t\t\t<div class=\"farmword-container\">\n\t\t\t\t\t\t<div ref=\"farmRecordScroll\" class=\"farmword-wrap\">\n\t\t\t\t\t\t\t<farm-record-other :companyCode=\"companyCode\" @loadDataReady=\"loadDataReady\"></farm-record-other>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</el-tab-pane>\n\t\t\t</el-tabs>\n\t\t</div>\n\t\t<views :pics=\"[generateFarmIntro.landRightImgUrl || '']\" v-if=\"showCompanyIcon\" @viewerListen=\"showCompanyIcon = false\"></views>\n\t\t<views :pics=\"viewPics\" v-if=\"showViews\" @viewerListen=\"showViews = false\"></views>\n\t\t<!--未来预计产量-->\n\t\t<estimate-yield-model\n\t\t\tv-if=\"showEstimateYieldModel\"\n\t\t\t:show-model.sync=\"showEstimateYieldModel\"\n\t\t\t:goods-subject-unit=\"estimateGoodsSubjectUnit\"\n\t\t\t:estimate-yield-subject-model=\"estimateYieldSubjectModel\"\n\t\t\t:goods-subject-list-model=\"estimateGoodsSubjectList\"\n\t\t></estimate-yield-model>\n\t</div>\n</template>\n\n<script>\nimport {_initBScroll, dateFormat} from '@/common/fn';\nimport farmRecordOther from '@/components/plotlist/farm-record-other';\n// 图片查看\nimport views from '@/components/common/viewPics';\nimport estimateYieldModel from '@/components/farmdetail/estimateYieldModel';\n\nexport default {\n\tname: 'farmDetailsTabs',\n\tdata() {\n\t\treturn {\n\t\t\t// 销售额\n\t\t\tyield: null,\n\t\t\testimateYield: null,\n\t\t\tgenerateFarmIntro: {\n\t\t\t\t// // 基地信息\n\t\t\t\t// farmIntro: {}, // 公司信息\n\t\t\t\t// companyInfo: {}, // 基地过去六个月的收入总计\n\t\t\t},\n\t\t\tfarmIntroContainer: null,\n\t\t\tfarmRecordScroll: null,\n\t\t\tshowCompanyIcon: false,\n\t\t\tviewPics: [],\n\t\t\tshowViews: false,\n\t\t\tgoodsSubjectUnit: null,\n\t\t\testimateGoodsSubjectUnit: null, // 实际产品大类列表\n\t\t\tgoodsSubjectList: [\n\t\t\t\t/* { name: '农业', id: 'agri' }, { name: '林业', id: 'forestry' }, { name: '畜牧业', id: 'animal' }, { name: '渔业', id: 'fishery' } */\n\t\t\t],\n\t\t\testimateGoodsSubjectList: [],\n\t\t\tyieldSubject: 'agri',\n\t\t\testimateYieldSubject: 'agri',\n\t\t\testimateYieldSubjectModel: 'agri',\n\t\t\tshowEstimateYieldModel: false,\n\t\t\tcurDate: null, // 经营主体 better-scroll实例\n\t\t\tisCollapse: false,\n\t\t\thasCollapse: false\n\t\t};\n\t},\n\tprops: ['companyCode'],\n\tcreated() {\n\t\tthis.initData();\n\t},\n\tasync mounted() {\n\t\t// await this.getCropSubject(); // tab1 获取实际作物大类列表\n\t\t// this.$nextTick(async () => {\n\t\t// \tthis.farmRecordScroll = _initBScroll(this.$refs.farmRecordScroll, {\n\t\t// \t\tscrollX: false,\n\t\t// \t\tfreeScroll: false,\n\t\t// \t\tclick: false\n\t\t// \t});\n\t\t// });\n\t},\n\tmethods: {\n\t\tinitData() {\n\t\t\tthis.getZzBasCompany();\n\t\t},\n\t\tloadDataReady() {\n\t\t\tthis.$nextTick(async () => {\n\t\t\t\tthis.farmRecordScroll = _initBScroll(this.$refs.farmRecordScroll, {\n\t\t\t\t\tscrollX: false,\n\t\t\t\t\tfreeScroll: false,\n\t\t\t\t\tclick: false,\n\t\t\t\t\tscrollbar: {\n\t\t\t\t\t\tfade: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t// 获取实际作物大类列表\n\t\tasync getCropSubject() {\n\t\t\treturn this.$ajax\n\t\t\t\t.post(this.$api.public.farmCropSubject, {\n\t\t\t\t\tfarmId: this.farmId\n\t\t\t\t})\n\t\t\t\t.then(({data: res}) => {\n\t\t\t\t\tthis.curDate = res.curDate;\n\t\t\t\t\tif (res.respCode === 0) {\n\t\t\t\t\t\tthis.goodsSubjectUnit = {};\n\t\t\t\t\t\tif (res.obj.list.length === 0) return false;\n\t\t\t\t\t\tthis.goodsSubjectList = res.obj.list.map(item => {\n\t\t\t\t\t\t\tthis.goodsSubjectUnit[item.cropSubjectIdentifier] = item.cropSubjectIdentifier === 'forestry' || item.cropSubjectIdentifier === 'animal' ? item.cropCategoryUnitAll : '吨';\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tname: item.cropSubjectNickname,\n\t\t\t\t\t\t\t\tid: item.cropSubjectIdentifier\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.yieldSubject = res.obj.list[0].cropSubjectIdentifier;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tasync getZzBasCompany() {\n\t\t\tconst res = await this.$ajax.post(this.$api.govPatrol.getZzBasCompany, {\n\t\t\t\tcompanyCode: this.companyCode\n\t\t\t});\n\t\t\tif (res.data.respCode === 0) {\n\t\t\t\tthis.generateFarmIntro = res.data.obj || {};\n\t\t\t}\n\t\t},\n\t\thandleTabs(tar) {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tif (tar.name === 'input' && this.farmRecordScroll) {\n\t\t\t\t\tthis.farmRecordScroll.refresh();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tcollapse() {\n\t\t\tthis.isCollapse = !this.isCollapse;\n\t\t\t// 动画延迟导致滚动无法刷新，增加定时器解决动画延迟问题\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!this.farmIntroContainer) {\n\t\t\t\t\tthis.farmIntroContainer = _initBScroll(this.$refs.farmIntroContainer, {\n\t\t\t\t\t\tscrollX: false,\n\t\t\t\t\t\tfreeScroll: false,\n\t\t\t\t\t\tclick: false,\n\t\t\t\t\t\tscrollbar: {\n\t\t\t\t\t\t\tfade: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.farmIntroContainer.refresh();\n\t\t\t\t}\n\t\t\t}, 300);\n\t\t},\n\t\topenViews(p) {\n\t\t\tthis.showViews = true;\n\t\t\tthis.viewPics = p;\n\t\t}\n\t},\n\twatch: {\n\t\tgenerateFarmIntro() {\n\t\t\tthis.$nextTick(async () => {\n\t\t\t\tthis.farmIntroContainer = _initBScroll(this.$refs.farmIntroContainer, {\n\t\t\t\t\tscrollX: false,\n\t\t\t\t\tfreeScroll: false,\n\t\t\t\t\tclick: false,\n\t\t\t\t\tscrollbar: {\n\t\t\t\t\t\tfade: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.hasCollapse = this.$refs.collapse.offsetHeight > 130 ? true : false;\n\t\t\t});\n\t\t},\n\t\thasCollapse(newVal) {\n\t\t\tif (newVal) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (this.farmIntroContainer) {\n\t\t\t\t\t\tthis.farmIntroContainer.refresh();\n\t\t\t\t\t}\n\t\t\t\t}, 400);\n\t\t\t}\n\t\t}\n\t},\n\tcomponents: {\n\t\tfarmRecordOther,\n\t\tviews,\n\t\testimateYieldModel\n\t}\n};\n</script>\n<style scoped lang=\"scss\">\n@import '~styles/selectSkin_default';\n@import '~styles/tabsSkin_default';\n@import '~styles/scrollbarSkin_default';\n@import '~styles/tooltipSkin_default';\n@import '~styles/farmdetails/farmdetailstabs';\n\n.info-item {\n\tposition: relative;\n}\n.info-collapse {\n\toverflow: hidden;\n\tmax-height: 5000px;\n\tpadding: 15px;\n\t// padding-bottom: 0;\n\ttransition: max-height 0.2s ease;\n\n\t&.info-collapse-has {\n\t\tmax-height: 100px;\n\t}\n\t&.info-collapse-active {\n\t\tmax-height: 5000px;\n\t\t// transform: translateY(100%);\n\t}\n}\n.info-more {\n\tposition: absolute;\n\tbottom: 10px;\n\tright: 15px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-end;\n\twidth: 75px;\n\t// background-color: transparent\n\tbackground-image: linear-gradient(to right, rgba(6, 31, 54, 0.4), #061f36 30%);\n\tbox-sizing: border-box;\n\n\t.info-more-text {\n\t\tcolor: #00f6ff;\n\t\tcursor: pointer;\n\t}\n\n\t.el-icon-d-arrow-right {\n\t\ttransform: rotate(90deg);\n\t}\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/farmdetail/farmDetailsTabs-other.vue"],"mappings":"AAsEA","sourceRoot":""}
webpackJsonp([137],{RRlK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("VCTt"),n=a("xUeN"),o=a("c65A"),s=a("o2Qu");function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function r(n,o){try{var s=t[n](o),i=s.value}catch(e){return void a(e)}if(!s.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}("next")})}}var c={name:"farmDetailsTabs",data:function(){return{yield:null,estimateYield:null,generateFarmIntro:{},farmIntroContainer:null,farmRecordScroll:null,showCompanyIcon:!1,viewPics:[],showViews:!1,goodsSubjectUnit:null,estimateGoodsSubjectUnit:null,goodsSubjectList:[],estimateGoodsSubjectList:[],yieldSubject:"agri",estimateYieldSubject:"agri",estimateYieldSubjectModel:"agri",showEstimateYieldModel:!1,curDate:null,isCollapse:!1,hasCollapse:!1}},props:["companyCode"],created:function(){this.initData()},mounted:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t,e)}))()},methods:{initData:function(){this.getZzBasCompany()},loadDataReady:function(){var e=this;this.$nextTick(i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.farmRecordScroll=Object(r.a)(e.$refs.farmRecordScroll,{scrollX:!1,freeScroll:!1,click:!1,scrollbar:{fade:!0}});case 1:case"end":return t.stop()}},t,e)})))},getCropSubject:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.$ajax.post(e.$api.public.farmCropSubject,{farmId:e.farmId}).then(function(t){var a=t.data;if(e.curDate=a.curDate,0===a.respCode)return e.goodsSubjectUnit={},0!==a.obj.list.length&&(e.goodsSubjectList=a.obj.list.map(function(t){return e.goodsSubjectUnit[t.cropSubjectIdentifier]="forestry"===t.cropSubjectIdentifier||"animal"===t.cropSubjectIdentifier?t.cropCategoryUnitAll:"吨",{name:t.cropSubjectNickname,id:t.cropSubjectIdentifier}}),e.yieldSubject=a.obj.list[0].cropSubjectIdentifier,!0)}));case 1:case"end":return t.stop()}},t,e)}))()},getZzBasCompany:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$ajax.post(e.$api.govPatrol.getZzBasCompany,{companyCode:e.companyCode});case 2:0===(a=t.sent).data.respCode&&(e.generateFarmIntro=a.data.obj||{});case 4:case"end":return t.stop()}},t,e)}))()},handleTabs:function(e){var t=this;this.$nextTick(function(){"input"===e.name&&t.farmRecordScroll&&t.farmRecordScroll.refresh()})},collapse:function(){var e=this;this.isCollapse=!this.isCollapse,setTimeout(function(){e.farmIntroContainer?e.farmIntroContainer.refresh():e.farmIntroContainer=Object(r.a)(e.$refs.farmIntroContainer,{scrollX:!1,freeScroll:!1,click:!1,scrollbar:{fade:!0}})},300)},openViews:function(e){this.showViews=!0,this.viewPics=e}},watch:{generateFarmIntro:function(){var e=this;this.$nextTick(i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.farmIntroContainer=Object(r.a)(e.$refs.farmIntroContainer,{scrollX:!1,freeScroll:!1,click:!1,scrollbar:{fade:!0}}),e.hasCollapse=e.$refs.collapse.offsetHeight>130;case 2:case"end":return t.stop()}},t,e)})))},hasCollapse:function(e){var t=this;e&&setTimeout(function(){t.farmIntroContainer&&t.farmIntroContainer.refresh()},400)}},components:{farmRecordOther:n.default,views:o.default,estimateYieldModel:s.default}},l=a("W5g0");var u=function(e){a("Rlf+")},f=Object(l.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tabs-container"},[a("div",{staticClass:"tabs-wrap"},[a("el-tabs",{attrs:{value:"farmIntro"},on:{"tab-click":e.handleTabs}},[a("el-tab-pane",{attrs:{label:"基地介绍",name:"farmIntro"}},[a("div",{staticClass:"farm-intro"},[e.generateFarmIntro?a("div",{ref:"farmIntroContainer",staticClass:"farm-intro-container"},[a("div",{staticClass:"farm-intro-wrap"},[a("div",{staticClass:"info-item"},[a("p",{ref:"collapse",staticClass:"info-collapse",class:{"info-collapse-active":e.isCollapse,"info-collapse-has":e.hasCollapse}},[a("b",[e._v("基地简介：")]),e._v(" "),a("span",[e._v(e._s(e.generateFarmIntro.remark))])]),e._v(" "),e.hasCollapse?[e.isCollapse?e._e():a("p",{staticStyle:{height:"15px"}})]:e._e(),e._v(" "),e.hasCollapse?[e.isCollapse?e._e():a("p",{staticClass:"info-more"},[a("span",{staticClass:"info-more-text",on:{click:e.collapse}},[a("span",[e._v("展开")]),e._v(" "),a("i",{staticClass:"el-icon-d-arrow-right"})])])]:e._e()],2),e._v(" "),a("p",{staticClass:"info-item"},[a("b",[e._v("经营主体：")]),e._v(e._s(e.generateFarmIntro.name))]),e._v(" "),a("p",{staticClass:"info-item"},[a("b",[e._v("主体类型：")]),e._v(e._s(e.generateFarmIntro.type))]),e._v(" "),a("p",{staticClass:"info-item"},[a("b",[e._v("法人代表（负责人）：")]),e._v(e._s(e.generateFarmIntro.man1))]),e._v(" "),a("p",{staticClass:"info-item"},[a("b",[e._v("联系方式：")]),e._v(e._s(e.generateFarmIntro.phone?e.generateFarmIntro.phone:""))]),e._v(" "),a("p",{staticClass:"info-item clearfix"},[a("span",[a("b",[e._v("主体唯一标识：")]),a("i",{staticStyle:{"font-style":"normal"}},[e._v(e._s(e.generateFarmIntro.creditCode))])])]),e._v(" "),a("p",{staticClass:"info-item"},[a("b",[e._v("基地位置：")]),e._v(e._s(e.generateFarmIntro.addr2?"基地位于"+e.generateFarmIntro.addr2:""))])])]):e._e()])]),e._v(" "),a("el-tab-pane",{attrs:{label:"农事操作",name:"input"}},[a("div",{staticClass:"farmword-container"},[a("div",{ref:"farmRecordScroll",staticClass:"farmword-wrap"},[a("farm-record-other",{attrs:{companyCode:e.companyCode},on:{loadDataReady:e.loadDataReady}})],1)])])],1)],1),e._v(" "),e.showCompanyIcon?a("views",{attrs:{pics:[e.generateFarmIntro.landRightImgUrl||""]},on:{viewerListen:function(t){e.showCompanyIcon=!1}}}):e._e(),e._v(" "),e.showViews?a("views",{attrs:{pics:e.viewPics},on:{viewerListen:function(t){e.showViews=!1}}}):e._e(),e._v(" "),e.showEstimateYieldModel?a("estimate-yield-model",{attrs:{"show-model":e.showEstimateYieldModel,"goods-subject-unit":e.estimateGoodsSubjectUnit,"estimate-yield-subject-model":e.estimateYieldSubjectModel,"goods-subject-list-model":e.estimateGoodsSubjectList},on:{"update:showModel":function(t){e.showEstimateYieldModel=t},"update:show-model":function(t){e.showEstimateYieldModel=t}}}):e._e()],1)},[],!1,u,"data-v-042194a2",null);t.default=f.exports},"Rlf+":function(e,t){}});
//# sourceMappingURL=137.78c4508c7110495d41c1.js.map
webpackJsonp([30],{"Q+BC":function(e,t){},uvoe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("VCTt"),a=n("8BiH"),o=n("N/DY"),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var i=t[a](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}var l={title:{show:!1,text:"暂无数据",textStyle:{fontSize:12,color:"#6DC1CB"},left:"center",top:"center"},grid:{show:!0,borderColor:"#0D394A",bottom:55,top:60,left:60,right:60},tooltip:{show:!0,trigger:"axis",formatter:function(e){var t=e.map(function(e){return e.seriesName+"："+e.data+("填报条数"===e.seriesName?" 条":" 家")});return e[0].name.split("|")[1]+"<br/>"+t.join("<br />")},backgroundColor:"#043250",padding:[13,14,13,11],textStyle:{fontSize:12,color:"#9ED2D8"},confine:!0},color:["#d2a352","#00ffff"],legend:{show:!0,type:"plain",textStyle:{color:"#6DC1CB",fontSize:12,lineHeight:12},backgroundColor:"rgba(255, 255, 255, 0)",top:18,left:"center",itemWidth:6,itemHeight:6,itemGap:25,height:20,icon:"circle"},xAxis:{type:"category",axisTick:{show:!1},boundaryGap:!1,axisLine:{lineStyle:{color:"rgba(50, 206, 187, 0.15)"}},axisLabel:{color:"#6DC1CB",fontSize:14,verticalAlign:"middle",padding:[30,0,0,0],formatter:function(e){return e.split("|")[0]}},data:[]},yAxis:[{type:"value",name:"(单位：条)",splitNumber:8,nameTextStyle:{fontSize:12,color:"#6DC1CB",padding:[4,8,5,10]},axisLine:{show:!0,onZero:!0,lineStyle:{color:"#0D394A"}},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"rgba(109,193,203,0.2)"}},axisLabel:{textStyle:{color:"#6DC1CB",fontSize:12},formatter:"{value}"},scale:!0},{type:"value",name:"(单位：家)",splitNumber:8,nameTextStyle:{fontSize:12,color:"#6DC1CB",padding:[4,8,5,10]},axisLine:{show:!0,onZero:!0,lineStyle:{color:"#0D394A"}},axisTick:{show:!1},splitLine:{show:!1,lineStyle:{color:"rgba(109,193,203,0.2)"}},axisLabel:{show:!0,textStyle:{color:"#6DC1CB",fontSize:12}},scale:!0}],series:[{name:"填报条数",yAxisIndex:0,data:[],type:"line",smooth:!0,symbolSize:0,connectNulls:!0,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(212,164,82, 0.5)"},{offset:1,color:"rgba(212,164,82, 0)"}],global:!1}},lineStyle:{color:"#d2a352"}},{name:"填报经营主体数",yAxisIndex:1,data:[],type:"line",smooth:!0,symbolSize:0,connectNulls:!0,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(0,255,255, 0.5)"},{offset:1,color:"rgba(0,255,255, 0)"}],global:!1}},lineStyle:{color:"#00ffff"}}]},c={props:{farmAreaInfo:{type:Object,default:function(){return Object(r.b)()}}},data:function(){return{loading:!1,chartInstance:null,noData:!1,showType:"按日统计"}},mounted:function(){var e=this;this.$nextTick(function(){e.initMoudle()}),window.addEventListener("resize",this.adaptationChart),this.$once("hook:beforeDestroy",function(){window.removeEventListener("resize",this.adaptationChart)})},methods:{initMoudle:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,e.chartInstance=e._initEcharts(e.eContainerRef,l),t.next=4,e.refreshChart();case 4:e.loading=!1;case 5:case"end":return t.stop()}},t,e)}))()},refreshChart:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.getChartList(e.showTypeIndex);case 3:if((n=t.sent).length){t.next=6;break}return t.abrupt("return");case 6:e._refreshChart(e.chartInstance,n),e.loading=!1;case 8:case"end":return t.stop()}},t,e)}))()},refreshRender:function(){this.chartInstance&&this.chartInstance.resize()},_initEcharts:function(e,t){var n=this.$echarts.init(e);return n.setOption(t),n},_refreshChart:function(e,t){var n=t.map(function(e){return e.x}),r=t.map(function(e){return e.y1}),a={xAxis:{type:"category",data:n},series:[{name:"填报条数",type:"line",data:t.map(function(e){return e.y2})},{name:"填报经营主体数",type:"line",data:r}]};e.setOption(a)},getChartList:function(e){var t=this;return s(regeneratorRuntime.mark(function n(){var r,a,o,s,l,c,u,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.handerParams(e),a=r.xlist,o=r.startTime,s=r.endTime,n.next=3,t.getListData(+new Date(o),+new Date(s),e);case 3:if(l=n.sent,c=Boolean(e),l){n.next=7;break}return n.abrupt("return");case 7:return u={},l.map(function(e){var n=t.formatDate(e.date,"",c);u[n]={y1:e.reportingBusinessEntityCount,y2:e.reportingCount}}),f=a.map(function(e){return t.formatDate(e,"",c)}),n.abrupt("return",f.map(function(e,n){var r=c?t.$options.filters.dateFormat(a[n],"yyyy年MM月"):t.$options.filters.dateFormat(a[n],"MM月dd日"),o=c?t.$options.filters.dateFormat(a[n],"yyyy年MM月"):t.$options.filters.dateFormat(a[n],"yyyy年MM月dd日");return u[e]?i({x:r+"|"+o},u[e]):{x:r+"|"+o,y1:0,y2:0}}));case 11:case"end":return n.stop()}},n,t)}))()},getListData:function(e,t,n){o.a.map(function(e){return e.id});return this.$ajax.post(this.$api.produce.farmRealTimeDynamic.statisticsByDate,{farmAreaId:[this.farmAreaInfo.farmAreaId],farmAreaType:this.farmAreaInfo.farmAreaType,startTime:e,endTime:t,type:n}).then(function(e){var t=e.data;return 0===t.respCode?t.obj:null}).catch(function(e){console.log("生产作业上报 error: ",e)})},handerParams:function(e){var t=new Date,n=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();if(e)var r=this.$options.filters.dateFormat(new Date(n).setMonth(t.getMonth()+2),"yyyy-MM-01"),a=(i=new Date((new Date).setMonth(t.getMonth()-5))).getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),o=new Array(6).fill(0).map(function(e,t){return new Date(new Date(a).setMonth(new Date(a).getMonth()+t))});else{r=this.$options.filters.dateFormat(new Date(n).setDate(t.getDate()+1),"yyyy-MM-dd"),a=(i=new Date((new Date).setMonth(t.getMonth()-1))).getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate();var i,s=Math.floor((new Date(r).getTime()-new Date(a).getTime())/864e5);o=new Array(s).fill(0).map(function(e,t){return new Date(new Date(a).setDate(new Date(a).getDate()+t))})}return{xlist:o,startTime:a,endTime:r}},formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=void 0;if("string"==typeof e||"number"==typeof e)r=new Date(e);else{if(!(e instanceof Date))return"";r=e}var a=r.getFullYear(),o=r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,i=r.getDate()<10?"0"+r.getDate():r.getDate();return n?a+t+o:a+t+o+t+i}},computed:{eContainerRef:function(){return this.$refs.EContainer},showTypeIndex:function(){return"按日统计"===this.showType?0:1}},components:{CustomSelect:a.default}},u=n("W5g0");var f=function(e){n("Q+BC")},h=Object(u.a)(c,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"operators-dynamic-11-list",attrs:{"element-loading-spinner":"iconfont icon-loading1","element-loading-background":"rgba(0, 0, 0, 0.2)"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"top-select"},[n("custom-select",[n("template",{slot:"select-container"},[n("el-select",{attrs:{"popper-class":e.selectStyle},on:{change:e.refreshChart},model:{value:e.showType,callback:function(t){e.showType=t},expression:"showType"}},[n("el-option",{attrs:{label:"按日统计",value:"按日统计"}}),e._v(" "),n("el-option",{attrs:{label:"按月统计",value:"按月统计"}})],1)],1)],2)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],ref:"EContainer",staticClass:"echart-container"}),e._v(" "),e.noData?n("div",{staticClass:"nodata"},[e._v("暂无数据")]):e._e()])},[],!1,f,"data-v-6bb9c531",null);t.default=h.exports}});
//# sourceMappingURL=30.2367b99944b50cefdec5.js.map
{"version":3,"file":"static/js/136.12776bfd762a6c0e4162.js","sources":["webpack:///src/components/plotlist/plot-detail-dialog-body-other.vue"],"sourcesContent":["<template>\r\n\t<div class=\"tabcon\" ref=\"wrapper\">\r\n\t\t<!--1、种养品种-->\r\n\t\t<div class=\"plantplan\" v-if=\"tabindex === 1\">\r\n\t\t\t<plant-species-other :crop-list=\"planCropList\" />\r\n\t\t</div>\r\n\t\t<!--2、农资使用-->\r\n\t\t<div class=\"resourcebox\" v-if=\"tabindex === 2\">\r\n\t\t\t<farming-operations-other :mission-list=\"missionList\" />\r\n\t\t</div>\r\n\t\t<!--3、经营主体-->\r\n\t\t<div class=\"operators\" v-if=\"tabindex === 3\">\r\n\t\t\t<ul class=\"companylist\">\r\n\t\t\t\t<li class=\"company\">\r\n\t\t\t\t\t<div class=\"txtdes\">\r\n\t\t\t\t\t\t<p class=\"title\" v-if=\"businessInfo.name\">\r\n\t\t\t\t\t\t\t{{ businessInfo.name }}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<ul class=\"infolist\">\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<span class=\"label\">企业类型：</span>\r\n\t\t\t\t\t\t\t\t<span class=\"lacon\" v-if=\"businessInfo.type\">{{ businessInfo.type }}</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<span class=\"label\">法人代表（负责人）：</span>\r\n\t\t\t\t\t\t\t\t<span class=\"lacon\" v-if=\"businessInfo.man1\">{{ businessInfo.man1 }}</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<span class=\"label\">联系方式：</span>\r\n\t\t\t\t\t\t\t\t<span class=\"lacon\"></span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li class=\"business-category\">\r\n\t\t\t\t\t\t\t\t<span class=\"label\">主体唯一标识：</span>\r\n\t\t\t\t\t\t\t\t<span class=\"lacon\" v-if=\"businessInfo.creditCode\">{{ businessInfo.creditCode }}</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<span class=\"label\">农场位置：</span>\r\n\t\t\t\t\t\t\t\t<span class=\"lacon\">{{ businessInfo.addr2 }}</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t\t<div class=\"go-farm-detail\">\r\n\t\t\t\t\t<div class=\"go-farm-detail-box\" @click=\"goDetail\">\r\n\t\t\t\t\t\t<span>进入主体详情</span>\r\n\t\t\t\t\t\t<i class=\"iconfont icon-shuangjiantoushang\"></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t\t<!--4、基本信息-->\r\n\t\t<div class=\"plotinfo\" v-if=\"tabindex === 4\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li class=\"infoitem\">\r\n\t\t\t\t\t<div class=\"plot-number\" v-if=\"plotBaseInfo.gisPlotId\">编号：{{ plotBaseInfo.gisPlotId }}</div>\r\n\t\t\t\t\t<div class=\"label\">\r\n\t\t\t\t\t\t<img src=\"~@/assets/images/plot-icon-pic.png\" alt=\"\" />\r\n\t\t\t\t\t\t<span>地块名称</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p class=\"pyc\">{{ plotBaseInfo.name }}</p>\r\n\t\t\t\t\t<p class=\"lvse-cert\" v-if=\"!!lvseprod\">\r\n\t\t\t\t\t\t<el-tooltip popper-class=\"lvse-tooltip\" effect=\"dark\" :content=\"'认证产品：' + lvseprod\" placement=\"top\">\r\n\t\t\t\t\t\t\t<img src=\"../../assets/images/common/lvse-cert.png\" alt=\"\" />\r\n\t\t\t\t\t\t</el-tooltip>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li class=\"infoitem\">\r\n\t\t\t\t\t<div class=\"label\">\r\n\t\t\t\t\t\t<img src=\"../../assets/images/ico_area.png\" alt=\"\" />\r\n\t\t\t\t\t\t<span>地块面积</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p>{{ landAcre }}</p>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li class=\"infoitem\" v-if=\"false\">\r\n\t\t\t\t\t<div class=\"label\">\r\n\t\t\t\t\t\t<img src=\"~@/assets/images/plot-type-icon-pic.png\" alt=\"\" />\r\n\t\t\t\t\t\t<span>地块类型</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p>{{ plotBaseInfo.landTypeName }}</p>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport {numTofixed} from '@/assets/js/common2';\r\nimport {_initBScroll} from '../../common/fn';\r\n// import defaultLogo from '../../assets/images/default_complogo.png';\r\n\r\nexport default {\r\n\tname: 'plot-detail-dialog-body-other',\r\n\tprops: {\r\n\t\tplotId: {\r\n\t\t\tdefault: ''\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tbScroll: null, // tab滚动实例\r\n\t\t\tlvseprod: '', // 该地块下的绿色认证 产品\r\n\t\t\ttabindex: 1,\r\n\t\t\tplanCropList: [],\r\n\t\t\tmissionList: [],\r\n\t\t\tbusinessInfo: {},\r\n\t\t\tplotBaseInfo: {}\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\t// window.layer.closeAll();\r\n\t},\r\n\tmounted() {},\r\n\tdestroyed() {},\r\n\tmethods: {\r\n\t\t// 获取种养品种列表\r\n\t\tgetPlanCropList() {\r\n\t\t\treturn this.$ajax\r\n\t\t\t\t.post(this.$api.nongwei.getListByPlotId, {\r\n\t\t\t\t\tplotId: this.plotId,\r\n\t\t\t\t\tpageNo: 1,\r\n\t\t\t\t\tpageSize: 1000\r\n\t\t\t\t})\r\n\t\t\t\t.then(({data}) => {\r\n\t\t\t\t\tif (data.respCode === 0) {\r\n\t\t\t\t\t\treturn data.obj;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\t// 获取农事操作列表\r\n\t\tgetMissionList() {\r\n\t\t\treturn this.$ajax\r\n\t\t\t\t.post(this.$api.nongwei.getZzScFarmListByPlotId, {\r\n\t\t\t\t\tplotId: this.plotId,\r\n\t\t\t\t\tpageNo: 1,\r\n\t\t\t\t\tpageSize: 1000\r\n\t\t\t\t})\r\n\t\t\t\t.then(({data}) => {\r\n\t\t\t\t\tif (data.respCode === 0) {\r\n\t\t\t\t\t\treturn data.obj;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\t// 获取经营主体信息\r\n\t\tgetBusinessInfo() {\r\n\t\t\treturn this.$ajax\r\n\t\t\t\t.post(this.$api.nongwei.getZzBasCompanyGetByPlotId, {\r\n\t\t\t\t\tplotId: this.plotId\r\n\t\t\t\t})\r\n\t\t\t\t.then(({data}) => {\r\n\t\t\t\t\tif (data.respCode === 0) {\r\n\t\t\t\t\t\treturn data.obj;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\t// 获取地块基本信息\r\n\t\tgetPlotBaseInfo() {\r\n\t\t\treturn this.$ajax\r\n\t\t\t\t.post(this.$api.nongwei.getZzBasPlotGet, {\r\n\t\t\t\t\tplotId: this.plotId\r\n\t\t\t\t})\r\n\t\t\t\t.then(({data}) => {\r\n\t\t\t\t\tif (data.respCode === 0) {\r\n\t\t\t\t\t\treturn data.obj;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tasync getList(index) {\r\n\t\t\tthis.tabindex = index;\r\n\t\t\tif (this.tabindex === 1) {\r\n\t\t\t\tconst res = await this.getPlanCropList();\r\n\t\t\t\tthis.planCropList = res.list;\r\n\t\t\t} else if (this.tabindex === 2) {\r\n\t\t\t\tconst res = await this.getMissionList();\r\n\t\t\t\tthis.missionList = res.list;\r\n\t\t\t} else if (this.tabindex === 3) {\r\n\t\t\t\tthis.businessInfo = await this.getBusinessInfo();\r\n\t\t\t} else if (this.tabindex === 4) {\r\n\t\t\t\tthis.plotBaseInfo = await this.getPlotBaseInfo();\r\n\t\t\t\tif (this.plotBaseInfo.gisPlotId) {\r\n\t\t\t\t\t// const landid = ; // 后三位 改成000\r\n\t\t\t\t\tconst lvselist = await this.getLandGreencertDetail(this.getNYDid(this.plotBaseInfo.gisPlotId));\r\n\t\t\t\t\tif (lvselist.length) {\r\n\t\t\t\t\t\tthis.lvseprod = lvselist\r\n\t\t\t\t\t\t\t.filter(lvse => !!lvse.prod)\r\n\t\t\t\t\t\t\t.map(lvse => lvse.prod)\r\n\t\t\t\t\t\t\t.join(',');\r\n\t\t\t\t\t\t// this.lvseprod = (!!lvseprod && lvseprod.indexOf(',') !== -1) ? lvseprod.substring(0, lvseprod.length - 1) : lvseprod;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tif (!this.bScroll) {\r\n\t\t\t\t\tthis.bScroll = _initBScroll(this.$refs.wrapper);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.bScroll.refresh();\r\n\t\t\t\t\tthis.bScroll.scrollTo(0, 0);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetNYDid(landid) {\r\n\t\t\tvar reg = /(\\d{18})(\\d{3})/g;\r\n\t\t\tif (reg.test(landid)) {\r\n\t\t\t\tvar frontNumber = RegExp.$1; // 前面18位数字\r\n\t\t\t\treturn frontNumber + '000';\r\n\t\t\t} else {\r\n\t\t\t\treturn landid;\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetLandGreencertDetail(shGisDkid) {\r\n\t\t\tconst This = this;\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\tthis.$ajax\r\n\t\t\t\t\t.post(this.$api.govPatrol.landisgreenCert, {\r\n\t\t\t\t\t\tlandCode: shGisDkid\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif (res.data.respCode === 0) {\r\n\t\t\t\t\t\t\tresolve(res.data.obj);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tresolve(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\tresolve(false);\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tgoDetail() {\r\n\t\t\t// console.log(this.businessInfo)\r\n\t\t\t// this.$router.push(`/farmdetail/${this.layerData.operators.farmDetailVO.farmId}`);\r\n\t\t\tthis.$router.push(`/gisfarmdetail/${this.businessInfo.companyCode}`);\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tlandAcre() {\r\n\t\t\tvar landacre = this.plotBaseInfo.area;\r\n\t\t\treturn numTofixed(landacre, 2) + ' 亩';\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tplantSpeciesOther: () => import('@/components/plotlist/plant-species-other'),\r\n\t\tfarmingOperationsOther: () => import('../../components/plotlist/farming-operations-other')\r\n\t}\r\n};\r\n</script>\r\n<style scoped lang=\"less\">\r\n.ftSize(@size:12px) {\r\n\tfont-size: @size;\r\n}\r\n.flex-center(@x:center,@y:center) {\r\n\tdisplay: flex;\r\n\tdisplay: -webkit-flex;\r\n\tflex-flow: row nowrap;\r\n\tjustify-content: @x;\r\n\talign-items: @y;\r\n}\r\n.txtAlign(@pos:center) {\r\n\ttext-align: @pos;\r\n}\r\n\r\n.plotinfo {\r\n\theight: 480px;\r\n\tpadding: 10px 25px;\r\n\tbox-sizing: border-box;\r\n\t.flex-center();\r\n\tflex-flow: column;\r\n\r\n\tul {\r\n\t\twidth: 100%;\r\n\t\tmargin-top: -50px;\r\n\t}\r\n\r\n\t.infoitem {\r\n\t\twidth: 100%;\r\n\t\theight: 120px;\r\n\t\tbackground: #061f36;\r\n\t\tmargin-bottom: 20px;\r\n\t\tposition: relative;\r\n\t\t.flex-center();\r\n\t\tflex-flow: column;\r\n\r\n\t\timg {\r\n\t\t\twidth: 20px;\r\n\t\t\theight: 20px;\r\n\t\t\tvertical-align: sub;\r\n\t\t}\r\n\r\n\t\t.label {\r\n\t\t\t.ftSize(16px);\r\n\t\t\tline-height: 30px;\r\n\t\t\tcolor: #0e627a;\r\n\t\t}\r\n\r\n\t\tp {\r\n\t\t\t.ftSize(30px);\r\n\t\t\twidth: 100%;\r\n\t\t\tmargin-top: 5px;\r\n\t\t\tline-height: 30px;\r\n\t\t\theight: 30px;\r\n\t\t\tpadding: 0 2%;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tfont-weight: 300;\r\n\t\t}\r\n\r\n\t\t&:nth-child(1) {\r\n\t\t\t.label {\r\n\t\t\t\tcolor: #0e627a;\r\n\t\t\t}\r\n\r\n\t\t\tp {\r\n\t\t\t\tcolor: #01dee9;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&:nth-child(2) {\r\n\t\t\t.label {\r\n\t\t\t\tcolor: #0c6689;\r\n\t\t\t}\r\n\r\n\t\t\tp {\r\n\t\t\t\tcolor: #02b8ff;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&:last-child {\r\n\t\t\t.label {\r\n\t\t\t\tcolor: #0e627a;\r\n\t\t\t}\r\n\r\n\t\t\tp {\r\n\t\t\t\tcolor: #02b8ff;\r\n\t\t\t}\r\n\r\n\t\t\tmargin-bottom: 0;\r\n\t\t}\r\n\t\tp.lvse-cert {\r\n\t\t\tmargin-top: 0;\r\n\t\t\timg {\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\twidth: auto;\r\n\t\t\t\theight: 20px;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.plot-number {\r\n\t\t\tpadding: 0 14px;\r\n\t\t\theight: 20px;\r\n\t\t\tline-height: 20px;\r\n\t\t\tbackground-color: rgba(2, 18, 28, 0.57);\r\n\t\t\tfont-size: 14px;\r\n\t\t\tcolor: #0d6179;\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 0;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.plantplan {\r\n\tpadding: 20px 25px 0;\r\n\r\n\t.history {\r\n\t\t.split {\r\n\t\t\tcolor: #06c0cc;\r\n\t\t\tline-height: 20px;\r\n\t\t\tpadding-bottom: 20px;\r\n\t\t\t.ftSize(14px);\r\n\t\t\t.flex-center(space-between);\r\n\r\n\t\t\t.line {\r\n\t\t\t\twidth: 37%;\r\n\t\t\t\theight: 0;\r\n\t\t\t\tborder-top: 1px dashed #00a7b4;\r\n\t\t\t}\r\n\r\n\t\t\tspan {\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t}\r\n\r\n\t\t\ti {\r\n\t\t\t\ttransform: rotate(90deg);\r\n\t\t\t\tmargin-left: 5px;\r\n\t\t\t\t.ftSize(16px);\r\n\t\t\t}\r\n\r\n\t\t\ti.slide {\r\n\t\t\t\ttransform: rotate(-90deg);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.resourcebox {\r\n\tpadding-top: 20px;\r\n}\r\n\r\n.operators {\r\n\t.txtAlign(left);\r\n\r\n\t.companylist {\r\n\t\twidth: 620px;\r\n\t\tbackground-color: #051f35;\r\n\t\tmin-height: 420px;\r\n\t\tpadding-bottom: 20px;\r\n\t\tmargin: 18px auto 0;\r\n\t\t.company-img {\r\n\t\t\twidth: 360px;\r\n\t\t\theight: 240px;\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t\toverflow: hidden;\r\n\t\t\timg {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: auto;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.title {\r\n\t\t\twidth: 562px;\r\n\t\t\tmargin: 0 auto;\r\n\t\t\tfont-size: 24px;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tcolor: #a1eff8;\r\n\t\t\theight: 96px;\r\n\t\t\tline-height: 96px;\r\n\t\t\tborder-bottom: 1px solid #167099;\r\n\t\t\tpadding-left: 22px;\r\n\t\t}\r\n\r\n\t\t.infolist {\r\n\t\t\tline-height: 30px;\r\n\t\t\tcolor: #6dc1cb;\r\n\t\t\twidth: 525px;\r\n\t\t\tpadding-left: 50px;\r\n\t\t\t.ftSize(14px);\r\n\r\n\t\t\t.imgico {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\twidth: 16px;\r\n\t\t\t\theight: 14px;\r\n\t\t\t\tmargin-left: 8px;\r\n\t\t\t\tvertical-align: -2px;\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tbackground: url('../../assets/images/ico_img.png') no-repeat center 100%/100%;\r\n\t\t\t}\r\n\r\n\t\t\tli {\r\n\t\t\t\tmargin-top: 30px;\r\n\t\t\t\tline-height: 30px;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\t.label {\r\n\t\t\t\t\tfont-size: 14px;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\tcolor: #a1eff7;\r\n\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&.business-category {\r\n\t\t\t\t\t> .label {\r\n\t\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\t\tline-height: 20px;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t> .lacon {\r\n\t\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\twidth: 305px;\r\n\t\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\t\tline-height: 20px;\r\n\t\t\t\t\t\tvertical-align: -5px;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.go-farm-detail {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\tmargin: 15px 0 20px 0;\r\n\r\n\t\t.go-farm-detail-box {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\twidth: 140px;\r\n\t\t\theight: 36px;\r\n\t\t\tfont-size: 14px;\r\n\t\t\tfont-family: Microsoft YaHei;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tcolor: #00F6FF;\r\n\t\t\tcursor: pointer;\r\n\t\t\tbackground: url('../../assets/images/bg-plot-detail-btn.png') no-repeat center 100%/100%;\r\n\r\n\t\t\t.iconfont {\r\n\t\t\t\tmargin: 2px 0 0 3px;\r\n\t\t\t\tfont-size: 12px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n.tabcon {\r\n\twidth: 100%;\r\n\theight: 480px;\r\n\toverflow: hidden;\r\n\tposition: relative;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/plotlist/plot-detail-dialog-body-other.vue"],"mappings":"AAyFA","sourceRoot":""}
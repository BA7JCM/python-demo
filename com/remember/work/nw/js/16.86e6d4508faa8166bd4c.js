webpackJsonp([16],{"2iwF":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Mt7t"),s=a("MZv5"),r=a("446f"),i=a("/XFr"),o=a("VCTt"),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};function c(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function n(s,r){try{var i=e[s](r),o=i.value}catch(t){return void a(t)}if(!i.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})}}var u={title:{top:"0",left:"10",textStyle:{color:"#6DC1CB",fontSize:12}},grid:{show:!1,right:"0",top:"center",height:"80%",width:"75%"},tooltip:{show:!0,trigger:"item",formatter:function(t){return t.value[0]+"："+Math.abs(t.value[1])+"万亩"},backgroundColor:"#043250",padding:[13,14,13,11],textStyle:{fontSize:12,color:"#9ED2D8"}},xAxis:{show:!1,axisLabel:{interval:0,textStyle:{color:"#6EC2CB",fontSize:12,lineHeight:14},align:"center"},axisTick:{show:!1},axisLine:{show:!1}},yAxis:{show:!1,type:"category",name:"单位：",nameTextStyle:{fontSize:14,color:"#6DC1CB",padding:[0,0,10,0]},axisLine:{show:!1,lineStyle:{color:"#0D394A"}},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"#0D394A"}},axisLabel:{textStyle:{color:"#6DC1CB",fontSize:12}}},dataset:{source:[]},series:[{type:"bar",barWidth:"40%",barMinHeight:5,label:{show:!0,position:"left",color:"#00F5FF",fontSize:12,formatter:function(t){return Math.abs(t.value[1])},offset:[-2,0]},z:10,itemStyle:{color:{type:"linear",x:1,y:0,x2:0,y2:0,colorStops:[{offset:0,color:"#01C1FF"},{offset:1,color:"#00F6FF"}],global:!1}},encode:{x:"yearPatrolCount",y:"areaName"}}]},f={color:["#27ED4E","#25ECDA","#E5DA4B","#E86467"],series:[{type:"pie",center:["50%","50%"],radius:["85%","65%"],hoverAnimation:!1,label:{show:!1},labelLine:{show:!1},data:[]}]},d={data:function(){return{menusAxis:[],mainLoading:!0,lawListLoading:!1,chartsInstance:null,chartsCircleInstance:null,safeData:{yearPatrolCount:1,yearPatrolQualifiedCount:0,yearPatrolTotalCount:1,yearPatrolTotalQualifiedCount:0,yearCheckExcellentCount:0,yearCheckGoodCount:0,yearCheckQualifiedCount:0,yearCheckUnQualifiedCount:0},circleChartData:[],lawSuperviseList:[],checkNameMap:[{index:100,text:"全部执法结果"},{index:1,text:"优"},{index:2,text:"良"},{index:3,text:"合格"},{index:4,text:"不合格"},{index:0,text:"未知"}]}},props:{farmAreaInfo:{type:Object,default:function(){return Object(o.b)()}},groupFlag:{type:Boolean,default:!1},areaData:{type:Array,default:function(){return[]}}},computed:{chartsLeftRef:function(){return this.$refs.chartsLeft},chartsRightRef:function(){return this.$refs.chartsRight},EContainer:function(){return this.$refs.EContainer}},created:function(){this.getStatisticsOnYearByArea(),this.getLawSuperviseList()},mounted:function(){var t=this;this.$nextTick(function(){t.initMoudle()}),window.addEventListener("resize",this.adaptationChart),this.$once("hook:beforeDestroy",function(){window.removeEventListener("resize",this.adaptationChart)})},methods:{initMoudle:function(){this.refreshCircleChart(this._initEcharts(this.EContainer,f)),this.refreshChart([this._initEcharts(this.chartsLeftRef,u),this._initEcharts(this.chartsRightRef,Object(o.e)(Object(o.d)(u),{title:{right:"10",left:"auto"},grid:{left:"0",right:"auto"},dataset:{source:[["areaName","yearPatrolObjectCount"]]},series:[{label:{color:"#E5E467",position:"right"},itemStyle:{color:{colorStops:[{offset:0,color:"#E6E768"},{offset:1,color:"#D29C50"}]}},encode:{x:"yearPatrolObjectCount",y:"areaName"}}]}))])},refreshRender:function(){this.chartsInstance&&this.chartsInstance.forEach(function(t){t.resize()}),this.chartsCircleInstance&&this.chartsCircleInstance.resize()},handSubTitle:function(){this.$router.push("/lawSuperviseList")},click:function(t){this.$emit("click",t)},getStatisticsOnYearByAreaId:function(t){return this.$ajax.post(this.$api.safeSupervise.statisticsOnYearByAreaId,{farmAreaId:t,farmAreaType:3}).then(function(t){var e=t.data;if(0===e.respCode)return e.obj}).catch(function(t){console.log(t)})},_initEcharts:function(t,e){var a=this.$echarts.init(t);return a.setOption(e),a},refreshChart:function(t){var e=this;return c(regeneratorRuntime.mark(function a(){var n,s,r,i,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=[],e.areaData.forEach(function(t){n.push(t.id)}),a.next=4,e.getStatisticsOnYearByAreaId(n);case 4:s=a.sent,r=[],e.areaData.forEach(function(t){var e=s.filter(function(e){return String(e.areaId)===t.id});e.length&&r.push(l({areaName:t.areaName},e[0]))}),i=r.map(function(t){return[t.areaName,-t.yearPatrolCount]}),o=r.map(function(t){return[t.areaName,t.yearPatrolObjectCount]}),i=i.reverse(),o=o.reverse(),i.unshift(["areaName","yearPatrolCount"]),o.unshift(["areaName","yearPatrolObjectCount"]),e.chartsInstance=t,t[0].setOption({title:{text:"已监管次数（次）"},dataset:{source:i},tooltip:{formatter:function(t){return t.value[0]+"："+Math.abs(t.value[1])+"次"}}}),t[1].setOption({title:{text:"已监管对象（家）"},dataset:{source:o},tooltip:{formatter:function(t){return t.value[0]+"："+Math.abs(t.value[1])+"家"}}}),e.adaptationChart(),e.mainLoading=!1;case 18:case"end":return a.stop()}},a,e)}))()},refreshCircleChart:function(t){var e=this;return c(regeneratorRuntime.mark(function a(){var n,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.getStatisticsOnYearByArea();case 2:n=a.sent,(s=[])[0]={name:"优",value:n.yearPatrolTotalCount?parseFloat((n.yearCheckExcellentCount/n.yearPatrolTotalCount*100).toFixed(2)):0},s[1]={name:"良",value:n.yearPatrolTotalCount?parseFloat((n.yearCheckGoodCount/n.yearPatrolTotalCount*100).toFixed(2)):0},s[2]={name:"合格",value:n.yearPatrolTotalCount?parseFloat((n.yearCheckQualifiedCount/n.yearPatrolTotalCount*100).toFixed(2)):0},s[3]={name:"不合格",value:n.yearPatrolTotalCount?parseFloat((n.yearCheckUnQualifiedCount/n.yearPatrolTotalCount*100).toFixed(2)):0},e.chartsCircleInstance=t,t.setOption({series:[{data:s}]});case 10:case"end":return a.stop()}},a,e)}))()},getStatisticsOnYearByArea:function(){var t=this;return this.$ajax.post(this.$api.safeSupervise.statisticsOnYearByArea,{farmAreaId:[this.farmAreaInfo.farmAreaId],farmAreaType:this.farmAreaInfo.farmAreaType}).then(function(e){var a=e.data;if(0===a.respCode)return t.safeData=a.obj,a.obj}).catch(function(t){console.log(t)})},getLawSuperviseList:function(){var t=this;return c(regeneratorRuntime.mark(function e(){var a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.lawSuperviseList=[],t.lawListLoading=!0,a={farmAreaId:[t.farmAreaInfo.farmAreaId],farmAreaType:t.farmAreaInfo.farmAreaType,endTimeStr:"",startTimeStr:"",keyword:null,pageNo:1,pageSize:100,patrolResult:null,sortDirection:1,sortField:0},e.next=5,t.$ajax.post(t.$api.govPatrol.lawSuperviseList,a);case 5:0===(n=e.sent).data.respCode?(t.lawListLoading=!1,t.lawSuperviseList=n.data.obj.list,t.$nextTick(c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.farmRecordScroll=Object(o.a)(t.$refs.lawInspectScroll,{scrollX:!1,freeScroll:!1,click:!0,scrollbar:{fade:!0}});case 1:case"end":return e.stop()}},e,t)})))):t.lawListLoading=!1;case 7:case"end":return e.stop()}},e,t)}))()},refresh:function(){return this.farmRecordScroll&&this.farmRecordScroll.refresh()},numTofixed:function(t,e){return t?Object(o.j)({value:e/t*100}):0},formatDate:function(t,e){var a=new Date(t);return a.getFullYear()+e+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+e)+(a.getDate()<10?"0"+a.getDate():a.getDate())},getColor:function(t){switch(t){case 0:return"#ABC0D2";case 1:return"#3CCA42";case 2:return"#25ECDA";case 3:return"#E5DA4B";case 4:return"#FF5252"}},adaptationChart:function(){var t={series:[{label:{fontSize:12}}]};(document.documentElement.clientWidth||document.body.clientWidth)>3e3?(t.series[0].label.fontSize=17,this.chartsInstance&&(this.chartsInstance[0].setOption(t),this.chartsInstance[1].setOption(t))):(t.series[0].label.fontSize=12,this.chartsInstance&&(this.chartsInstance[0].setOption(t),this.chartsInstance[1].setOption(t)))}},components:{CircleLine:n.default,LayoutBox:s.default,BoxItem:r.default,CircleProgress:i.default}},h=a("W5g0");var v=function(t){a("plhK"),a("hcCa")},p=Object(h.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"safeSupervise-right"},[a("div",{staticClass:"safe-box"},[a("LayoutBox",[a("template",{slot:"default"},[a("BoxItem",{attrs:{title:"农产品质量安全监管",showSubTitle:!0},on:{"hand-sub-title":t.handSubTitle}},[a("div",{staticClass:"safe-content",attrs:{slot:"default"},slot:"default"},[a("div",{staticClass:"safe-section"},[a("div",{staticClass:"safe-section-item"},[a("span",[t._v("年度已监管次数")]),t._v(" "),a("span",[t._v(t._s(t.safeData.yearPatrolTotalCount)),a("i",[t._v("次")])]),t._v(" "),a("span",[t._v("合格率："),a("i",[t._v(t._s(t.numTofixed(t.safeData.yearPatrolTotalCount,t.safeData.yearPatrolTotalQualifiedCount))+"%")])])]),t._v(" "),a("div",{staticClass:"safe-section-right"},[a("div",{staticClass:"echart-container-box"},[a("div",{ref:"EContainer",staticClass:"echart-container"}),t._v(" "),a("div",{staticClass:"echart-container-text"},[a("span",[t._v("考核结果")])])]),t._v(" "),a("div",{staticClass:"legend"},[a("div",{staticClass:"legend-item"},[a("span",{staticClass:"icon"}),t._v(" "),a("span",[t._v("优：")]),t._v(" "),a("span",{staticClass:"num"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.safeData.yearPatrolTotalCount?parseFloat((t.safeData.yearCheckExcellentCount/t.safeData.yearPatrolTotalCount*100).toFixed(2)):0)+"%\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("span",[t._v(" ("+t._s(t.safeData.yearCheckExcellentCount)+"次)")])]),t._v(" "),a("div",{staticClass:"legend-item"},[a("span",{staticClass:"icon"}),t._v(" "),a("span",[t._v("良：")]),t._v(" "),a("span",{staticClass:"num"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.safeData.yearPatrolTotalCount?parseFloat((t.safeData.yearCheckGoodCount/t.safeData.yearPatrolTotalCount*100).toFixed(2)):0)+"%\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("span",[t._v(" ("+t._s(t.safeData.yearCheckGoodCount)+"次)")])]),t._v(" "),a("div",{staticClass:"legend-item"},[a("span",{staticClass:"icon"}),t._v(" "),a("span",[t._v("合格：")]),t._v(" "),a("span",{staticClass:"num"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.safeData.yearPatrolTotalCount?parseFloat((t.safeData.yearCheckQualifiedCount/t.safeData.yearPatrolTotalCount*100).toFixed(2)):0)+"%\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("span",[t._v(" ("+t._s(t.safeData.yearCheckQualifiedCount)+"次)")])]),t._v(" "),a("div",{staticClass:"legend-item"},[a("span",{staticClass:"icon"}),t._v(" "),a("span",[t._v("不合格：")]),t._v(" "),a("span",{staticClass:"num"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.safeData.yearPatrolTotalCount?parseFloat((t.safeData.yearCheckUnQualifiedCount/t.safeData.yearPatrolTotalCount*100).toFixed(2)):0)+"%\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("span",[t._v(" ("+t._s(t.safeData.yearCheckUnQualifiedCount)+"次)")])])])])]),t._v(" "),a("div",{staticClass:"safe-inspect-title"},[t._v("\n\t\t\t\t\t\t\t安全监管记录\n\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"law-inspect"},[a("div",{staticClass:"law-inspect-head"},[a("div",{staticClass:"law-inspect-row"},[a("div",{staticClass:"law-inspect-col"},[a("span",{staticClass:"text-bold"},[t._v("日期")])]),t._v(" "),a("div",{staticClass:"law-inspect-col"},[a("span",{staticClass:"text-bold"},[t._v("经营主体名称")])]),t._v(" "),a("div",{staticClass:"law-inspect-col"},[a("span",{staticClass:"text-bold"},[t._v("考核结果")])])])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.lawListLoading,expression:"lawListLoading"}],ref:"lawInspectScroll",staticClass:"law-inspect-body",attrs:{"element-loading-spinner":"iconfont icon-loading1","element-loading-background":"rgba(0, 0, 0, 0)"}},[a("div",{staticClass:"scroller-box"},t._l(t.lawSuperviseList,function(e,n){return a("div",{key:n,staticClass:"law-inspect-row"},[a("div",{staticClass:"law-inspect-col"},[a("span",{staticClass:"text"},[t._v(t._s(t.formatDate(e.createdDate,".")))])]),t._v(" "),a("div",{staticClass:"law-inspect-col"},[a("span",{staticClass:"text company-name",on:{click:function(a){return t.click(e)}}},[t._v(t._s(e.cname))])]),t._v(" "),a("div",{staticClass:"law-inspect-col"},[a("span",{staticClass:"text",style:{color:t.getColor(e.patrolResult),fontWeight:"bold"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.checkNameMap[0===e.patrolResult?5:e.patrolResult].text)+"\n\t\t\t\t\t\t\t\t\t\t\t")])])])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.lawListLoading&&t.lawSuperviseList,expression:"!lawListLoading && lawSuperviseList"}],staticClass:"no-data"},[a("span",[t._v("暂无数据")])])])])])])],1)],2)],1),t._v(" "),a("div",{staticClass:"situation-box"},[a("LayoutBox",[a("div",{staticClass:"situation-content",attrs:{slot:"default"},slot:"default"},[a("BoxItem",{attrs:{title:"各区年度监管情况"}},[a("template",{slot:"default"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.mainLoading,expression:"mainLoading"}],staticClass:"situation-chart",attrs:{"element-loading-spinner":"iconfont icon-loading1","element-loading-background":"rgba(0, 0, 0, 0)"}},[a("div",{ref:"chartsLeft",staticClass:"charts-content l-charts-content"}),t._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:!t.mainLoading,expression:"!mainLoading"}],staticClass:"menus-axis"},t._l(t.areaData,function(e,n){return a("li",{key:n,staticClass:"menu-name"},[a("span",[t._v(t._s(e.areaName))])])}),0),t._v(" "),a("div",{ref:"chartsRight",staticClass:"charts-content r-charts-content"})])])],2)],1)])],1)])},[],!1,v,"data-v-1ca24924",null);e.default=p.exports},hcCa:function(t,e){},plhK:function(t,e){}});
//# sourceMappingURL=16.86e6d4508faa8166bd4c.js.map
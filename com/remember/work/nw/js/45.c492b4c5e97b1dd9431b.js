webpackJsonp([45],{"EzL+":function(t,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=a("xk5x"),i=a("VCTt"),o=a("VKKs"),s=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);a=!0);}catch(t){r=!0,i=t}finally{try{!a&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function c(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function l(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function a(r,i){try{var o=e[r](i),s=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(s).then(function(t){a("next",t)},function(t){a("throw",t)});t(s)}("next")})}}Object(o.b)("govGovernmentSubjectVO");var u={grid:{show:!1,top:20,left:"7%",bottom:32},tooltip:{show:!0,trigger:"item",confine:!0,formatter:function(t){var e=t.data.count;return t.name+"<br/>经营主体数量："+e+"家<br/>经营主体总占地面积："+t.value+"万亩"},backgroundColor:"#043250",padding:[13,14,13,11],textStyle:{fontSize:12,color:"#9ED2D8"}},xAxis:{data:[],axisLabel:{interval:0,textStyle:{color:"#6EC2CB",fontSize:12,lineHeight:14},align:"center"},axisTick:{show:!1},axisLine:{show:!1}},yAxis:{show:!1,name:"单位：",nameTextStyle:{fontSize:14,color:"#6DC1CB",padding:[0,0,10,0]},axisLine:{show:!1,lineStyle:{color:"#0D394A"}},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"#0D394A"}},axisLabel:{textStyle:{color:"#6DC1CB",fontSize:12}}},series:[{type:"bar",itemStyle:{normal:{color:"rgba(4, 190, 254, 0.2)"}},silent:!0,barWidth:50,barGap:"-100%",data:[],label:{show:!0,position:"top",color:"#FEEB48",fontSize:12,fontWeight:"bold",formatter:function(t){return t.data.labelValue+"家"}}},{type:"bar",barWidth:50,data:[],label:{show:!0,position:"top",color:"#00F6FF",fontSize:12,fontWeight:"bold",formatter:"{c}\n万亩"},z:10,itemStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#00F6FF"},{offset:1,color:"#01C1FF"}],global:!1}}}]},f={name:"business-scale-statistics-21",props:{farmAreaInfo:{type:Object,default:function(){return Object(i.b)()}}},data:function(){return{mainLoading:!0,chartInstance:null,hasData:!0}},mounted:function(){var t=this;this.$nextTick(function(){t.initMoudle()}),window.addEventListener("resize",this.adaptationChart),this.$once("hook:beforeDestroy",function(){window.removeEventListener("resize",this.adaptationChart)})},methods:{initMoudle:function(){var t=this;return l(regeneratorRuntime.mark(function e(){var n,a,r,i,o,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.hasData=t.mainLoading=!0,t.chartInstance=t._initEcharts(t.eContainerRef,u),e.next=4,t.getBusinessScale(t.farmAreaInfo.farmAreaId,t.farmAreaInfo.farmAreaType);case 4:if(n=e.sent,a=s(n,2),r=a[0],i=s(a[1],2),o=i[0],c=i[1],r){e.next=12;break}return e.abrupt("return");case 12:if(o===t.farmAreaInfo.farmAreaId&&c===t.farmAreaInfo.farmAreaType){e.next=14;break}return e.abrupt("return");case 14:if(0!==(l=r.reduce(function(t,e){return t+e.totalArea},0))){e.next=19;break}return t.hasData=!1,t.mainLoading=!1,e.abrupt("return");case 19:t.refreshChart(t.chartInstance,r,l),t.adaptationChart(),t.mainLoading=!1;case 22:case"end":return e.stop()}},e,t)}))()},refreshRender:function(){this.chartInstance&&this.chartInstance.resize()},getBusinessScale:function(t,n){var a=arguments;return this.$ajax.post(this.$api.overview.getAreaBusinessScaleStatistics,{farmAreaId:[t],farmAreaType:n}).then(function(t){var n=t.data;return 0===n.respCode?[n.obj,[].concat(c(a))]:(console.log(new Error("获取经营主体规模统计error"),e),[null,[].concat(c(a))])}).catch(function(t){console.log(new Error("获取经营主体规模统计error"),t)})},_initEcharts:function(t,e){var n=this.$echarts.init(t);return n.setOption(e),n},refreshChart:function(t,e,n){var a=this;return l(regeneratorRuntime.mark(function r(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e&&e.length&&e.length>1&&(o={xAxis:{data:e.map(function(t){return">=500"===t.businessStatisticsSelectName&&(t.businessStatisticsSelectName="≥500"),t.businessStatisticsSelectName+"亩"})},series:[{data:e.map(function(t){return{value:n,labelValue:t.businessCount}})},{data:e.map(function(t){var e=Object(i.j)({value:t.totalArea/n})>.84;return{value:t.totalArea,count:t.businessCount,label:{position:e?"insideTop":"top",color:e?"#033250":"#00F6FF"}}})}]},t.setOption(o));case 1:case"end":return a.stop()}},r,a)}))()},handlePage:function(){this.$emit("handleClick","operateSubjectList","经营规模统计")},adaptationChart:function(){var t={series:[{label:{fontSize:14}},{label:{fontSize:16}}]};(document.documentElement.clientWidth||document.body.clientWidth)>3e3?(t.series[0].label.fontSize=14,t.series[1].label.fontSize=16,this.chartInstance&&this.chartInstance.setOption(t)):(t.series[0].label.fontSize=12,t.series[1].label.fontSize=12,this.chartInstance&&this.chartInstance.setOption(t))}},computed:{eContainerRef:function(){return this.$refs.EContainer}},components:{areaPanel:r.default}},h=a("W5g0");var d=function(t){a("wqAH")},m=Object(h.a)(f,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.mainLoading,expression:"mainLoading"}],staticClass:"business-scale-statistics-21",attrs:{"element-loading-spinner":"iconfont icon-loading1","element-loading-background":"rgba(0, 0, 0, 0.2)"}},[e("area-panel",{attrs:{"area-title":"经营规模统计"},on:{"hand-sub-title":this.handlePage}},[e("div",{staticClass:"module-body",attrs:{slot:"panelMain"},slot:"panelMain"},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.hasData,expression:"hasData"}],ref:"EContainer",staticClass:"echart-container"}),this._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!this.hasData,expression:"!hasData"}],staticClass:"no-data"},[e("span",[this._v("暂无数据")])])])])],1)},[],!1,d,"data-v-01252446",null);n.default=m.exports},wqAH:function(t,e){}});
//# sourceMappingURL=45.c492b4c5e97b1dd9431b.js.map
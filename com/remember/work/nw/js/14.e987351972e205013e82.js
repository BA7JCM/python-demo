webpackJsonp([14],{"8kq/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("xk5x"),r=a("VCTt");var i={tooltip:{show:!0,trigger:"item",formatter:function(t){var e=Object(r.j)({value:t.value/1e4});return t.name+"："+e+"万亩"},backgroundColor:"#043250",position:"right",padding:[13,14,13,11],textStyle:{fontSize:12,color:"#9ED2D8"}},color:["#CB4A99","#D5EF10","#F6A82B","#32CEBB","#10AC2A","#3649FB"],series:[{type:"pie",center:["50%","50%"],radius:["75%","85%"],label:{show:!1},labelLine:{show:!1},data:[]},{type:"pie",center:["50%","50%"],radius:["66%","68%"],hoverAnimation:!1,label:{show:!1},labelLine:{show:!1},data:[]}]},s={props:{farmAreaInfo:{type:Object,default:function(){return Object(r.b)()}},groupFlag:{type:Boolean,default:!1}},data:function(){return{chartInstance:null,legendList:[],loading:!1,total:0,snTotal:0,areaList:[]}},components:{areaPanel:n.default},computed:{EContainer:function(){return this.$refs.EContainer}},mounted:function(){var t=this;this.$nextTick(function(){t.initMoudle()}),window.addEventListener("resize",this.adaptationChart),this.$once("hook:beforeDestroy",function(){window.removeEventListener("resize",this.adaptationChart)})},methods:{initMoudle:function(){var t,e=this;return(t=regeneratorRuntime.mark(function t(){var a,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,e.chartInstance=e._initEcharts(e.EContainer,i),t.next=4,(e.groupFlag?e.getPlotTypeStatistical:e.getAreaLandTypeDistribution)();case 4:if(a=t.sent){t.next=7;break}return t.abrupt("return");case 7:e.areaList=a.list,n=[],r=[],e.total=0,e.snTotal=0,a.list.forEach(function(t){r.push(t.color||"#000"),e.total+=t.landAcre,e.snTotal+=t.snLandAcre,n.push({name:t.landType,value:t.landAcre,color:t.color||"#000"})}),e.legendList=n,e.refreshChart(e.chartInstance,n,r),e.adaptationChart(),e.loading=!1;case 17:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function n(r,i){try{var s=e[r](i),o=s.value}catch(t){return void a(t)}if(!s.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})})()},refreshChart:function(t,e,a){var n={color:a,series:[{data:e},{data:e}]};this.chartInstance.setOption(n)},getPlotTypeStatistical:function(){return this.$ajax.post(this.$api.plotlist.landTypeDistributionlist,{}).then(function(t){var e=t.data;return 0===e.respCode?e.obj:null}).catch(function(t){console.log(new Error("获取用地类型"),t)})},getAreaLandTypeDistribution:function(){return this.$ajax.post(this.$api.public.areaLandTypeDistribution,{farmAreaId:[this.farmAreaInfo.farmAreaId],farmAreaType:this.farmAreaInfo.farmAreaType}).then(function(t){var e=t.data;if(0===e.respCode)return e.obj}).catch(function(t){console.log(new Error("获取用地类型---非集团版本"),t)})},formatNum:function(t){return Object(r.j)({value:t/1e4})},_initEcharts:function(t,e){var a=this.$echarts.init(t);return a.setOption(e),a},refreshRender:function(){this.chartInstance&&this.chartInstance.resize()},adaptationChart:function(){var t={series:[{radius:["75%","85%"]},{radius:["66%","68%"]}]};(document.documentElement.clientWidth||document.body.clientWidth)>3e3?(t.series[0].radius=["85%","95%"],t.series[1].radius=["76%","78%"],this.chartInstance&&this.chartInstance.setOption(t)):(t.series[0].radius=["75%","85%"],t.series[1].radius=["66%","68%"],this.chartInstance&&this.chartInstance.setOption(t))},buttonClick:function(t){this.$emit("handleClick","production17List","入网地块面积"),t.target.blur()}}},o=a("W5g0");var c=function(t){a("gGLI"),a("I4yq")},l=Object(o.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"production-resources",attrs:{"element-loading-spinner":"iconfont icon-loading1","element-loading-background":"rgba(0, 0, 0, 0.2)"}},[a("area-panel",{attrs:{"area-title":"生产资源",subTitle:"2020年11月",rightIcon:"''"}},[a("div",{ref:"panel",staticClass:"wrapper",attrs:{slot:"panelMain"},slot:"panelMain"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"network-area"},[a("div",{staticClass:"echart-wrapper"},[a("div",{ref:"EContainer",staticClass:"echart-container"}),t._v(" "),a("div",{staticClass:"center-text"},[a("p",[t._v("生产用地面积")]),t._v(" "),a("p",[t._v(t._s(t.formatNum(t.total)))]),t._v(" "),a("p",[t._v("（万亩）")])])]),t._v(" "),a("div",{staticClass:"legend"},[t._l(t.legendList,function(e){return[e.value?a("p",{key:e.name},[a("span",{staticClass:"icon",style:{background:e.color}}),t._v(t._s(e.name)+"："),a("span",{staticClass:"num"},[t._v(t._s(t.formatNum(e.value)))]),t._v("万亩\n\t\t\t\t\t\t")]):t._e()]})],2)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"area-total"},[a("span",{staticClass:"title"},[t._v("入网地块面积：")]),t._v(" "),a("span",{staticClass:"click-area",on:{click:t.buttonClick}},[a("span",{staticClass:"nums"},[t._v(t._s(t.formatNum(t.snTotal)))]),t._v(" "),a("span",{staticClass:"unit"},[t._v("万亩")]),t._v(" "),a("i",{staticClass:"iconfont icon-tubiao1",attrs:{title:"查看统计"}})])])])])],1)},[],!1,c,"data-v-527d050e",null);e.default=l.exports},I4yq:function(t,e){},gGLI:function(t,e){}});
//# sourceMappingURL=14.e987351972e205013e82.js.map